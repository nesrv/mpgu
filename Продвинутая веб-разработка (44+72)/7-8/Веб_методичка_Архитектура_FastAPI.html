<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞: FastAPI - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</title>
    <style media="print">
        body { font-family: Arial, sans-serif; font-size: 12px; }
        .container { box-shadow: none; background: white; }
        .header { background: white !important; color: black !important; }
        .save-btn { display: none !important; }
        .section { page-break-inside: avoid; }
        input, textarea { border: 1px solid #ccc; background: white; color: black; }
        .code-block { background: white !important; color: black !important; border: 1px solid #ccc; }
    </style>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .container { max-width: 1200px; margin: 20px auto; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .header { text-align: center; padding: 30px 0; background: linear-gradient(135deg, #4A90E2 0%, #357ABD 100%); color: white; border-radius: 10px; margin-bottom: 30px; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .student-info { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; margin-bottom: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; color: #4A90E2; }
        .form-group input, .form-group textarea { width: 100%; padding: 12px; border: 2px solid #e1e5e9; border-radius: 8px; font-size: 16px; transition: border-color 0.3s; }
        .form-group input:focus, .form-group textarea:focus { outline: none; border-color: #4A90E2; box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.1); }
        .form-group textarea { min-height: auto; resize: vertical; }
        .section textarea.code-textarea { min-height: 300px; }
        .code-textarea { font-family: 'Courier New', monospace; background: #2d3748; color: #e2e8f0; white-space: pre; }
        .section { margin-bottom: 40px; padding: 25px; background: #fff; border-left: 5px solid #4A90E2; border-radius: 0 10px 10px 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .section h2 { color: #4A90E2; margin-bottom: 20px; font-size: 1.8em; }
        .section h3 { color: #357ABD; margin: 20px 0 10px 0; font-size: 1.3em; }
        .code-block { background: #2d3748; color: #e2e8f0; padding: 20px; border-radius: 8px; margin: 15px 0; font-family: 'Courier New', monospace; overflow-x: auto; white-space: pre; }
        .code-block .keyword { color: #ff6b6b; }
        .code-block .string { color: #0be881; }
        .code-block .function { color: #feca57; }
        .code-block .class { color: #4ecdc4; }
        .code-block .decorator { color: #48dbfb; }
        .code-block .comment { color: #95a5a6; }
        .checkbox-item { margin: 15px 0; padding: 15px 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; display: flex; align-items: center; transition: transform 0.2s, box-shadow 0.2s; }
        .checkbox-item:hover { transform: translateX(5px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3); }
        .checkbox-item input[type="checkbox"] { appearance: none; width: 24px; height: 24px; border: 3px solid white; border-radius: 6px; margin-right: 15px; cursor: pointer; position: relative; background: transparent; transition: all 0.3s; }
        .checkbox-item input[type="checkbox"]:checked { background: white; }
        .checkbox-item input[type="checkbox"]:checked::after { content: '‚úì'; position: absolute; top: -2px; left: 4px; font-size: 18px; color: #667eea; font-weight: bold; }
        .checkbox-item label { color: white; font-weight: 500; cursor: pointer; user-select: none; }
        .save-btn { background: linear-gradient(135deg, #2ecc71, #27ae60); color: white; border: none; padding: 15px 30px; font-size: 18px; border-radius: 10px; cursor: pointer; display: block; margin: 30px auto; transition: transform 0.3s; }
        .save-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3); }
        .info-box { background: #e3f2fd; border-left: 4px solid #2196f3; padding: 15px; margin: 20px 0; border-radius: 5px; }
        ul { list-style: none; padding-left: 0; }
        ul li { padding: 8px 0 8px 30px; position: relative; }
        ul li::before { content: '‚ñ∏'; position: absolute; left: 0; color: #4A90E2; font-size: 18px; font-weight: bold; }
        @media (max-width: 768px) { .student-info { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞</h1>
            <h2>FastAPI - –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, Dependency Injection</h2>
        </div>

        <div class="student-info">
            <div class="form-group">
                <label for="student-name">–§–ò–û —Å—Ç—É–¥–µ–Ω—Ç–∞:</label>
                <input type="text" id="student-name" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
            </div>
            <div class="form-group">
                <label for="group">–ì—Ä—É–ø–ø–∞:</label>
                <input type="text" id="group" placeholder="–ò–°–¢-401">
            </div>
            <div class="form-group">
                <label for="date">–î–∞—Ç–∞:</label>
                <input type="date" id="date">
            </div>
        </div>

        <div class="section">
            <h2>üéØ –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã</h2>
            <p>–ò–∑—É—á–∏—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö API —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastAPI, –≤–∫–ª—é—á–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é, –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –º–µ—Ç–æ–¥—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏.</p>
        </div>

        <div class="section">
            <h2>üìã –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥</h2>
            <p>–î–∞–Ω –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–¥ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ:</p>
            <div class="code-block"><span class="comment"># main.py</span>
<span class="keyword">from</span> <span class="class">fastapi</span> <span class="keyword">import</span> <span class="class">FastAPI</span>, <span class="class">HTTPException</span>
<span class="keyword">from</span> <span class="class">pydantic</span> <span class="keyword">import</span> <span class="class">BaseModel</span>, <span class="class">Field</span>

<span class="function">app</span> = <span class="class">FastAPI</span>()

<span class="keyword">class</span> <span class="class">Student</span>(<span class="class">BaseModel</span>):
    <span class="function">name</span>: <span class="class">str</span>
    <span class="function">group</span>: <span class="class">str</span>
    <span class="function">year</span>: <span class="class">int</span> = <span class="class">Field</span>(ge=<span class="string">1</span>, le=<span class="string">5</span>)

<span class="keyword">class</span> <span class="class">StudentUpdate</span>(<span class="class">BaseModel</span>):
    <span class="function">name</span>: <span class="class">str</span> | <span class="keyword">None</span> = <span class="class">Field</span>(default=<span class="keyword">None</span>)
    <span class="function">group</span>: <span class="class">str</span> | <span class="keyword">None</span> = <span class="class">Field</span>(default=<span class="keyword">None</span>)
    <span class="function">year</span>: <span class="class">int</span> | <span class="keyword">None</span> = <span class="class">Field</span>(default=<span class="keyword">None</span>)

<span class="function">_students</span>: <span class="class">list</span>[<span class="class">Student</span>] = []

<span class="decorator">@app.get</span>(<span class="string">"/students"</span>)
<span class="keyword">def</span> <span class="function">get_all</span>() -> <span class="class">list</span>[<span class="class">Student</span>]:
    <span class="keyword">return</span> _students

<span class="decorator">@app.get</span>(<span class="string">"/students/{name}"</span>)
<span class="keyword">def</span> <span class="function">get_one</span>(name: <span class="class">str</span>) -> <span class="class">Student</span>:
    <span class="keyword">for</span> student <span class="keyword">in</span> _students:
        <span class="keyword">if</span> student.name == name:
            <span class="keyword">return</span> student
    <span class="keyword">raise</span> <span class="class">HTTPException</span>(<span class="string">404</span>, <span class="string">"Student not found"</span>)

<span class="decorator">@app.post</span>(<span class="string">"/students"</span>)
<span class="keyword">def</span> <span class="function">create</span>(student: <span class="class">Student</span>) -> <span class="class">Student</span>:
    _students.<span class="function">append</span>(student)
    <span class="keyword">return</span> student

<span class="decorator">@app.patch</span>(<span class="string">"/students/{name}"</span>)
<span class="keyword">def</span> <span class="function">update</span>(name: <span class="class">str</span>, update: <span class="class">StudentUpdate</span>) -> <span class="class">Student</span>:
    <span class="keyword">for</span> i, student <span class="keyword">in</span> <span class="function">enumerate</span>(_students):
        <span class="keyword">if</span> student.name == name:
            data = student.<span class="function">model_dump</span>()
            data.<span class="function">update</span>(update.<span class="function">model_dump</span>(exclude_unset=<span class="keyword">True</span>))
            _students[i] = <span class="class">Student</span>(**data)
            <span class="keyword">return</span> _students[i]
    <span class="keyword">raise</span> <span class="class">HTTPException</span>(<span class="string">404</span>, <span class="string">"Student not found"</span>)

<span class="decorator">@app.delete</span>(<span class="string">"/students/{name}"</span>)
<span class="keyword">def</span> <span class="function">delete</span>(name: <span class="class">str</span>):
    <span class="keyword">for</span> i, student <span class="keyword">in</span> <span class="function">enumerate</span>(_students):
        <span class="keyword">if</span> student.name == name:
            _students.<span class="function">pop</span>(i)
            <span class="keyword">return</span> {<span class="string">"message"</span>: <span class="string">"Student deleted"</span>}
    <span class="keyword">raise</span> <span class="class">HTTPException</span>(<span class="string">404</span>, <span class="string">"Student not found"</span>)</div>
            <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ: <code>uvicorn main:app --reload</code></p>
        </div>

        <div class="section">
            <h2>üìù –ó–∞–¥–∞–Ω–∏–µ 1: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å APIRouter</h2>
            <p>–†–∞–∑–¥–µ–ª–∏—Ç—å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–¥ –Ω–∞ –º–æ–¥—É–ª–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º APIRouter.</p>
            
            <div class="info-box">
                <strong>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:</strong>
                <ul>
                    <li>–≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ FastAPI –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º MVC –∏–ª–∏ MVT</li>
                    <li>–≠—Ç–æ —Å–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Layered Architecture) –∏–ª–∏ —Ç—Ä—ë—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (3-tier architecture)</li>
                </ul>
                <p><strong>–í–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–∑–≤–∞–Ω–∏—è —Å–ª–æ–µ–≤:</strong></p>
                <ul>
                    <li>routers/ - Presentation Layer (—Å–ª–æ–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è) –∏–ª–∏ API Layer</li>
                    <li>services/ - Business Logic Layer (—Å–ª–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏) –∏–ª–∏ Service Layer</li>
                    <li>models/ - Data Access Layer (—Å–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º) –∏–ª–∏ Model Layer</li>
                </ul>
            </div>
            
            <h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞:</h3>
            <div class="code-block">project-simple/
‚îú‚îÄ‚îÄ main.py      # FastAPI app + router –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ models.py    # Student, StudentUpdate –º–æ–¥–µ–ª–∏
‚îî‚îÄ‚îÄ students.py  # API endpoints + –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞</div>

            <h3>–†–µ—à–µ–Ω–∏–µ:</h3>
            <div class="code-block"><span class="comment"># students.py</span>
<span class="keyword">from</span> <span class="class">fastapi</span> <span class="keyword">import</span> <span class="class">APIRouter</span>, <span class="class">HTTPException</span>
<span class="keyword">from</span> <span class="class">models</span> <span class="keyword">import</span> <span class="class">Student</span>, <span class="class">StudentUpdate</span>

<span class="function">router</span> = <span class="class">APIRouter</span>(prefix=<span class="string">"/students"</span>, tags=[<span class="string">"students"</span>])
<span class="function">_students</span>: <span class="class">list</span>[<span class="class">Student</span>] = []

<span class="decorator">@router.get</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">get_all</span>() -> <span class="class">list</span>[<span class="class">Student</span>]:
    <span class="keyword">return</span> _students

<span class="decorator">@router.post</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">create</span>(student: <span class="class">Student</span>) -> <span class="class">Student</span>:
    _students.<span class="function">append</span>(student)
    <span class="keyword">return</span> student

<span class="decorator">@router.patch</span>(<span class="string">"/{name}"</span>)
<span class="keyword">def</span> <span class="function">update</span>(name: <span class="class">str</span>, data: <span class="class">StudentUpdate</span>) -> <span class="class">Student</span>:
    <span class="keyword">for</span> i, s <span class="keyword">in</span> <span class="function">enumerate</span>(_students):
        <span class="keyword">if</span> s.name == name:
            updated = s.<span class="function">model_dump</span>()
            updated.<span class="function">update</span>(data.<span class="function">model_dump</span>(exclude_unset=<span class="keyword">True</span>))
            _students[i] = <span class="class">Student</span>(**updated)
            <span class="keyword">return</span> _students[i]
    <span class="keyword">raise</span> <span class="class">HTTPException</span>(<span class="string">404</span>, <span class="string">"Student not found"</span>)

<span class="decorator">@router.delete</span>(<span class="string">"/{name}"</span>)
<span class="keyword">def</span> <span class="function">delete</span>(name: <span class="class">str</span>):
    <span class="keyword">for</span> i, s <span class="keyword">in</span> <span class="function">enumerate</span>(_students):
        <span class="keyword">if</span> s.name == name:
            _students.<span class="function">pop</span>(i)
            <span class="keyword">return</span> {<span class="string">"message"</span>: <span class="string">"Deleted"</span>}
    <span class="keyword">raise</span> <span class="class">HTTPException</span>(<span class="string">404</span>, <span class="string">"Student not found"</span>)</div>

            <div class="code-block"><span class="comment"># models.py</span>
<span class="keyword">from</span> <span class="class">pydantic</span> <span class="keyword">import</span> <span class="class">BaseModel</span>, <span class="class">Field</span>

<span class="keyword">class</span> <span class="class">Student</span>(<span class="class">BaseModel</span>):
    <span class="function">name</span>: <span class="class">str</span>
    <span class="function">group</span>: <span class="class">str</span>
    <span class="function">year</span>: <span class="class">int</span> = <span class="class">Field</span>(ge=<span class="string">1</span>, le=<span class="string">5</span>)

<span class="keyword">class</span> <span class="class">StudentUpdate</span>(<span class="class">BaseModel</span>):
    <span class="function">name</span>: <span class="class">str</span> | <span class="keyword">None</span> = <span class="class">Field</span>(default=<span class="keyword">None</span>)
    <span class="function">group</span>: <span class="class">str</span> | <span class="keyword">None</span> = <span class="class">Field</span>(default=<span class="keyword">None</span>)
    <span class="function">year</span>: <span class="class">int</span> | <span class="keyword">None</span> = <span class="class">Field</span>(default=<span class="keyword">None</span>)</div>

            <div class="code-block"><span class="comment"># main.py</span>
<span class="keyword">from</span> <span class="class">fastapi</span> <span class="keyword">import</span> <span class="class">FastAPI</span>
<span class="keyword">from</span> <span class="class">students</span> <span class="keyword">import</span> router

<span class="function">app</span> = <span class="class">FastAPI</span>()
app.<span class="function">include_router</span>(router)</div>

            <div class="checkbox-item">
                <input type="checkbox" id="task1-1">
                <label for="task1-1">–ö–æ–¥ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ –º–æ–¥—É–ª–∏</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task1-2">
                <label for="task1-2">APIRouter —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</label>
            </div>
        </div>

        <div class="section">
            <h2>üìù –ó–∞–¥–∞–Ω–∏–µ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ –ö—É—Ä—Å—ã</h2>
            <p>–°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å Course –∏ –¥–æ–±–∞–≤–∏—Ç—å CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏.</p>
            
            <div class="info-box">
                <strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:</strong>
                <ul>
                    <li>–ú–æ–¥–µ–ª—å Course —Å –ø–æ–ª—è–º–∏: id, name, credits, semester</li>
                    <li>–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ courses: list[int] –≤ –º–æ–¥–µ–ª—å Student</li>
                    <li>–°–æ–∑–¥–∞—Ç—å —Ä–æ—É—Ç–µ—Ä courses.py —Å CRUD –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏</li>
                </ul>
            </div>

            <h3>–†–µ—à–µ–Ω–∏–µ:</h3>
            <div class="code-block"><span class="comment"># models.py</span>
<span class="keyword">from</span> <span class="class">pydantic</span> <span class="keyword">import</span> <span class="class">BaseModel</span>, <span class="class">Field</span>

<span class="keyword">class</span> <span class="class">Student</span>(<span class="class">BaseModel</span>):
    ...
    <span class="function">courses</span>: <span class="class">list</span>[<span class="class">int</span>] = []

<span class="keyword">class</span> <span class="class">StudentUpdate</span>(<span class="class">BaseModel</span>):
    ...
    <span class="function">courses</span>: <span class="class">list</span>[<span class="class">int</span>] | <span class="keyword">None</span> = <span class="class">Field</span>(default=<span class="keyword">None</span>)

<span class="keyword">class</span> <span class="class">Course</span>(<span class="class">BaseModel</span>):
    <span class="function">id</span>: <span class="class">int</span>
    <span class="function">name</span>: <span class="class">str</span>
    <span class="function">credits</span>: <span class="class">int</span>
    <span class="function">semester</span>: <span class="class">int</span>

<span class="keyword">class</span> <span class="class">CourseUpdate</span>(<span class="class">BaseModel</span>):
    <span class="function">name</span>: <span class="class">str</span> | <span class="keyword">None</span> = <span class="class">Field</span>(default=<span class="keyword">None</span>)
    <span class="function">credits</span>: <span class="class">int</span> | <span class="keyword">None</span> = <span class="class">Field</span>(default=<span class="keyword">None</span>)
    <span class="function">semester</span>: <span class="class">int</span> | <span class="keyword">None</span> = <span class="class">Field</span>(default=<span class="keyword">None</span>)

<span class="comment"># students.py</span>
<span class="keyword">from</span> <span class="class">fastapi</span> <span class="keyword">import</span> <span class="class">APIRouter</span>, <span class="class">HTTPException</span>, <span class="class">Query</span>
<span class="keyword">from</span> <span class="class">models</span> <span class="keyword">import</span> <span class="class">Student</span>, <span class="class">StudentUpdate</span>
<span class="keyword">import</span> json

<span class="function">router</span> = <span class="class">APIRouter</span>(prefix=<span class="string">"/students"</span>, tags=[<span class="string">"students"</span>])
<span class="function">_students</span>: <span class="class">list</span>[<span class="class">Student</span>] = []

<span class="decorator">@router.get</span>(<span class="string">"/{name}"</span>)
<span class="keyword">def</span> <span class="function">get_one</span>(name: <span class="class">str</span>) -> <span class="class">Student</span>:
    ...

<span class="decorator">@router.post</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">create</span>(student: <span class="class">Student</span>) -> <span class="class">Student</span>:
   ...

<span class="decorator">@router.patch</span>(<span class="string">"/{name}"</span>)
<span class="keyword">def</span> <span class="function">update</span>(name: <span class="class">str</span>, data: <span class="class">StudentUpdate</span>) -> <span class="class">Student</span>:
    ...

<span class="decorator">@router.delete</span>(<span class="string">"/{name}"</span>)
<span class="keyword">def</span> <span class="function">delete</span>(name: <span class="class">str</span>):
   ...

<span class="comment"># courses.py</span>
<span class="keyword">from</span> <span class="class">fastapi</span> <span class="keyword">import</span> <span class="class">APIRouter</span>, <span class="class">HTTPException</span>
<span class="keyword">from</span> <span class="class">models</span> <span class="keyword">import</span> <span class="class">Course</span>, <span class="class">CourseUpdate</span>, <span class="class">Student</span>
<span class="keyword">import</span> students

<span class="function">router</span> = <span class="class">APIRouter</span>(prefix=<span class="string">"/courses"</span>, tags=[<span class="string">"courses"</span>])

<span class="function">_courses</span>: <span class="class">list</span>[<span class="class">Course</span>] = [
    <span class="class">Course</span>(id=<span class="string">1</span>, name=<span class="string">"–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"</span>, credits=<span class="string">4</span>, semester=<span class="string">1</span>),
    <span class="class">Course</span>(id=<span class="string">2</span>, name=<span class="string">"–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞"</span>, credits=<span class="string">3</span>, semester=<span class="string">1</span>),
    <span class="class">Course</span>(id=<span class="string">3</span>, name=<span class="string">"–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"</span>, credits=<span class="string">3</span>, semester=<span class="string">2</span>)
]

<span class="decorator">@router.get</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">get_all</span>() -> <span class="class">list</span>[<span class="class">Course</span>]:
    <span class="keyword">return</span> ...

<span class="decorator">@router.get</span>(<span class="string">"/{course_id}"</span>)
<span class="keyword">def</span> <span class="function">get_one</span>(course_id: <span class="class">int</span>) -> <span class="class">Course</span>:
    course = ...
    <span class="keyword">if not</span> course:
        <span class="keyword">raise</span> <span class="class">HTTPException</span>(<span class="string">404</span>, <span class="string">"Course not found"</span>)
    <span class="keyword">return</span> course

<span class="decorator">@router.post</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">create</span>(course: <span class="class">Course</span>) -> <span class="class">Course</span>:
   ...
    <span class="keyword">return</span> course

<span class="decorator">@router.patch</span>(<span class="string">"/{course_id}"</span>)
<span class="keyword">def</span> <span class="function">update</span>(course_id: <span class="class">int</span>, data: <span class="class">CourseUpdate</span>) -> <span class="class">Course</span>:
    <span class="keyword">for</span> i, c <span class="keyword">in</span> <span class="function">enumerate</span>(_courses):
        ...
    <span class="keyword">raise</span> <span class="class">HTTPException</span>(<span class="string">404</span>, <span class="string">"Course not found"</span>)

<span class="decorator">@router.delete</span>(<span class="string">"/{course_id}"</span>)
<span class="keyword">def</span> <span class="function">delete</span>(course_id: <span class="class">int</span>):
    <span class="keyword">for</span> i, c <span class="keyword">in</span> <span class="function">enumerate</span>(_courses):
        ...
            <span class="keyword">return</span> {<span class="string">"message"</span>: <span class="string">"Deleted"</span>}
    <span class="keyword">raise</span> <span class="class">HTTPException</span>(<span class="string">404</span>, <span class="string">"Course not found"</span>)

<span class="decorator">@router.get</span>(<span class="string">"/{course_id}/students"</span>)
<span class="keyword">def</span> <span class="function">get_students</span>(course_id: <span class="class">int</span>) -> <span class="class">list</span>[<span class="class">Student</span>]:
    <span class="keyword">return</span> [...]

<span class="comment"># main.py</span>
<span class="keyword">from</span> <span class="class">fastapi</span> <span class="keyword">import</span> <span class="class">FastAPI</span>
<span class="keyword">from</span> <span class="class">students</span> <span class="keyword">import</span> router <span class="keyword">as</span> students_router
<span class="keyword">from</span> <span class="class">courses</span> <span class="keyword">import</span> router <span class="keyword">as</span> courses_router

<span class="function">app</span> = <span class="class">FastAPI</span>()
app.<span class="function">include_router</span>(students_router)
app.<span class="function">include_router</span>(courses_router)</div>

            <div class="form-group">
                <label>–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:</label>
                <textarea class="code-textarea" placeholder="# –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å..."></textarea>
            </div>

            <div class="checkbox-item">
                <input type="checkbox" id="task2-1">
                <label for="task2-1">–ú–æ–¥–µ–ª—å Course —Å–æ–∑–¥–∞–Ω–∞</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task2-2">
                <label for="task2-2">CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã</label>
            </div>
        </div>

        <div class="section">
            <h2>üìù –ó–∞–¥–∞–Ω–∏–µ 2.1: –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞</h2>
            
            <h3>–°–æ–∑–¥–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç –¥–ª—è fixtures.py –∏ –ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</h3>
            
            <h3>fixtures.json:</h3>
            <div class="code-block">[
  {"name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤", "group": "–ò–í–¢-21", "year": 2, "courses": [1, 2]},
  {"name": "–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞", "group": "–ò–í–¢-21", "year": 2, "courses": [1]},
  {"name": "–ê–ª–µ–∫—Å–µ–π –ò–≤–∞–Ω–æ–≤", "group": "–ò–í–¢-22", "year": 1, "courses": [2, 3]},
  {"name": "–ï–ª–µ–Ω–∞ –ö–æ–∑–ª–æ–≤–∞", "group": "–ò–í–¢-21", "year": 2, "courses": [1, 3]},
  {"name": "–î–º–∏—Ç—Ä–∏–π –°–º–∏—Ä–Ω–æ–≤", "group": "–ò–í–¢-23", "year": 3, "courses": [2]},
  {"name": "–ê–Ω–Ω–∞ –í–æ–ª–∫–æ–≤–∞", "group": "–ò–í–¢-22", "year": 1, "courses": [1, 2, 3]},
  {"name": "–°–µ—Ä–≥–µ–π –ú–æ—Ä–æ–∑–æ–≤", "group": "–ò–í–¢-21", "year": 2, "courses": [3]},
  {"name": "–û–ª—å–≥–∞ –ù–æ–≤–∏–∫–æ–≤–∞", "group": "–ò–í–¢-23", "year": 3, "courses": [1]},
  {"name": "–ü–∞–≤–µ–ª –õ–µ–±–µ–¥–µ–≤", "group": "–ò–í–¢-22", "year": 1, "courses": [2, 3]},
  {"name": "–¢–∞—Ç—å—è–Ω–∞ –°–æ–∫–æ–ª–æ–≤–∞", "group": "–ò–í–¢-21", "year": 2, "courses": [1, 2]},
  {"name": "–ù–∏–∫–æ–ª–∞–π –ü–æ–ø–æ–≤", "group": "–ò–í–¢-23", "year": 3, "courses": [3]},
  {"name": "–í–∏–∫—Ç–æ—Ä–∏—è –û—Ä–ª–æ–≤–∞", "group": "–ò–í–¢-22", "year": 1, "courses": [1, 3]},
  {"name": "–ê–Ω–¥—Ä–µ–π –ú–∏—Ö–∞–π–ª–æ–≤", "group": "–ò–í–¢-21", "year": 2, "courses": [2]},
  {"name": "–°–≤–µ—Ç–ª–∞–Ω–∞ –§–µ–¥–æ—Ä–æ–≤–∞", "group": "–ò–í–¢-23", "year": 3, "courses": [1, 2]},
  {"name": "–ú–∞–∫—Å–∏–º –†–æ–º–∞–Ω–æ–≤", "group": "–ò–í–¢-22", "year": 1, "courses": [3]},
  {"name": "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –ñ—É–∫–æ–≤–∞", "group": "–ò–í–¢-21", "year": 2, "courses": [1]},
  {"name": "–í–ª–∞–¥–∏–º–∏—Ä –ö—É–∑–Ω–µ—Ü–æ–≤", "group": "–ò–í–¢-23", "year": 3, "courses": [2, 3]},
  {"name": "–ù–∞—Ç–∞–ª—å—è –í–∞—Å–∏–ª—å–µ–≤–∞", "group": "–ò–í–¢-22", "year": 1, "courses": [1, 2]},
  {"name": "–ê—Ä—Ç–µ–º –ü–µ—Ç—Ä–æ–≤", "group": "–ò–í–¢-21", "year": 2, "courses": [3]},
  {"name": "–Æ–ª–∏—è –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–æ–≤–∞", "group": "–ò–í–¢-23", "year": 3, "courses": [1, 2, 3]}
]</div>

            <h3>–†–µ—à–µ–Ω–∏–µ fixtures.py:</h3>
            <div class="code-block"><span class="keyword">from</span> <span class="class">fastapi</span> <span class="keyword">import</span> <span class="class">APIRouter</span>
<span class="keyword">import</span> <span class="class">json</span>
<span class="keyword">import</span> <span class="class">students</span>
<span class="keyword">import</span> <span class="class">courses</span>

<span class="function">router</span> = <span class="class">APIRouter</span>(prefix=<span class="string">"/fixtures"</span>, tags=[<span class="string">"fixtures"</span>])

<span class="decorator">@router.post</span>(<span class="string">"/load-all"</span>)
<span class="keyword">def</span> <span class="function">load_all_fixtures</span>():
    <span class="string">"""–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (—Å—Ç—É–¥–µ–Ω—Ç—ã –∏ –∫—É—Ä—Å—ã)"""</span>
    <span class="keyword">with</span> <span class="function">open</span>(<span class="string">"fixtures_full.json"</span>, <span class="string">"r"</span>, encoding=<span class="string">"utf-8"</span>) <span class="keyword">as</span> f:
        data = json.<span class="function">load</span>(f)
    
    <span class="comment"># –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</span>
    students._students = [...]
    
    <span class="comment"># –ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–æ–≤</span>
    courses._courses = [...]
    
    <span class="keyword">return</span> {
        <span class="string">"message"</span>: <span class="string">"All fixtures loaded successfully"</span>,
        <span class="string">"students_count"</span>: <span class="function">len</span>(students._students),
        <span class="string">"courses_count"</span>: <span class="function">len</span>(courses._courses)
    }

<span class="decorator">@router.delete</span>(<span class="string">"/clear-all"</span>)
<span class="keyword">def</span> <span class="function">clear_all_data</span>():
    <span class="string">"""–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ"""</span>
    ...
    <span class="keyword">return</span> {<span class="string">"message"</span>: <span class="string">"All data cleared"</span>}

<span class="decorator">@router.get</span>(<span class="string">"/status"</span>)
<span class="keyword">def</span> <span class="function">get_status</span>():
    <span class="string">"""–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö"""</span>
    <span class="keyword">return</span> {
        <span class="string">"students_count"</span>: <span class="function">len</span>(students._students),
        <span class="string">"courses_count"</span>: <span class="function">len</span>(courses._courses)
    }</div>

            <h3>–î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤ students.py:</h3>
            <div class="info-box">
                <strong>–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:</strong>
                <ul>
                    <li>POST /students/{name}/enroll/{course_id} - –∑–∞–ø–∏—Å–∞—Ç—å –Ω–∞ –∫—É—Ä—Å</li>
                    <li>DELETE /students/{name}/unenroll/{course_id} - –æ—Ç—á–∏—Å–ª–∏—Ç—å —Å –∫—É—Ä—Å–∞</li>
                    <li>GET /students/search?query=–ò–≤–∞–Ω - –ø–æ–∏—Å–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</li>
                    <li>GET /students?year=2&group=–ò–í–¢-21 - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤</li>
                </ul>
            </div>

            <h3>–†–µ—à–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:</h3>
            <div class="code-block"><span class="decorator">@router.post</span>(<span class="string">"/{name}/enroll/{course_id}"</span>)
<span class="keyword">def</span> <span class="function">enroll</span>(name: <span class="class">str</span>, course_id: <span class="class">int</span>):
    ...
    <span class="keyword">return</span> {<span class="string">"message"</span>: <span class="string">"Enrolled"</span>}
    <span class="keyword">raise</span> <span class="class">HTTPException</span>(<span class="string">404</span>, <span class="string">"Student not found"</span>)

<span class="decorator">@router.delete</span>(<span class="string">"/{name}/unenroll/{course_id}"</span>)
<span class="keyword">def</span> <span class="function">unenroll</span>(name: <span class="class">str</span>, course_id: <span class="class">int</span>):
    ...
    <span class="keyword">return</span> {<span class="string">"message"</span>: <span class="string">"Unenrolled"</span>}
    <span class="keyword">raise</span> <span class="class">HTTPException</span>(<span class="string">404</span>, <span class="string">"Student not found"</span>)

<span class="decorator">@router.get</span>(<span class="string">"/search"</span>)
<span class="keyword">def</span> <span class="function">search</span>(query: <span class="class">str</span> = <span class="class">Query</span>(...)) -> <span class="class">list</span>[<span class="class">Student</span>]:
    <span class="keyword">return</span> [...]

<span class="comment"># GET /students?year=2&group=–ò–í–¢-21</span>
<span class="decorator">@router.get</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">get_all</span>(
    year: <span class="class">int</span> | <span class="keyword">None</span> = <span class="keyword">None</span>,
    group: <span class="class">str</span> | <span class="keyword">None</span> = <span class="keyword">None</span>
) -> <span class="class">list</span>[<span class="class">Student</span>]:
    result = _students
    <span class="keyword">if</span> year:
        result = [...]
    <span class="keyword">if</span> group:
        result = [...]
    <span class="keyword">return</span> result</div>

            <div class="form-group">
                <label>–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:</label>
                <textarea class="code-textarea" placeholder="# –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å..."></textarea>
            </div>

            <div class="checkbox-item">
                <input type="checkbox" id="task2-3">
                <label for="task2-3">Fixtures –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task2-4">
                <label for="task2-4">–≠–Ω–¥–ø–æ–∏–Ω—Ç—ã enroll/unenroll —Ä–∞–±–æ—Ç–∞—é—Ç</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task2-5">
                <label for="task2-5">–ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã</label>
            </div>
        </div>

        <div class="section">
            <h2>üìù –ó–∞–¥–∞–Ω–∏–µ 3: –°–ª–æ–∂–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (Repository + Service)</h2>
            <p>–î–∞–ª–µ–µ –Ω—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å —Å–ª–æ–∏ –ø–æ –∑–æ–Ω–∞–º –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏:</p>
            
            <ul>
                <li>Routers - –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤</li>
                <li>Services - –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞</li>
                <li>Repositories - —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏</li>
                <li>Models - –¥–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏</li>
                <li>Schemas - –≤–∞–ª–∏–¥–∞—Ü–∏—è API</li>
            </ul>
            
            <h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–∫—Ä–∞—Ç–∫–∞—è):</h3>
            <div class="code-block">project-pattern/
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ api/
‚îú‚îÄ‚îÄ services/
‚îú‚îÄ‚îÄ repositories/
‚îú‚îÄ‚îÄ models/
‚îú‚îÄ‚îÄ schemas/
‚îú‚îÄ‚îÄ database/
‚îî‚îÄ‚îÄ fixtures.json</div>

            <h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (–¥–µ—Ç–∞–ª—å–Ω–∞—è):</h3>
            <div class="code-block">project-pattern/
‚îú‚îÄ‚îÄ main.py                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ api/                       # API –£—Ä–æ–≤–µ–Ω—å (–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ)
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ students.py            # REST —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ courses.py             # REST —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∫—É—Ä—Å–æ–≤
‚îÇ  
‚îú‚îÄ‚îÄ services/                  # –£—Ä–æ–≤–µ–Ω—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ student_service.py     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ course_service.py      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∫—É—Ä—Å–æ–≤
‚îÇ  
‚îú‚îÄ‚îÄ repositories/              # –£—Ä–æ–≤–µ–Ω—å –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ   ‚îú‚îÄ‚îÄ student_repository.py  # –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ course_repository.py   # –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –¥–∞–Ω–Ω—ã–º–∏ –∫—É—Ä—Å–æ–≤
‚îÇ  
‚îú‚îÄ‚îÄ models/                    # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ student.py             # –ú–æ–¥–µ–ª—å Student
‚îÇ   ‚îî‚îÄ‚îÄ course.py              # –ú–æ–¥–µ–ª—å Course
‚îÇ  
‚îú‚îÄ‚îÄ schemas/                   # –°—Ö–µ–º—ã API
‚îÇ   ‚îú‚îÄ‚îÄ student.py             # DTO —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ course.py              # DTO –∫—É—Ä—Å–æ–≤
‚îÇ  
‚îú‚îÄ‚îÄ database/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py            # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î (–∑–∞–≥–ª—É—à–∫–∞)
‚îî‚îÄ‚îÄ fixtures.json              # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</div>

            <h3>–†–µ—à–µ–Ω–∏–µ (—á–∞—Å—Ç—å 1 - Repository):</h3>
            <div class="code-block"><span class="comment"># repositories/student_repository.py</span>
<span class="keyword">from</span> <span class="class">models.student</span> <span class="keyword">import</span> <span class="class">Student</span>

<span class="keyword">class</span> <span class="class">StudentRepository</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="function">self</span>):
        <span class="function">self</span>._students: <span class="class">list</span>[<span class="class">Student</span>] = []
    
    <span class="keyword">def</span> <span class="function">get_all</span>(<span class="function">self</span>, year: <span class="class">int</span> | <span class="keyword">None</span> = <span class="keyword">None</span>, group: <span class="class">str</span> | <span class="keyword">None</span> = <span class="keyword">None</span>) -> <span class="class">list</span>[<span class="class">Student</span>]:
        result = <span class="function">self</span>._students
        <span class="keyword">if</span> year:
            result = [s <span class="keyword">for</span> s <span class="keyword">in</span> result <span class="keyword">if</span> s.year == year]
        <span class="keyword">if</span> group:
            result = [s <span class="keyword">for</span> s <span class="keyword">in</span> result <span class="keyword">if</span> s.group == group]
        <span class="keyword">return</span> result
    
    <span class="keyword">def</span> <span class="function">create</span>(<span class="function">self</span>, student_data: <span class="class">dict</span>) -> <span class="class">Student</span>:
        student = <span class="class">Student</span>(**student_data)
        <span class="function">self</span>._students.<span class="function">append</span>(student)
        <span class="keyword">return</span> student</div>

            <h3>–†–µ—à–µ–Ω–∏–µ (—á–∞—Å—Ç—å 2 - Service):</h3>
            <div class="code-block"><span class="comment"># services/student_service.py</span>
<span class="keyword">from</span> <span class="class">repositories.student_repository</span> <span class="keyword">import</span> <span class="class">StudentRepository</span>

<span class="keyword">class</span> <span class="class">StudentService</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="function">self</span>):
        <span class="function">self</span>.repository = <span class="class">StudentRepository</span>()
    
    <span class="keyword">def</span> <span class="function">get_all</span>(<span class="function">self</span>, year: <span class="class">int</span> | <span class="keyword">None</span> = <span class="keyword">None</span>, group: <span class="class">str</span> | <span class="keyword">None</span> = <span class="keyword">None</span>):
        <span class="keyword">return</span> <span class="function">self</span>.repository.<span class="function">get_all</span>(year, group)
    
    <span class="keyword">def</span> <span class="function">create</span>(<span class="function">self</span>, student_data):
        <span class="keyword">return</span> <span class="function">self</span>.repository.<span class="function">create</span>(student_data)</div>

            <h3>–†–µ—à–µ–Ω–∏–µ (—á–∞—Å—Ç—å 3 - API):</h3>
            <div class="code-block"><span class="comment"># api/students.py</span>
<span class="keyword">from</span> <span class="class">fastapi</span> <span class="keyword">import</span> <span class="class">APIRouter</span>, <span class="class">HTTPException</span>
<span class="keyword">from</span> <span class="class">services.student_service</span> <span class="keyword">import</span> <span class="class">StudentService</span>

<span class="function">router</span> = <span class="class">APIRouter</span>(prefix=<span class="string">"/students"</span>, tags=[<span class="string">"students"</span>])
<span class="function">service</span> = <span class="class">StudentService</span>()

<span class="decorator">@router.get</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">get_all</span>(year: <span class="class">int</span> | <span class="keyword">None</span> = <span class="keyword">None</span>, group: <span class="class">str</span> | <span class="keyword">None</span> = <span class="keyword">None</span>):
    <span class="keyword">return</span> service.<span class="function">get_all</span>(year, group)</div>

            <h3>–†–µ—à–µ–Ω–∏–µ (—á–∞—Å—Ç—å 4 - Schemas):</h3>
            <div class="code-block"><span class="comment"># schemas/student.py</span>
<span class="keyword">from</span> <span class="class">pydantic</span> <span class="keyword">import</span> <span class="class">BaseModel</span>, <span class="class">Field</span>

<span class="keyword">class</span> <span class="class">StudentCreate</span>(<span class="class">BaseModel</span>):
    <span class="function">name</span>: <span class="class">str</span>
    <span class="function">group</span>: <span class="class">str</span>
    <span class="function">year</span>: <span class="class">int</span> = <span class="class">Field</span>(ge=<span class="string">1</span>, le=<span class="string">5</span>)
    <span class="function">courses</span>: <span class="class">list</span>[<span class="class">int</span>] = []

<span class="keyword">class</span> <span class="class">StudentUpdate</span>(<span class="class">BaseModel</span>):
    <span class="function">name</span>: <span class="class">str</span> | <span class="keyword">None</span> = <span class="keyword">None</span>
    <span class="function">group</span>: <span class="class">str</span> | <span class="keyword">None</span> = <span class="keyword">None</span>
    <span class="function">year</span>: <span class="class">int</span> | <span class="keyword">None</span> = <span class="keyword">None</span>
    <span class="function">courses</span>: <span class="class">list</span>[<span class="class">int</span>] | <span class="keyword">None</span> = <span class="keyword">None</span>

<span class="keyword">class</span> <span class="class">StudentResponse</span>(<span class="class">BaseModel</span>):
    <span class="function">name</span>: <span class="class">str</span>
    <span class="function">group</span>: <span class="class">str</span>
    <span class="function">year</span>: <span class="class">int</span>
    <span class="function">courses</span>: <span class="class">list</span>[<span class="class">int</span>]</div>

            <h3>–†–µ—à–µ–Ω–∏–µ (—á–∞—Å—Ç—å 5 - Models):</h3>
            <div class="code-block"><span class="comment"># models/student.py</span>
<span class="keyword">from</span> <span class="class">pydantic</span> <span class="keyword">import</span> <span class="class">BaseModel</span>, <span class="class">Field</span>

<span class="keyword">class</span> <span class="class">Student</span>(<span class="class">BaseModel</span>):
    ...</div>

            <h3>–í—ã–≤–æ–¥—ã:</h3>
            <p>–ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ —Å–ª–æ–∂–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:</p>
            <ul>
                <li>–ú–Ω–æ–≥–æ —Å—É—â–Ω–æ—Å—Ç–µ–π (User, Course, Grade, etc.)</li>
                <li>–†–µ–∞–ª—å–Ω–∞—è –ë–î (PostgreSQL, MongoDB)</li>
                <li>–°–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞</li>
                <li>–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</li>
            </ul>

            <div class="checkbox-item">
                <input type="checkbox" id="task3-1">
                <label for="task3-1">–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞</label>
            </div>
        </div>

        <div class="section">
            <h2>üêò –ó–∞–¥–∞–Ω–∏–µ 4: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ PostgreSQL</h2>
            <p>–ó–∞–º–µ–Ω–∏—Ç—å in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ PostgreSQL –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.</p>
            
            <h3>Dockerfile:</h3>
            <div class="code-block">FROM postgres:18

ENV POSTGRES_DB=students_db
ENV POSTGRES_USER=student
ENV POSTGRES_PASSWORD=password

EXPOSE 5432</div>

            <h3>–ö–æ–º–∞–Ω–¥—ã –∑–∞–ø—É—Å–∫–∞:</h3>
            <div class="code-block">docker build -t postgres-students .
docker run -d -p 5432:5432 postgres-students</div>

            <h3>–®–ø–∞—Ä–≥–∞–ª–∫–∞ SQLAlchemy:</h3>
            <div class="code-block"><span class="comment"># CREATE</span>
student = <span class="class">StudentModel</span>(name=<span class="string">"–ò–≤–∞–Ω"</span>, group=<span class="string">"–ò–í–¢-21"</span>, year=<span class="string">2</span>, courses=[<span class="string">1</span>,<span class="string">2</span>])
db.<span class="function">add</span>(student)
db.<span class="function">commit</span>()

<span class="comment"># READ</span>
db.<span class="function">query</span>(<span class="class">StudentModel</span>).<span class="function">all</span>()
db.<span class="function">query</span>(<span class="class">StudentModel</span>).<span class="function">filter</span>(<span class="class">StudentModel</span>.name == <span class="string">"–ò–≤–∞–Ω"</span>).<span class="function">first</span>()

<span class="comment"># UPDATE</span>
student.year = <span class="string">3</span>
db.<span class="function">commit</span>()

<span class="comment"># DELETE</span>
db.<span class="function">delete</span>(student)
db.<span class="function">commit</span>()</div>

            <div class="checkbox-item">
                <input type="checkbox" id="task4-1">
                <label for="task4-1">PostgreSQL –∑–∞–ø—É—â–µ–Ω</label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task4-2">
                <label for="task4-2">SQLAlchemy –Ω–∞—Å—Ç—Ä–æ–µ–Ω</label>
            </div>
        </div>

        <div class="section">
            <h2>üìù –ó–∞–¥–∞–Ω–∏–µ 5: Dependency Injection</h2>
            <p>–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω Dependency Injection –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.</p>
            
            <h3>–î–æ–±–∞–≤—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:</h3>
            <div class="code-block"><span class="comment"># requirements.txt</span>
fastapi
uvicorn
sqlalchemy
psycopg2-binary</div>

            <h3>–§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:</h3>
            <div class="code-block"><span class="comment"># database.py</span>
<span class="keyword">from</span> <span class="class">sqlalchemy</span> <span class="keyword">import</span> <span class="class">Column</span>, <span class="class">Integer</span>, <span class="class">String</span>, <span class="class">create_engine</span>, <span class="class">JSON</span>
<span class="keyword">from</span> <span class="class">sqlalchemy.ext.declarative</span> <span class="keyword">import</span> <span class="class">declarative_base</span>
<span class="keyword">from</span> <span class="class">sqlalchemy.orm</span> <span class="keyword">import</span> <span class="class">sessionmaker</span>, <span class="class">Session</span>

<span class="function">DATABASE_URL</span> = <span class="string">"postgresql://student:password@localhost:5432/students_db"</span>

<span class="function">engine</span> = <span class="function">create_engine</span>(<span class="function">DATABASE_URL</span>)
<span class="function">SessionLocal</span> = <span class="function">sessionmaker</span>(bind=engine)
<span class="function">Base</span> = <span class="function">declarative_base</span>()

<span class="keyword">class</span> <span class="class">StudentModel</span>(<span class="class">Base</span>):
    <span class="function">__tablename__</span> = <span class="string">"students"</span>
    <span class="function">id</span> = <span class="class">Column</span>(<span class="class">Integer</span>, primary_key=<span class="keyword">True</span>)
    <span class="function">name</span> = <span class="class">Column</span>(<span class="class">String</span>, unique=<span class="keyword">True</span>)
    <span class="function">group</span> = <span class="class">Column</span>(<span class="class">String</span>)
    <span class="function">year</span> = <span class="class">Column</span>(<span class="class">Integer</span>)
    <span class="function">courses</span> = <span class="class">Column</span>(<span class="class">JSON</span>, default=[])

<span class="keyword">class</span> <span class="class">CourseModel</span>(<span class="class">Base</span>):
    <span class="function">__tablename__</span> = <span class="string">"courses"</span>
    <span class="function">id</span> = <span class="class">Column</span>(<span class="class">Integer</span>, primary_key=<span class="keyword">True</span>)
    <span class="function">name</span> = <span class="class">Column</span>(<span class="class">String</span>)
    <span class="function">credits</span> = <span class="class">Column</span>(<span class="class">Integer</span>)
    <span class="function">semester</span> = <span class="class">Column</span>(<span class="class">Integer</span>)

<span class="keyword">def</span> <span class="function">get_db</span>():
    db = <span class="class">SessionLocal</span>()
    <span class="keyword">try</span>:
        <span class="keyword">yield</span> db
    <span class="keyword">finally</span>:
        db.<span class="function">close</span>()

<span class="keyword">def</span> <span class="function">create_tables</span>():
    <span class="class">Base</span>.metadata.<span class="function">create_all</span>(bind=engine)</div>
            
            <h3>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤:</h3>
            <div class="code-block"><span class="comment"># IN-MEMORY (–±–µ–∑ DI)</span>
<span class="keyword">class</span> <span class="class">StudentRepository</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="function">self</span>):
        <span class="function">self</span>._students: <span class="class">list</span>[<span class="class">Student</span>] = []

<span class="function">service</span> = <span class="class">StudentService</span>()  <span class="comment"># –ì–ª–æ–±–∞–ª—å–Ω—ã–π</span>

<span class="decorator">@router.get</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">get_all</span>():
    <span class="keyword">return</span> service.<span class="function">get_all</span>()</div>

            <div class="code-block"><span class="comment"># SQLALCHEMY (—Å DI)</span>
<span class="keyword">class</span> <span class="class">StudentRepository</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="function">self</span>, db: <span class="class">Session</span>):
        <span class="function">self</span>.db = db

<span class="keyword">def</span> <span class="function">get_service</span>(db: <span class="class">Session</span> = <span class="class">Depends</span>(get_db)):
    <span class="keyword">return</span> <span class="class">StudentService</span>(db)

<span class="decorator">@router.get</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">get_all</span>(service: <span class="class">StudentService</span> = <span class="class">Depends</span>(get_service)):
    <span class="keyword">return</span> service.<span class="function">get_all</span>()</div>

            <div class="checkbox-item">
                <input type="checkbox" id="task5-1">
                <label for="task5-1">DI —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω</label>
            </div>
        </div>

        <div class="section">
            <h2>üìä –í—ã–≤–æ–¥—ã –ø–æ –∑–∞–Ω—è—Ç–∏—é</h2>

            <div class="form-group">
                <label>–ù–∞ –¥–∞–Ω–Ω–æ–º –∑–∞–Ω—è—Ç–∏–∏ –º—ã –∏–∑—É—á–∏–ª–∏:</label>
                <textarea rows="3" placeholder="–ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã..."></textarea>
            </div>

            <div class="form-group">
                <label>–ß—Ç–æ –Ω–æ–≤–æ–≥–æ —É–∑–Ω–∞–ª(–∞):</label>
                <textarea rows="3"></textarea>
            </div>

            <div class="form-group">
                <label>–ß—Ç–æ –±—ã–ª–æ —Ç—Ä—É–¥–Ω–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è:</label>
                <textarea rows="3" placeholder="–û–ø–∏—à–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏..."></textarea>
            </div>
        </div>

        <button class="save-btn" onclick="window.print()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PDF</button>
    </div>

    <script>
        function loadFromStorage() {
            document.getElementById('student-name').value = localStorage.getItem('student-name') || '';
            document.getElementById('group').value = localStorage.getItem('group') || '';
            document.getElementById('date').value = localStorage.getItem('date') || new Date().toISOString().split('T')[0];
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                if (localStorage.getItem(checkbox.id) === 'true') checkbox.checked = true;
            });
            document.querySelectorAll('textarea').forEach((textarea, index) => {
                const saved = localStorage.getItem('textarea-' + index);
                if (saved) textarea.value = saved;
            });
        }
        
        function saveToStorage() {
            localStorage.setItem('student-name', document.getElementById('student-name').value);
            localStorage.setItem('group', document.getElementById('group').value);
            localStorage.setItem('date', document.getElementById('date').value);
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                localStorage.setItem(checkbox.id, checkbox.checked);
            });
            document.querySelectorAll('textarea').forEach((textarea, index) => {
                localStorage.setItem('textarea-' + index, textarea.value);
            });
        }
        
        loadFromStorage();
        document.getElementById('student-name').addEventListener('input', saveToStorage);
        document.getElementById('group').addEventListener('input', saveToStorage);
        document.getElementById('date').addEventListener('change', saveToStorage);
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            checkbox.addEventListener('change', saveToStorage);
        });
        document.querySelectorAll('textarea').forEach(textarea => {
            textarea.addEventListener('input', saveToStorage);
            textarea.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = this.scrollHeight + 'px';
            });

        });
        
        function highlightCode(textarea) {
            const code = textarea.value;
            const highlighted = highlightPython(code);
            const codeBlock = document.createElement('div');
            codeBlock.className = 'code-block';
            codeBlock.innerHTML = highlighted;
            codeBlock.style.cursor = 'pointer';
            codeBlock.onclick = function() {
                this.replaceWith(textarea);
                textarea.focus();
            };
            textarea.replaceWith(codeBlock);
        }
        
        function highlightPython(code) {
            const keywords = ['def', 'class', 'import', 'from', 'return', 'if', 'else', 'elif', 'for', 'while', 'try', 'except', 'with', 'as', 'in', 'not', 'and', 'or', 'None', 'True', 'False', 'raise'];
            
            let result = code
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');
            
            result = result.replace(/#[^\n]*/g, m => `<span class="comment">${m}</span>`);
            result = result.replace(/(["'])(?:\\.|(?!\1)[^\n])*?\1/g, m => `<span class="string">${m}</span>`);
            result = result.replace(/@\w+/g, m => `<span class="decorator">${m}</span>`);
            
            keywords.forEach(kw => {
                const re = new RegExp(`\\b${kw}\\b`, 'g');
                result = result.replace(re, `<span class="keyword">${kw}</span>`);
            });
            
            result = result.replace(/\b([A-Z][a-zA-Z0-9_]*)\b/g, '<span class="class">$1</span>');
            result = result.replace(/\b([a-z_][a-zA-Z0-9_]*)(?=\s*\()/g, '<span class="function">$1</span>');
            
            return result;
        }
    </script>
</body>
</html>