
#### **Часть 3: Практика! Работа с Docker CLI (30 минут)**

**(Преподаватель)**
"Теперь давайте перейдем к самому интересному — практике. Откройте свои терминалы."

*Ведите демонстрацию в реальном времени, комментируя каждую команду.*

**1. "Hello, World!" от Docker**
```bash
docker run hello-world
```
*   **Объяснение:** "Команда `docker run` делает сразу три вещи:
    1.  Ищет образ `hello-world` локально.
    2.  Не находит и качает его из Docker Hub.
    3.  Создает и запускает из него контейнер.
    Вы только что запустили свой первый контейнер!"

**2. Запуск чего-то полезного: веб-сервер Nginx**
```bash
docker run -d -p 8080:80 --name my-webserver nginx
```
*   **Объяснение флагов:**
    *   `-d` (detach) — запустить в фоновом режиме.
    *   `-p 8080:80` (publish) — пробросить порт. "Порт 80 внутри контейнера (где работает nginx) теперь доступен снаружи на порту 8080 вашей машины."
    *   `--name` — дать контейнеру понятное имя.
*   **Действие:** "Откройте браузер и перейдите на `http://localhost:8080`. Вы увидите приветственную страницу Nginx, работающую внутри контейнера!"

**3. Основные команды для управления**
```bash
docker ps # показать работающие контейнеры
docker ps -a # показать все контейнеры (включая остановленные)
docker stop my-webserver # остановить контейнер
docker start my-webserver # запустить остановленный контейнер
docker rm my-webserver # удалить контейнер (только после остановки)
docker images # посмотреть список образов
docker rmi nginx # удалить образ
```
*   **Объяснение:** "Эти команды — ваш основной инструмент для управления жизненным циклом контейнеров."

---

#### **Часть 4: Создаем свой образ (25 минут)**

**(Преподаватель)**
"Запускать готовые образы — это здорово. Но настоящая магия начинается, когда вы создаете свои. Давайте упакуем простое Python-приложение."

**1. Подготовка:**
*   Создайте папку `my_python_app`.
*   Внутри создайте два файла: `app.py` и `Dockerfile`.

**2. Содержимое `app.py`:**
```python
from flask import Flask
app = Flask(__name__)

@app.route('/')
def hello():
    return 'Привет от моего первого Docker-приложения!'

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
```

**3. Содержимое `Dockerfile`:**
```dockerfile
# Используем официальный легковесный Python образ как базовый
FROM python:3.9-slim

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем файл с зависимостями (если бы он был)
# COPY requirements.txt .
# RUN pip install -r requirements.txt

# Копируем наш код в контейнер
COPY . .

# Устанавливаем Flask
RUN pip install Flask

# Говорим Docker, какой порт будет прослушивать контейнер
EXPOSE 5000

# Команда для запуска приложения
CMD ["python", "app.py"]
```
*   **Построчно разберите Dockerfile:** "`FROM` — основа, `WORKDIR` — рабочая папка, `COPY` — копируем файлы, `RUN` — выполняем команду при сборке, `EXPOSE` — документация о порте, `CMD` — команда для запуска."

**4. Сборка образа и запуск контейнера:**
```bash
# Переходим в папку с Dockerfile
cd my_python_app

# Собираем образ с тегом 'my-python-app'
docker build -t my-python-app .

# Запускаем контейнер из нашего образа
docker run -d -p 5000:5000 my-python-app
```
*   **Действие:** "Перейдите в браузере на `http://localhost:5000`. Вы увидите сообщение от вашего собственного приложения, работающего в изолированном контейнере!"

---

#### **Часть 5: Заключение и Дальнейшие шаги (10 минут)**

**Слайд 5: Резюме и что дальше?.**

**(Преподаватель)**
*   **Краткое повторение:** "Итак, что мы сегодня узнали? Мы поняли, зачем нужны контейнеры, узнали про Образы, Контейнеры и Dockerfile, научились их запускать, останавливать и, самое главное, — создавать свои."
*   **Что дальше? (Направления для самостоятельного изучения):**
    *   **Docker Compose:** Для запуска многоконтейнерных приложений (например, веб-сервер + база данных).
    *   **Volumes:** Для сохранения данных (чтобы данные в БД не пропадали после удаления контейнера).
    *   **Сети в Docker:** Как контейнеры общаются друг с другом.
    *   **Best Practices:** Создание минимальных образов, безопасность.
*   **Домашнее задание (по желанию/на усмотрение):**
    1.  Модифицируйте наше Python-приложение, чтобы оно возвращало не просто текст, а текущее время.
    2.  Соберите новый образ и запустите новый контейнер.
    3.  Найдите на Docker Hub образ Redis и запустите его. Остановите и удалите его.

**Слайд 6: Вопросы?**