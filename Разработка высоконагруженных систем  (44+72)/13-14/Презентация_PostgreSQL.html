<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PostgreSQL: –ú–∞–≥–∏—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π</title>
    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/black.min.css">
    <link rel="stylesheet" href="css/monokai.min.css">
    <link rel="stylesheet" href="css/presentation.css">
    <style>
        .reveal .slides { width: 80% !important; height: 90% !important; transform: scale(1.2) !important; position: absolute !important; left: 50% !important; top: 0% !important; transform: translateX(calc(-50% + 5%)) scale(1.2) !important; transform-origin: top center !important; }
        .reveal h1 { font-size: 1.8em !important; margin-top: 0 !important; margin-bottom: 0.4em !important; }
        .reveal h2 { font-size: 1.4em !important; margin-top: 0 !important; margin-bottom: 0.4em !important; text-transform: none !important; }
        .reveal h3 { font-size: 1.1em !important; margin-top: 0 !important; margin-bottom: 0.3em !important; text-transform: none !important; }
        .reveal .slides section { padding: 15px !important; font-size: 1em !important; }
        .reveal p, .reveal ul, .reveal ol { font-size: 0.9em !important; }
        pre code { font-size: 0.85em; max-height: none; overflow: hidden; }
        pre { max-height: none; overflow: hidden; margin: 10px 0 !important; }
        table { font-size: 0.8em !important; }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
            
            <section data-background-color="#1a1a2e">
                <div style="background: rgba(22,33,62,0.9); padding: 40px; border: 8px solid #0f3460;">
                    <h1 style="color: #FFD700;">üêò PostgreSQL: –ú–∞–≥–∏—è<br>–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π</h1>
                    <h2 style="color: #90EE90;">–¢–µ–æ—Ä–∏—è</h2>
                    <p style="color: #FFF; font-size: 1em;">üè´ –ú–ü–ì–£, 4 –∫—É—Ä—Å, 2025</p>
                </div>
            </section>

            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 1: üöÄ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ PostgreSQL</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <h3 style="color: #3498db;">–ü–æ—á–µ–º—É PostgreSQL ‚Äî –∫–æ—Ä–æ–ª—å —Å—Ä–µ–¥–∏ –°–£–ë–î?</h3>
                        <p style="color: #f39c12; margin-left: 20px;"><strong>üéØ –¢–æ–ø-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</strong></p>
                        <ul style="margin-left: 40px;">
                            <li>‚úÖ <strong style="color: #2ecc71;">ACID-—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</strong> ‚Äî –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∫–∞–∫ –≤ –±–∞–Ω–∫–µ</li>
                            <li>‚úÖ <strong style="color: #2ecc71;">JSONB</strong> ‚Äî NoSQL –≤–Ω—É—Ç—Ä–∏ SQL</li>
                            <li>‚úÖ <strong style="color: #2ecc71;">Full-Text Search</strong> ‚Äî —Å–≤–æ–π –ø–æ–∏—Å–∫–æ–≤–∏–∫ –±–µ–∑ Elasticsearch</li>
                            <li>‚úÖ <strong style="color: #2ecc71;">–†–∞—Å—à–∏—Ä–µ–Ω–∏—è</strong> ‚Äî PostGIS, TimescaleDB, pg_stat_statements</li>
                            <li>‚úÖ <strong style="color: #2ecc71;">–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</strong> ‚Äî –¥–µ–ª–∏–º —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ —á–∞—Å—Ç–∏</li>
                            <li>‚úÖ <strong style="color: #2ecc71;">–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã</strong> ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤—Å–µ —è–¥—Ä–∞ CPU</li>
                        </ul>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px;">
                        <h3 style="color: #e74c3c;">üî• –ß—Ç–æ –∏–∑—É—á–∏–º —Å–µ–≥–æ–¥–Ω—è:</h3>
                        <ul style="margin-left: 40px; font-size: 0.95em;">
                            <li><strong>Views</strong> ‚Äî –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –ª–µ–Ω–∏–≤—ã—Ö</li>
                            <li><strong>Materialized Views</strong> ‚Äî –∫—ç—à –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î</li>
                            <li><strong>Cursors</strong> ‚Äî —á–∏—Ç–∞–µ–º –º–∏–ª–ª–∏–æ–Ω—ã —Å—Ç—Ä–æ–∫ –±–µ–∑ –ø–∞–Ω–∏–∫–∏</li>
                            <li><strong>Procedures & Functions</strong> ‚Äî –ª–æ–≥–∏–∫–∞ –ø—Ä—è–º–æ –≤ –±–∞–∑–µ</li>
                            <li><strong>Custom Types</strong> ‚Äî —Å–æ–∑–¥–∞–µ–º —Å–≤–æ–∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö</li>
                            <li><strong>Rules</strong> ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª–∫–∞—Ö</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section data-background-color="#2c3e50">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 2: üëÅÔ∏è –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Views)</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <h3 style="color: #3498db;">–ß—Ç–æ —Ç–∞–∫–æ–µ View?</h3>
                        <p style="margin-left: 20px;"><strong>View</strong> ‚Äî —ç—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π SQL-–∑–∞–ø—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ —Ç–∞–±–ª–∏—Ü–∞, –Ω–æ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ.</p>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px;">
                        <h3 style="color: #2ecc71;">üí° –ó–∞—á–µ–º –Ω—É–∂–Ω—ã?</h3>
                        <ul style="margin-left: 40px;">
                            <li>üîí <strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</strong>: —Å–∫—Ä—ã–≤–∞–µ–º —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏</li>
                            <li>üé® <strong>–£–ø—Ä–æ—â–µ–Ω–∏–µ</strong>: —Å–ª–æ–∂–Ω—ã–π –∑–∞–ø—Ä–æ—Å ‚Üí –ø—Ä–æ—Å—Ç–∞—è —Ç–∞–±–ª–∏—Ü–∞</li>
                            <li>üîÑ <strong>–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</strong>: –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞–ø–∏—Å–∞–ª ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –≤–µ–∑–¥–µ</li>
                        </ul>
                    </div>
                </div>
                
                <pre class="fragment" style="margin-top: 15px;"><code class="sql">-- –°–æ–∑–¥–∞–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
CREATE VIEW active_students AS
SELECT 
    id,
    name,
    email,
    course_name
FROM students
WHERE status = 'active'
  AND graduation_year >= 2024;

-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–∞–∫ –æ–±—ã—á–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
SELECT * FROM active_students WHERE course_name = 'Python';</code></pre>
                
                <div class="fragment" style="text-align: center; margin-top: 10px;">
                    <p style="color: #f39c12; font-size: 0.9em;"><strong>üé≠ –ú–∞–≥–∏—è:</strong> –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ view –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å!</p>
                </div>
            </section>

            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 3: üëÅÔ∏è Views ‚Äî –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ–∏—à–∫–∏</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <h3 style="color: #3498db;">üîÑ –û–±–Ω–æ–≤–ª—è–µ–º—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è</h3>
                        <pre style="margin-top: 10px;"><code class="sql">-- –ü—Ä–æ—Å—Ç–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å
CREATE VIEW student_emails AS
SELECT id, name, email FROM students;

-- –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ
UPDATE student_emails SET email = 'new@example.com' WHERE id = 1;</code></pre>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px;">
                        <h3 style="color: #e74c3c;">‚ö†Ô∏è –ö–æ–≥–¥–∞ view –ù–ï –æ–±–Ω–æ–≤–ª—è–µ–º—ã–π?</h3>
                        <ul style="margin-left: 40px;">
                            <li>–ï—Å—Ç—å JOIN —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏</li>
                            <li>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è GROUP BY, DISTINCT, UNION</li>
                            <li>–ï—Å—Ç—å –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (COUNT, SUM, AVG)</li>
                        </ul>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px;">
                        <h3 style="color: #2ecc71;">üõ°Ô∏è View –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h3>
                        <pre style="margin-top: 10px;"><code class="sql">-- –°–∫—Ä—ã–≤–∞–µ–º –∑–∞—Ä–ø–ª–∞—Ç—ã –æ—Ç –ª—é–±–æ–ø—ã—Ç–Ω—ã—Ö –≥–ª–∞–∑
CREATE VIEW public_employees AS
SELECT 
    id,
    name,
    position,
    department
    -- salary –ù–ï –≤–∫–ª—é—á–∞–µ–º!
FROM employees;

-- –î–∞–µ–º –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ view
GRANT SELECT ON public_employees TO intern_role;</code></pre>
                    </div>
                </div>
            </section>

            <section data-background-color="#2c3e50">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 4: üíé Materialized Views ‚Äî –ö—ç—à –Ω–∞ —Å—Ç–µ—Ä–æ–∏–¥–∞—Ö</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <h3 style="color: #e74c3c;">–ü—Ä–æ–±–ª–µ–º–∞ –æ–±—ã—á–Ω—ã—Ö Views</h3>
                        <pre style="margin-top: 10px;"><code class="sql">-- –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ö–ê–ñ–î–´–ô –†–ê–ó üò±
CREATE VIEW sales_report AS
SELECT 
    product_id,
    SUM(amount) as total_sales,
    COUNT(*) as order_count
FROM orders
GROUP BY product_id;

-- 1 –º–∏–ª–ª–∏–æ–Ω —Å—Ç—Ä–æ–∫ ‚Üí 5 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å üêå</code></pre>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px;">
                        <h3 style="color: #2ecc71;">–†–µ—à–µ–Ω–∏–µ: Materialized View</h3>
                        <pre style="margin-top: 10px;"><code class="sql">-- –°–æ–∑–¥–∞–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
CREATE MATERIALIZED VIEW sales_report_cached AS
SELECT 
    product_id,
    SUM(amount) as total_sales,
    COUNT(*) as order_count,
    NOW() as last_updated
FROM orders
GROUP BY product_id;

-- –¢–µ–ø–µ—Ä—å –∑–∞–ø—Ä–æ—Å –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–π! ‚ö°
SELECT * FROM sales_report_cached;</code></pre>
                        <p style="color: #f39c12; margin-top: 10px; text-align: center;"><strong>üéØ –†–∞–∑–Ω–∏—Ü–∞:</strong> –î–∞–Ω–Ω—ã–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ –¥–∏—Å–∫–µ!</p>
                    </div>
                </div>
            </section>

            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 5: üíé Materialized Views ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ</h2>
                <div style="display: flex; gap: 20px;">
                    <div style="flex: 1; text-align: left; font-size: 0.7em;">
                        <div class="fragment">
                            <h3 style="color: #3498db;">üîÑ –ö–∞–∫ –æ–±–Ω–æ–≤–ª—è—Ç—å –∫—ç—à?</h3>
                            <pre style="margin-top: 10px;"><code class="sql">-- –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º –≤—Å–µ)
REFRESH MATERIALIZED VIEW sales_report_cached;

-- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —á—Ç–µ–Ω–∏—è)
REFRESH MATERIALIZED VIEW CONCURRENTLY sales_report_cached;</code></pre>
                        </div>
                        
                        <div class="fragment" style="margin-top: 15px;">
                            <h3 style="color: #9b59b6;">‚ö° –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ cron</h3>
                            <pre style="margin-top: 10px;"><code class="sql">-- –°–æ–∑–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
CREATE OR REPLACE FUNCTION refresh_sales_report()
RETURNS void AS $$
BEGIN
    REFRESH MATERIALIZED VIEW CONCURRENTLY sales_report_cached;
END;
$$ LANGUAGE plpgsql;

-- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π —á–∞—Å —á–µ—Ä–µ–∑ pg_cron
SELECT cron.schedule('refresh-sales', '0 * * * *', 
    'SELECT refresh_sales_report()');</code></pre>
                        </div>
                    </div>
                    
                    <div class="fragment" style="flex: 0 0 300px; background: rgba(243,156,18,0.2); padding: 20px; border-radius: 10px; border-left: 5px solid #f39c12; font-size: 0.5em; transform: translateX(-40%);">
                        <h3 style="color: #f39c12; margin-top: 0;">üìä –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?</h3>
                        <ul style="margin-left: 20px; line-height: 1.8;">
                            <li>‚úÖ –¢—è–∂–µ–ª—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã</li>
                            <li>‚úÖ –û—Ç—á–µ—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Ä–∞–∑ –≤ —á–∞—Å/–¥–µ–Ω—å</li>
                            <li>‚úÖ –î–∞—à–±–æ—Ä–¥—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏</li>
                            <li>‚ùå –î–∞–Ω–Ω—ã–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section data-background-color="#2c3e50">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 6: üéØ –ö—É—Ä—Å–æ—Ä—ã (Cursors) ‚Äî –ß–∏—Ç–∞–µ–º Big Data –ø–æ—Ä—Ü–∏—è–º–∏</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <h3 style="color: #e74c3c;">–ü—Ä–æ–±–ª–µ–º–∞: –ú–∏–ª–ª–∏–æ–Ω —Å—Ç—Ä–æ–∫ –≤ –ø–∞–º—è—Ç–∏</h3>
                        <pre style="margin-top: 10px;"><code class="sql">-- –≠—Ç–æ —É–±—å–µ—Ç –≤–∞—à—É –ø–∞–º—è—Ç—å! üíÄ
SELECT * FROM huge_table; -- 10 –º–∏–ª–ª–∏–æ–Ω–æ–≤ —Å—Ç—Ä–æ–∫</code></pre>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px;">
                        <h3 style="color: #2ecc71;">–†–µ—à–µ–Ω–∏–µ: –ö—É—Ä—Å–æ—Ä—ã</h3>
                        <p style="margin-left: 20px;"><strong>–ö—É—Ä—Å–æ—Ä</strong> ‚Äî —ç—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞, –∫–æ—Ç–æ—Ä—ã–π —á–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ—Ä—Ü–∏—è–º–∏.</p>
                        <pre style="margin-top: 10px;"><code class="sql">-- –ù–∞—á–∏–Ω–∞–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
BEGIN;

-- –û–±—ä—è–≤–ª—è–µ–º –∫—É—Ä—Å–æ—Ä
DECLARE student_cursor CURSOR FOR 
    SELECT id, name, email FROM students;

-- –ß–∏—Ç–∞–µ–º –ø–µ—Ä–≤—ã–µ 100 —Å—Ç—Ä–æ–∫
FETCH 100 FROM student_cursor;

-- –ß–∏—Ç–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–µ 100
FETCH 100 FROM student_cursor;

-- –ó–∞–∫—Ä—ã–≤–∞–µ–º –∫—É—Ä—Å–æ—Ä
CLOSE student_cursor;
COMMIT;</code></pre>
                        <p style="color: #f39c12; margin-top: 10px; text-align: center;"><strong>üéØ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:</strong> –ü–∞–º—è—Ç—å –Ω–µ –≤–∑—Ä—ã–≤–∞–µ—Ç—Å—è!</p>
                    </div>
                </div>
            </section>

            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 7: üéØ –ö—É—Ä—Å–æ—Ä—ã ‚Äî –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</h2>
                <div style="display: flex; gap: 20px;">
                    <div style="flex: 1; font-size: 0.65em;">
                        <div class="fragment">
                            <h3 style="color: #3498db;">üîÑ –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫—É—Ä—Å–æ—Ä—É</h3>
                            <pre style="margin-top: 10px;"><code class="sql">BEGIN;
DECLARE my_cursor SCROLL CURSOR FOR SELECT * FROM students;

-- –í–ø–µ—Ä–µ–¥
FETCH NEXT FROM my_cursor;

-- –ù–∞–∑–∞–¥
FETCH PRIOR FROM my_cursor;

-- –ö –ø–µ—Ä–≤–æ–π –∑–∞–ø–∏—Å–∏
FETCH FIRST FROM my_cursor;

-- –ö –ø–æ—Å–ª–µ–¥–Ω–µ–π
FETCH LAST FROM my_cursor;

-- –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å 10 –∑–∞–ø–∏—Å–µ–π
FETCH ABSOLUTE 10 FROM my_cursor;

CLOSE my_cursor;
COMMIT;</code></pre>
                        </div>
                    </div>
                    
                    <div class="fragment" style="flex: 0 0 500px; background: rgba(155,89,182,0.2); padding: 20px; border-radius: 10px; border-left: 5px solid #9b59b6; font-size: 0.5em; transform: translateX(-50%);">
                        <h3 style="color: #9b59b6; margin-top: 0;">üêç –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ Python</h3>
                        <pre style="margin-top: 10px; font-size: 1.16em; max-width: none;"><code class="python">import psycopg2

conn = psycopg2.connect("dbname=mydb")
cur = conn.cursor(name='my_cursor')  
# –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫—É—Ä—Å–æ—Ä
cur.execute("SELECT * FROM huge_table")

# –ß–∏—Ç–∞–µ–º –ø–æ 1000 —Å—Ç—Ä–æ–∫
while True:
    rows = cur.fetchmany(1000)
    if not rows:
        break
    process_batch(rows)  # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ—Ä—Ü–∏—é

cur.close()
conn.close()</code></pre>
                    </div>
                </div>
            </section>

            <section data-background-color="#2c3e50">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 8: ‚öôÔ∏è –•—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã</h2>
                <div style="text-align: left; font-size: 0.65em;">
                    <div class="fragment">
                        <h3 style="color: #3498db;">–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ vs –§—É–Ω–∫—Ü–∏—è</h3>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                            <tr style="background: rgba(52,152,219,0.3);">
                                <th style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ (PROCEDURE)</th>
                                <th style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–§—É–Ω–∫—Ü–∏—è (FUNCTION)</th>
                            </tr>
                            <tr style="background: rgba(46,204,113,0.15);">
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ù–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ</td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ</td>
                            </tr>
                            <tr style="background: rgba(155,89,182,0.15);">
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ú–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å COMMIT</td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ù–µ –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å COMMIT</td>
                            </tr>
                            <tr style="background: rgba(241,196,15,0.15);">
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–í—ã–∑–æ–≤: CALL proc()</td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–í—ã–∑–æ–≤: SELECT func()</td>
                            </tr>
                        </table>
                    </div>
                    
                </div>
            </section>

            <section data-background-color="#2c3e50">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 8a: üéØ –°–æ–∑–¥–∞–µ–º –ø—Ä–æ—Ü–µ–¥—É—Ä—É –¥–ª—è –∑–∞—á–∏—Å–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <pre style="margin-top: 10px; font-size: 0.99em;"><code class="sql">CREATE OR REPLACE PROCEDURE enroll_student(
    p_student_id INT,
    p_course_id INT
)
LANGUAGE sql
AS $$
    -- –ó–∞—á–∏—Å–ª—è–µ–º —Å—Ç—É–¥–µ–Ω—Ç–∞
    INSERT INTO enrollments (student_id, course_id, enrolled_at)
    SELECT p_student_id, p_course_id, NOW()
    WHERE (SELECT count(*) FROM enrollments 
           WHERE course_id = p_course_id) < 30;
$$;
-- –í—ã–∑–æ–≤
CALL enroll_student(123, 456);</code></pre>
                    </div>
                </div>
            </section>

            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 9: üîß –§—É–Ω–∫—Ü–∏–∏ ‚Äî –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
                <div style="display: flex; gap: 20px;">
                    <div style="flex: 1; font-size: 0.65em;">
                        <div class="fragment">
                            <h3 style="color: #3498db;">–ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è</h3>
                            <pre style="margin-top: 10px; font-size: 0.85em;"><code class="sql">CREATE OR REPLACE FUNCTION get_student_gpa(p_student_id INT)
RETURNS NUMERIC
LANGUAGE sql
AS $$
    SELECT COALESCE(AVG(grade), 0)
    FROM grades
    WHERE student_id = p_student_id;
$$;

-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
SELECT name, get_student_gpa(id) as gpa
FROM students;</code></pre>
                        </div>
                    </div>
                    
                    <div class="fragment" style="flex: 0 0 400px; background: rgba(46,204,113,0.2); padding: 20px; border-radius: 10px; border-left: 5px solid #2ecc71; font-size: 0.5em; transform: translateX(-40%);">
                        <h3 style="color: #2ecc71; margin-top: 0;">üìä –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Ç–∞–±–ª–∏—Ü—É</h3>
                        <pre style="margin-top: 10px; font-size: 0.95em;"><code class="sql">CREATE OR REPLACE FUNCTION get_top_students(p_limit INT)
RETURNS TABLE(
    student_id INT,
    student_name TEXT,
    gpa NUMERIC
)
LANGUAGE sql
AS $$
    SELECT 
        s.id,
        s.name,
        AVG(g.grade) as avg_grade
    FROM students s
    JOIN grades g ON s.id = g.student_id
    GROUP BY s.id, s.name
    ORDER BY avg_grade DESC
    LIMIT p_limit;
$$;

-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
SELECT * FROM get_top_students(10);</code></pre>
                    </div>
                </div>
            </section>

            <section data-background-color="#2c3e50">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 10: üîß –§—É–Ω–∫—Ü–∏–∏ ‚Äî SQL vs PL/pgSQL</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <h3 style="color: #3498db;">SQL —Ñ—É–Ω–∫—Ü–∏–∏ (–±—ã—Å—Ç—Ä–µ–µ!)</h3>
                        <pre style="margin-top: 10px;"><code class="sql">-- –ü—Ä–æ—Å—Ç–∞—è SQL —Ñ—É–Ω–∫—Ü–∏—è
CREATE OR REPLACE FUNCTION get_active_count()
RETURNS BIGINT
LANGUAGE sql
AS $$
    SELECT COUNT(*) FROM students WHERE status = 'active';
$$;

-- Inline –≤ –∑–∞–ø—Ä–æ—Å–µ!
SELECT get_active_count();</code></pre>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px;">
                        <h3 style="color: #2ecc71;">üöÄ –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)</h3>
                        <pre style="margin-top: 10px;"><code class="sql">CREATE OR REPLACE FUNCTION calculate_discount(price NUMERIC)
RETURNS NUMERIC
IMMUTABLE  -- –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π
LANGUAGE sql
AS $$
    SELECT price * 0.9;
$$;

-- PostgreSQL –º–æ–∂–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç!
SELECT product_name, calculate_discount(price)
FROM products;</code></pre>
                    </div>
                </div>
            </section>

            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 10a: ‚ö° –¢–∏–ø—ã —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–π</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <p style="color: #3498db; margin-bottom: 15px;"><strong>üí° –ó–∞—á–µ–º –Ω—É–∂–Ω—ã?</strong> PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç—Ç–∏ –º–µ—Ç–∫–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.</p>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                            <tr style="background: rgba(52,152,219,0.3);">
                                <th style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–¢–∏–ø</th>
                                <th style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                <th style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ü—Ä–∏–º–µ—Ä</th>
                            </tr>
                            <tr style="background: rgba(46,204,113,0.15);">
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);"><strong>IMMUTABLE</strong></td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–í—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">calculate_discount(100)</td>
                            </tr>
                            <tr style="background: rgba(155,89,182,0.15);">
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);"><strong>STABLE</strong></td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–û–¥–∏–Ω–∞–∫–æ–≤—ã–π –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–∞</td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">get_current_user()</td>
                            </tr>
                            <tr style="background: rgba(231,76,60,0.15);">
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);"><strong>VOLATILE</strong></td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ú–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)</td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">NOW(), random()</td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="fragment" style="margin-top: 20px;">
                        <h3 style="color: #2ecc71;">üöÄ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h3>
                        <ul style="margin-left: 40px; line-height: 1.8;">
                            <li><strong style="color: #2ecc71;">IMMUTABLE</strong> ‚Äî –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∏–Ω–¥–µ–∫—Å–∞—Ö!</li>
                            <li><strong style="color: #9b59b6;">STABLE</strong> ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏, –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ë–î –∏–ª–∏ —Ç–µ–∫—É—â–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</li>
                            <li><strong style="color: #e74c3c;">VOLATILE</strong> ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–æ–±–æ—á–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏ (INSERT, UPDATE, —Å–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è)</li>
                        </ul>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px; background: rgba(241,196,15,0.2); padding: 15px; border-radius: 10px;">
                        <p style="color: #f39c12; margin: 0;"><strong>‚ö†Ô∏è –í–∞–∂–Ω–æ:</strong> –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –º–µ—Ç–∫–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º! –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ VOLATILE.</p>
                    </div>
                </div>
            </section>

            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 11: üé® –°–æ—Å—Ç–∞–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö</h2>
                <div style="display: flex; gap: 20px;">
                    <div style="flex: 1; text-align: left; font-size: 0.65em;">
                        <div class="fragment">
                            <h3 style="color: #3498db;">–ó–∞—á–µ–º –Ω—É–∂–Ω—ã –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–∏–ø—ã?</h3>
                        <pre style="margin-top: 10px;"><code class="sql">-- –ë—ã–ª–æ: –º–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ üòµ
CREATE FUNCTION create_order(
    p_customer_name TEXT,
    p_customer_email TEXT,
    p_customer_phone TEXT,
    p_product_id INT,
    p_quantity INT
) ...

-- –°—Ç–∞–ª–æ: –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä üòé
CREATE TYPE customer_info AS (
    name TEXT,
    email TEXT,
    phone TEXT
);

CREATE FUNCTION create_order(
    p_customer customer_info,
    p_product_id INT,
    p_quantity INT
) ...</code></pre>
                        </div>
                    </div>
                    
                    <div class="fragment" style="flex: 0 0 450px; background: rgba(46,204,113,0.2); padding: 20px; border-radius: 10px; border-left: 5px solid #2ecc71; font-size: 0.5em; transform: translateX(-40%);">
                        <h3 style="color: #2ecc71;">üèóÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ —Ç–∏–ø–∞</h3>
                        <pre style="margin-top: 10px; font-size: 1.07m;"><code class="sql">-- –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø "–ê–¥—Ä–µ—Å"
CREATE TYPE address AS (
    street TEXT,
    city TEXT,
    postal_code TEXT,
    country TEXT
);

-- –ò—Å–ø–æ–ª—å–∑—É–µ–º –≤ —Ç–∞–±–ª–∏—Ü–µ
CREATE TABLE customers (
    id SERIAL PRIMARY KEY,
    name TEXT,
    home_address address,
    work_address address
);

-- –í—Å—Ç–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
INSERT INTO customers (name, home_address, work_address)
VALUES (
    '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
    ROW('–õ–µ–Ω–∏–Ω–∞ 1', '–ú–æ—Å–∫–≤–∞', '101000', '–†–æ—Å—Å–∏—è')::address,
    ROW('–ü—É—à–∫–∏–Ω–∞ 2', '–ú–æ—Å–∫–≤–∞', '102000', '–†–æ—Å—Å–∏—è')::address
);

-- –î–æ—Å—Ç—É–ø –∫ –ø–æ–ª—è–º
SELECT name, (home_address).city FROM customers;</code></pre>
                    </div>
                </div>
            </section>

            <section data-background-color="#2c3e50">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 12: üìú –ü—Ä–∞–≤–∏–ª–∞ (Rules) ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <h3 style="color: #3498db;">–ß—Ç–æ —Ç–∞–∫–æ–µ Rules?</h3>
                        <p style="margin-left: 20px;"><strong>Rule</strong> ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –ª–µ—Ç—É.</p>
                        <p style="color: #e74c3c; margin-left: 20px;">‚ö†Ô∏è <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> Rules —Å—á–∏—Ç–∞—é—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –≤–º–µ—Å—Ç–æ –Ω–∏—Ö.</p>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px;">
                        <h3 style="color: #2ecc71;">üîÑ –ü—Ä–∏–º–µ—Ä: –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ INSERT</h3>
                        <pre style="margin-top: 10px;"><code class="sql">-- –°–æ–∑–¥–∞–µ–º –∞—Ä—Ö–∏–≤–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
CREATE TABLE students_archive (
    LIKE students INCLUDING ALL
);

-- –°–æ–∑–¥–∞–µ–º –ø—Ä–∞–≤–∏–ª–æ: —Å—Ç–∞—Ä—ã–µ —Å—Ç—É–¥–µ–Ω—Ç—ã ‚Üí –≤ –∞—Ä—Ö–∏–≤
CREATE RULE archive_old_students AS
    ON INSERT TO students
    WHERE NEW.graduation_year < 2020
    DO INSTEAD
        INSERT INTO students_archive VALUES (NEW.*);

-- –¢–µ–ø–µ—Ä—å —Å—Ç–∞—Ä—ã–µ —Å—Ç—É–¥–µ–Ω—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∞—Ä—Ö–∏–≤
INSERT INTO students (name, graduation_year)
VALUES ('–ü–µ—Ç—Ä', 2019);  -- –ü–æ–ø–∞–¥–µ—Ç –≤ students_archive!</code></pre>
                    </div>
                    
                </div>
            </section>

            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 12a: üé≠ –ü—Ä–∞–≤–∏–ª–æ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <p style="color: #3498db; margin-bottom: 15px;"><strong>üìù –ó–∞—á–µ–º?</strong> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–∞–±–ª–∏—Ü–µ students –≤ –ª–æ–≥.</p>
                        <pre style="margin-top: 10px;"><code class="sql">CREATE TABLE students_log (
    operation TEXT,
    student_id INT,
    changed_at TIMESTAMP
);

CREATE RULE log_student_updates AS
    ON UPDATE TO students
    DO ALSO
        INSERT INTO students_log (operation, student_id, changed_at)
        VALUES ('UPDATE', NEW.id, NOW());</code></pre>
                    </div>
                    
                    <div class="fragment" style="margin-top: 20px;">
                        <h3 style="color: #2ecc71;">üöÄ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:</h3>
                        <ul style="margin-left: 40px; line-height: 1.8;">
                            <li><strong>DO ALSO</strong> ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ</li>
                            <li>–ü—Ä–∏ –∫–∞–∂–¥–æ–º UPDATE students –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥</li>
                            <li>–ú–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π</li>
                        </ul>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px; background: rgba(231,76,60,0.2); padding: 15px; border-radius: 10px;">
                        <p style="color: #e74c3c; margin: 0;"><strong>‚ö†Ô∏è –ù–æ:</strong> Rules —É—Å—Ç–∞—Ä–µ–ª–∏! –õ—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Triggers –¥–ª—è —Ç–∞–∫–∏—Ö –∑–∞–¥–∞—á.</p>
                    </div>
                </div>
            </section>

            <section data-background-color="#2c3e50">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 13: üìú Rules vs Triggers</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <h3 style="color: #3498db;">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ</h3>
                        <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
                            <tr style="background: rgba(52,152,219,0.3);">
                                <th style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ê—Å–ø–µ–∫—Ç</th>
                                <th style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">Rules</th>
                                <th style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">Triggers</th>
                            </tr>
                            <tr style="background: rgba(46,204,113,0.15);">
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);"><strong>–ö–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è</strong></td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–î–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞</td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ü–æ—Å–ª–µ/–≤–º–µ—Å—Ç–æ –∑–∞–ø—Ä–æ—Å–∞</td>
                            </tr>
                            <tr style="background: rgba(155,89,182,0.15);">
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);"><strong>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</strong></td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ë—ã—Å—Ç—Ä–µ–µ –¥–ª—è –º–∞—Å—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ú–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –≥–∏–±—á–µ</td>
                            </tr>
                            <tr style="background: rgba(241,196,15,0.15);">
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);"><strong>–ì–∏–±–∫–æ—Å—Ç—å</strong></td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è</td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">–ü–æ–ª–Ω–∞—è (–º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∫–æ–¥)</td>
                            </tr>
                            <tr style="background: rgba(231,76,60,0.15);">
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);"><strong>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</strong></td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">‚ùå –£—Å—Ç–∞—Ä–µ–ª–∏</td>
                                <td style="padding: 10px; border: 2px solid rgba(255,255,255,0.3);">‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö!</td>
                            </tr>
                        </table>
                    </div>
                    
                </div>
            </section>

            <section data-background-color="#2c3e50">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 13a: ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥: –¢—Ä–∏–≥–≥–µ—Ä—ã</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment">
                        <p style="color: #3498db; margin-bottom: 15px;"><strong>üöÄ –ü–æ—á–µ–º—É —Ç—Ä–∏–≥–≥–µ—Ä—ã –ª—É—á—à–µ?</strong> –ë–æ–ª–µ–µ –≥–∏–±–∫–∏–µ, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ.</p>
                        <pre style="margin-top: 10px;"><code class="sql">-- –°–æ–∑–¥–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–∞
CREATE OR REPLACE FUNCTION log_student_changes()
RETURNS TRIGGER AS $$
BEGIN
    INSERT INTO students_log (operation, student_id, changed_at)
    VALUES (TG_OP, NEW.id, NOW());
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- –°–æ–∑–¥–∞–µ–º —Ç—Ä–∏–≥–≥–µ—Ä
CREATE TRIGGER student_changes_trigger
AFTER INSERT OR UPDATE OR DELETE ON students
FOR EACH ROW
EXECUTE FUNCTION log_student_changes();</code></pre>
                    </div>
                    
                    <div class="fragment" style="margin-top: 20px;">
                        <h3 style="color: #2ecc71;">üí° –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</h3>
                        <ul style="margin-left: 40px; line-height: 1.8;">
                            <li><strong>TG_OP</strong> ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è (–∑–Ω–∞—á–µ–Ω–∏—è: INSERT, UPDATE, DELETE)</li>
                            <li><strong>NEW</strong> ‚Äî –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏, <strong>OLD</strong> ‚Äî —Å—Ç–∞—Ä—ã–µ</li>
                            <li><strong>FOR EACH ROW</strong> ‚Äî –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏</li>
                            <li>–ú–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å –ª—é–±—É—é –ª–æ–≥–∏–∫—É –Ω–∞ PL/pgSQL</li>
                        </ul>
                    </div>
                    
                    <div class="fragment" style="margin-top: 15px;">
                        <p style="color: #f39c12; text-align: center; font-size: 1.1em;"><strong>üéØ –í—ã–≤–æ–¥:</strong> –ó–∞–±—É–¥—å—Ç–µ –ø—Ä–æ Rules, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Triggers!</p>
                    </div>
                </div>
            </section>

            <section data-background-color="#16213e">

            <section data-background-color="#1a1a2e">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 14: üéì –í—ã–≤–æ–¥—ã –∏ best practices</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment" style="background: rgba(52,152,219,0.2); padding: 20px; border-radius: 10px; border-left: 5px solid #3498db; margin-bottom: 20px;">
                        <h3 style="color: #3498db; margin-top: 0;">üìö –ß—Ç–æ –º—ã –∏–∑—É—á–∏–ª–∏:</h3>
                        <ul style="line-height: 1.8;">
                            <li>‚úÖ <strong>Views</strong> ‚Äî –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</li>
                            <li>‚úÖ <strong>Materialized Views</strong> ‚Äî –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—è–∂–µ–ª—ã—Ö –æ—Ç—á–µ—Ç–æ–≤</li>
                            <li>‚úÖ <strong>Cursors</strong> ‚Äî –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö</li>
                            <li>‚úÖ <strong>Procedures & Functions</strong> ‚Äî –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –≤ –ë–î</li>
                            <li>‚úÖ <strong>Custom Types</strong> ‚Äî –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö</li>
                            <li>‚úÖ <strong>Rules</strong> ‚Äî —É—Å—Ç–∞—Ä–µ–ª–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Triggers</li>
                        </ul>
                    </div>
                    
                    <div class="fragment" style="margin-top: 20px; text-align: center;">
                        <h3 style="color: #f39c12;">üöÄ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ü—Ä–∞–∫—Ç–∏–∫–∞!</h3>
                        <p style="color: #fff; font-size: 1.1em;">–°–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é –ë–î —Å views, functions –∏ triggers.</p>
                        <p style="color: #FFD700; font-size: 1.2em; margin-top: 20px;">–í–æ–ø—Ä–æ—Å—ã? üôã‚ôÇÔ∏è</p>
                    </div>
                </div>
            </section>

            <section data-background-color="#2c3e50">
                <h2 style="color: #FFD700;">–°–ª–∞–π–¥ 14a: üéØ Best Practices</h2>
                <div style="text-align: left; font-size: 0.7em;">
                    <div class="fragment" style="background: rgba(46,204,113,0.2); padding: 20px; border-radius: 10px; border-left: 5px solid #2ecc71;">
                        <ul style="line-height: 1.8;">
                            <li><strong>Views:</strong> –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</li>
                            <li><strong>Materialized Views:</strong> –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ —á–µ—Ä–µ–∑ cron</li>
                            <li><strong>Cursors:</strong> —Ç–æ–ª—å–∫–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö (>100k —Å—Ç—Ä–æ–∫)</li>
                            <li><strong>Functions:</strong> –ø–æ–º–µ—á–∞–π—Ç–µ IMMUTABLE/STABLE –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</li>
                            <li><strong>Procedures:</strong> –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏</li>
                            <li><strong>Custom Types:</strong> –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∫–æ–¥–∞</li>
                            <li><strong>Rules:</strong> –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ, —Ç–æ–ª—å–∫–æ Triggers!</li>
                        </ul>
                    </div>
                </div>
            </section>

        </div>
    </div>

    <script src="../3-4/js/reveal.min.js"></script>
    <script src="../3-4/js/notes.min.js"></script>
    <script src="../3-4/js/markdown.min.js"></script>
    <script src="../3-4/js/highlight.min.js"></script>
    <script>
        Reveal.initialize({
            hash: true,
            transition: 'slide',
            controls: true,
            progress: true,
            slideNumber: false,
            center: false,
            margin: 0.02,
            plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
        });
    </script>
</body>
</html>
