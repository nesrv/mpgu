# Тематический план курса "Разработка высоконагруженных систем"
## 58 занятий (116 академических часов)

### Раздел 1. Введение в высокие нагрузки (8 занятий)

**Занятие 1-2: Основы высоконагруженных систем**
- Определение высоких нагрузок
- Метрики производительности (RPS, latency, throughput)
- CAP-теорема и ACID

**Занятие 3-4: Профилирование и мониторинг**
- Инструменты профилирования Python (cProfile, py-spy)
- Мониторинг PostgreSQL (pg_stat_statements, pg_stat_activity)
- Практика: настройка базового мониторинга

**Занятие 5-6: Нагрузочное тестирование**
- Инструменты: Apache Bench, wrk, Locust
- Создание тестовых сценариев на Python
- Практика: тестирование простого веб-сервиса

**Занятие 7-8: Архитектурные паттерны**
- Монолит vs микросервисы
- Event-driven архитектура
- Практика: проектирование архитектуры системы

### Раздел 2. PostgreSQL в высоконагруженных проектах (20 занятий)

**Занятие 9-10: Основы оптимизации PostgreSQL**
- Конфигурация PostgreSQL для высоких нагрузок
- Анализ планов выполнения (EXPLAIN ANALYZE)
- Практика: настройка postgresql.conf

**Занятие 11-12: Индексы и их оптимизация**
- Типы индексов (B-tree, Hash, GIN, GiST, BRIN)
- Составные индексы и их порядок
- Практика: создание оптимальных индексов

**Занятие 13-14: Продвинутые индексы**
- Частичные и функциональные индексы
- Индексы для полнотекстового поиска
- Практика: оптимизация поисковых запросов

**Занятие 15-16: Репликация PostgreSQL**
- Streaming replication
- Logical replication
- Практика: настройка master-slave репликации

**Занятие 17-18: Шардинг и партиционирование**
- Горизонтальное и вертикальное партиционирование
- Pg_partman для автоматического партиционирования
- Практика: создание партиционированных таблиц

**Занятие 19-20: Транзакции и блокировки**
- Уровни изоляции транзакций
- Deadlock detection и prevention
- Практика: работа с блокировками

**Занятие 21-22: PL/pgSQL для высоких нагрузок**
- Оптимизация хранимых процедур
- Курсоры и массовые операции
- Практика: создание эффективных функций

**Занятие 23-24: Продвинутый PL/pgSQL**
- Динамический SQL в PL/pgSQL
- Exception handling и логирование
- Практика: создание сложных бизнес-логик

**Занятие 25-26: Connection pooling**
- PgBouncer и Pgpool-II
- Настройка пулов соединений
- Практика: настройка connection pooling

**Занятие 27-28: Кэширование в PostgreSQL**
- Shared buffers и effective_cache_size
- Материализованные представления
- Практика: оптимизация кэширования

### Раздел 3. Python для высоконагруженных сервисов (18 занятий)

**Занятие 29-30: Асинхронное программирование**
- asyncio и async/await
- aiohttp для веб-сервисов
- Практика: создание async веб-сервиса

**Занятие 31-32: Работа с базами данных**
- asyncpg для PostgreSQL
- SQLAlchemy Core vs ORM
- Практика: оптимизация запросов к БД

**Занятие 33-34: FastAPI для высоких нагрузок**
- Создание API с автодокументацией
- Dependency injection и middleware
- Практика: разработка REST API

**Занятие 35-36: Оптимизация Python кода**
- Профилирование и bottleneck analysis
- Использование Cython и NumPy
- Практика: оптимизация критических участков

**Занятие 37-38: Кэширование в Python**
- Redis с aioredis
- Memcached и локальное кэширование
- Практика: реализация многоуровневого кэша

**Занятие 39-40: Очереди задач**
- Celery с Redis/PostgreSQL
- RQ (Redis Queue)
- Практика: создание системы фоновых задач

**Занятие 41-42: Микросервисы на Python**
- Паттерны микросервисной архитектуры
- Service discovery и circuit breaker
- Практика: создание микросервиса

**Занятие 43-44: Контейнеризация**
- Docker для Python приложений
- Docker Compose для многосервисных приложений
- Практика: контейнеризация сервиса

**Занятие 45-46: Тестирование высоконагруженных систем**
- Unit и integration тесты
- Тестирование async кода
- Практика: написание тестов для API

### Раздел 4. Инфраструктура и DevOps (8 занятий)

**Занятие 47-48: Балансировка нагрузки**
- Nginx как reverse proxy
- HAProxy для балансировки
- Практика: настройка load balancer

**Занятие 49-50: Мониторинг и алертинг**
- Prometheus и Grafana
- Логирование с ELK stack
- Практика: настройка мониторинга

**Занятие 51-52: CI/CD для высоконагруженных систем**
- GitLab CI/CD
- Автоматизация тестирования и деплоя
- Практика: создание pipeline

**Занятие 53-54: Отказоустойчивость**
- Circuit breaker pattern
- Graceful degradation
- Практика: реализация отказоустойчивости

### Раздел 5. Практический проект (4 занятия)

**Занятие 55-56: Проектирование системы**
- Архитектура высоконагруженного сервиса
- Выбор технологий и паттернов
- Практика: создание технического задания

**Занятие 57-58: Реализация и оптимизация**
- Разработка MVP системы
- Нагрузочное тестирование и оптимизация
- Практика: презентация проекта

## Практические работы

1. **Настройка PostgreSQL для высоких нагрузок**
2. **Создание оптимальных индексов**
3. **Настройка репликации PostgreSQL**
4. **Разработка async API на FastAPI**
5. **Реализация кэширования с Redis**
6. **Создание системы очередей с Celery**
7. **Контейнеризация приложения**
8. **Настройка мониторинга**
9. **Нагрузочное тестирование**
10. **Итоговый проект: высоконагруженный сервис**

## Технологический стек

- **СУБД**: PostgreSQL 15+
- **Язык программирования**: Python 3.11+
- **Фреймворки**: FastAPI, aiohttp
- **Библиотеки**: asyncpg, SQLAlchemy, aioredis, Celery
- **Инфраструктура**: Docker, Nginx, Redis
- **Мониторинг**: Prometheus, Grafana
- **Тестирование**: pytest, Locust

## Результаты обучения

По завершении курса студенты смогут:
- Проектировать архитектуру высоконагруженных систем
- Оптимизировать PostgreSQL для высоких нагрузок
- Разрабатывать эффективные Python приложения
- Использовать PL/pgSQL для сложной бизнес-логики
- Настраивать инфраструктуру для production
- Проводить нагрузочное тестирование и мониторинг