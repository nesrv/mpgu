<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è: –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ PostgreSQL</title>
<style media="print">
body{font-family:Arial,sans-serif;font-size:12px}.container{box-shadow:none;background:white}.header{background:white!important;color:black!important}.save-btn{display:none!important}.section{page-break-inside:avoid}input,textarea{border:1px solid #ccc;background:white;color:black}.code-block{background:white!important;color:black!important;border:1px solid #ccc}
</style>
<style>
*{margin:0;padding:0;box-sizing:border-box}body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;line-height:1.6;color:#333;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh}.container{max-width:1200px;margin:20px auto;padding:20px;background:white;border-radius:15px;box-shadow:0 10px 30px rgba(0,0,0,0.2)}.header{text-align:center;padding:30px 0;background:linear-gradient(135deg,#005EB8 0%,#003D82 100%);color:white;border-radius:10px;margin-bottom:30px}.header h1{font-size:2.5em;margin-bottom:10px}.student-info{display:grid;grid-template-columns:1fr 1fr 1fr;gap:20px;margin-bottom:30px;padding:20px;background:#f8f9fa;border-radius:10px}.form-group{margin-bottom:20px}.form-group label{display:block;margin-bottom:5px;font-weight:bold;color:#003D82}.form-group input,.form-group textarea{width:100%;padding:12px;border:2px solid #e1e5e9;border-radius:8px;font-size:16px;transition:border-color .3s}.form-group input:focus,.form-group textarea:focus{outline:none;border-color:#005EB8;box-shadow:0 0 0 3px rgba(0,94,184,0.1)}.form-group textarea{min-height:auto;resize:vertical}.section{margin-bottom:40px;padding:25px;background:#fff;border-left:5px solid #005EB8;border-radius:0 10px 10px 0;box-shadow:0 2px 10px rgba(0,0,0,0.1)}.section h2{color:#003D82;margin-bottom:20px;font-size:1.8em}.section h3{color:#005EB8;margin:20px 0 10px 0;font-size:1.3em}.section h4{color:#555;margin:15px 0 10px 0;font-size:1.1em}.code-block{background:#282c34;color:#e2e8f0;padding:20px;border-radius:8px;margin:15px 0;font-family:'Courier New',monospace;overflow-x:auto;white-space:pre;font-size:14px;line-height:1.5}ul{list-style:none;padding-left:0}ul li{padding:8px 0 8px 30px;position:relative}ul li::before{content:'‚ñ∏';position:absolute;left:0;color:#005EB8;font-size:18px;font-weight:bold}.save-btn{background:linear-gradient(135deg,#005EB8,#003D82);color:white;border:none;padding:15px 30px;font-size:18px;border-radius:10px;cursor:pointer;display:block;margin:30px auto;transition:transform .3s}.save-btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,94,184,0.3)}.checkbox-item{margin:15px 0;padding:15px 20px;background:linear-gradient(135deg,#005EB8 0%,#003D82 100%);border-radius:10px;display:flex;align-items:center;transition:transform .2s,box-shadow .2s}.checkbox-item:hover{transform:translateX(5px);box-shadow:0 5px 15px rgba(0,94,184,0.3)}.checkbox-item input[type="checkbox"]{appearance:none;width:24px;height:24px;border:3px solid white;border-radius:6px;margin-right:15px;cursor:pointer;position:relative;background:transparent;transition:all .3s}.checkbox-item input[type="checkbox"]:checked{background:white}.checkbox-item input[type="checkbox"]:checked::after{content:'‚úì';position:absolute;top:-2px;left:4px;font-size:18px;color:#005EB8;font-weight:bold}.checkbox-item label{color:white;font-weight:500;cursor:pointer;user-select:none}table{width:100%;border-collapse:collapse;margin:15px 0}table th,table td{border:1px solid #ddd;padding:12px;text-align:left}table th{background:#005EB8;color:white}table tr:nth-child(even){background:#f8f9fa}@media (max-width:768px){.student-info{grid-template-columns:1fr}}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>üîç –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞</h1>
<h2>–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –≤ PostgreSQL</h2>
<p>PostgreSQL Full-Text Search + FastAPI</p>
</div>

<div class="student-info">
<div class="form-group">
<label for="student-name">–§–ò–û —Å—Ç—É–¥–µ–Ω—Ç–∞:</label>
<input type="text" id="student-name" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
</div>
<div class="form-group">
<label for="group">–ì—Ä—É–ø–ø–∞:</label>
<input type="text" id="group" placeholder="–ò–°–¢-401">
</div>
<div class="form-group">
<label for="date">–î–∞—Ç–∞:</label>
<input type="date" id="date">
</div>
</div>

<div class="section">
<h2>üéØ –¶–µ–ª—å —Ä–∞–±–æ—Ç—ã</h2>
<p>–ò–∑—É—á–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ –≤ PostgreSQL –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–µ—Ö–Ω–∏–∫: –±–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫, fuzzy search, –ø–æ–∏—Å–∫ —Å —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏ –∏ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ.</p>
</div>

<div class="section">
<h2>üìã –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL</h2>
<h3>1.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è</h3>
<div class="code-block">-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏
SELECT cfgname FROM pg_ts_config;

-- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä—É—Å—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å
SET default_text_search_config = 'pg_catalog.russian';
ALTER DATABASE shop SET default_text_search_config = 'pg_catalog.russian';</div>

<h3>1.2. –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ü–∏–∏</h3>
<div class="code-block">SELECT to_tsvector('russian', '–°—ä–µ—à—å –µ—â—ë —ç—Ç–∏—Ö –º—è–≥–∫–∏—Ö —Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏—Ö –±—É–ª–æ–∫');
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: '–±—É–ª–æ–∫':6 '–µ—â':2 '–º—è–≥–∫':4 '—Å—ä–µ—à':1 '—Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫':5 '—ç—Ç':3</div>
<p><strong>–§–æ—Ä–º–∞—Ç:</strong> '–æ—Å–Ω–æ–≤–∞_—Å–ª–æ–≤–∞':–ø–æ–∑–∏—Ü–∏—è_–≤_—Ç–µ–∫—Å—Ç–µ</p>
<ul>
<li><strong>–°—Ç–µ–º–º–∏–Ω–≥</strong> - –ø–æ–∏—Å–∫ –ø–æ –æ—Å–Ω–æ–≤–∞–º —Å–ª–æ–≤</li>
<li><strong>–ü–æ–∑–∏—Ü–∏–∏</strong> - –¥–ª—è —Ñ—Ä–∞–∑–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞</li>
<li><strong>–°—Ç–æ–ø-—Å–ª–æ–≤–∞</strong> - –ø—Ä–µ–¥–ª–æ–≥–∏ —É–¥–∞–ª—è—é—Ç—Å—è</li>
</ul>

<h3>1.3. –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞</h3>
<div class="code-block">CREATE INDEX idx_description ON products 
USING gin(to_tsvector('russian', description));</div>
<div class="checkbox-item">
<input type="checkbox" id="task-setup">
<label for="task-setup">PostgreSQL –Ω–∞—Å—Ç—Ä–æ–µ–Ω</label>
</div>
</div>

<div class="section">
<h2>üî§ –®–∞–≥ 2: –ë–∞–∑–æ–≤—ã–π –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫</h2>
<h3>2.1. –ü—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫</h3>
<div class="code-block">-- –ü–æ–∏—Å–∫ –ø–æ –æ–¥–Ω–æ–º—É —Å–ª–æ–≤—É
SELECT id, name, description FROM products
WHERE to_tsvector('russian', description) @@ to_tsquery('russian', '—É–º–Ω—ã–π');

-- AND: –æ–±–∞ —Å–ª–æ–≤–∞
SELECT id, name, description FROM products
WHERE to_tsvector('russian', description) @@ to_tsquery('russian', '—É–º–Ω & –¥–æ–º');

-- OR: –ª—é–±–æ–µ —Å–ª–æ–≤–æ
SELECT id, name, description FROM products
WHERE to_tsvector('russian', description) @@ to_tsquery('russian', '—É–º–Ω & (–¥–æ–º | —Ç–µ–ª–µ–≤–∏–∑–æ—Ä)');</div>

<h3>2.2. –§—Ä–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫</h3>
<div class="code-block">-- –°–ª–æ–≤–∞ –ø–æ–¥—Ä—è–¥
SELECT id, name, description FROM products
WHERE to_tsvector('russian', description) @@ to_tsquery('russian', '—É–º–Ω <-> —Ç–µ–ª–µ–≤–∏–∑–æ—Ä');

-- –°–ª–æ–≤–∞ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏ –¥–æ 3 –ø–æ–∑–∏—Ü–∏–π
SELECT id, name, description FROM products
WHERE to_tsvector('russian', description) @@ to_tsquery('russian', '—É–º–Ω <3> —Ç–µ–ª–µ–≤–∏–∑–æ—Ä');</div>

<h3>2.3. –†–∞–∑–ª–∏—á–∏—è —Ñ—É–Ω–∫—Ü–∏–π –ø–æ–∏—Å–∫–∞</h3>
<table>
<tr><th>–§—É–Ω–∫—Ü–∏—è</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</th></tr>
<tr><td><strong>plainto_tsquery</strong></td><td>–ë–µ–∑–æ–ø–∞—Å–µ–Ω, –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã</td><td>–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞</td></tr>
<tr><td><strong>to_tsquery</strong></td><td>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã (&, |, !)</td><td>–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</td></tr>
<tr><td><strong>websearch_to_tsquery</strong></td><td>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–≤—ã—á–∫–∏ –∏ –º–∏–Ω—É—Å</td><td>–î–ª—è –≤–µ–±-–ø–æ–∏—Å–∫–∞</td></tr>
</table>
<div class="checkbox-item">
<input type="checkbox" id="task-basic">
<label for="task-basic">–ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω</label>
</div>
</div>

<div class="section">
<h2>üéØ –®–∞–≥ 3: –•—Ä–∞–Ω–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</h2>
<h3>3.1. –§—É–Ω–∫—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞</h3>
<div class="code-block">CREATE OR REPLACE FUNCTION search_products(search_query TEXT)
RETURNS TABLE(id INTEGER, name VARCHAR, description TEXT, price NUMERIC, category VARCHAR)
BEGIN ATOMIC
    SELECT id, name, description, price, category
    FROM products
    WHERE to_tsvector('russian', name || ' ' || description) 
          @@ plainto_tsquery('russian', search_query);
END;

SELECT * FROM search_products('—É–º–Ω—ã–π');</div>

<h3>3.2. –§—É–Ω–∫—Ü–∏—è —Å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ–º</h3>
<div class="code-block">CREATE OR REPLACE FUNCTION search_ranked(search_query TEXT)
RETURNS TABLE(id INTEGER, name VARCHAR, description TEXT, rank REAL)
BEGIN ATOMIC
    SELECT p.id, p.name, p.description,
        ts_rank(to_tsvector('russian', p.name || ' ' || p.description), 
                plainto_tsquery('russian', search_query)) AS rank
    FROM products p
    WHERE to_tsvector('russian', p.name || ' ' || p.description) 
          @@ plainto_tsquery('russian', search_query)
    ORDER BY rank DESC;
END;</div>

<h3>3.3. –§—É–Ω–∫—Ü–∏—è —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π</h3>
<div class="code-block">CREATE OR REPLACE FUNCTION search_highlight(search_query TEXT)
RETURNS TABLE(name VARCHAR, snippet TEXT)
BEGIN ATOMIC
    SELECT p.name,
        ts_headline('russian', p.description, 
                    plainto_tsquery('russian', search_query),
                    'MaxWords=20, MinWords=10') AS snippet
    FROM products p
    WHERE to_tsvector('russian', p.description) 
          @@ plainto_tsquery('russian', search_query);
END;</div>
<div class="checkbox-item">
<input type="checkbox" id="task-functions">
<label for="task-functions">–•—Ä–∞–Ω–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–Ω—ã</label>
</div>
</div>

<div class="section">
<h2>üîß –®–∞–≥ 4: Fuzzy Search</h2>
<h3>4.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pg_trgm</h3>
<div class="code-block">CREATE EXTENSION IF NOT EXISTS pg_trgm;
CREATE INDEX idx_name_trgm ON products USING gin (name gin_trgm_ops);</div>

<h3>4.2. –ü–æ–∏—Å–∫ —Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏</h3>
<div class="code-block">-- –ü–æ–∏—Å–∫ –ø–æ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏
SELECT name, similarity(name, '—è–±–ª–∞–∫–æ') AS sim
FROM products
WHERE name % '—è–±–ª–∞–∫–æ'
ORDER BY sim DESC LIMIT 10;

-- –ü–æ–∏—Å–∫ —Å–ª–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Ç–µ–∫—Å—Ç–∞
SELECT description, word_similarity('—É–º–Ω—ã–π', description) AS sim
FROM products
WHERE '—É–º–Ω—ã–π' <% description
ORDER BY sim DESC;</div>

<h3>4.3. –§—É–Ω–∫—Ü–∏—è fuzzy –ø–æ–∏—Å–∫–∞</h3>
<div class="code-block">CREATE OR REPLACE FUNCTION fuzzy_search(search_term TEXT, threshold REAL DEFAULT 0.3)
RETURNS TABLE(name VARCHAR, description TEXT, similarity REAL)
BEGIN ATOMIC
    SELECT p.name, p.description,
        word_similarity(search_term, p.name || ' ' || p.description) AS sim
    FROM products p
    WHERE word_similarity(search_term, p.name || ' ' || p.description) > threshold
    ORDER BY sim DESC LIMIT 20;
END;

SELECT * FROM fuzzy_search('—É–º–Ω–∞–µ —á–∞—Å—ã', 0.2);</div>
<div class="checkbox-item">
<input type="checkbox" id="task-fuzzy">
<label for="task-fuzzy">Fuzzy search —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω</label>
</div>
</div>

<div class="section">
<h2>üìù –®–∞–≥ 5: –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h2>
<div class="code-block">CREATE OR REPLACE FUNCTION suggest_products(prefix TEXT)
RETURNS TABLE(name VARCHAR, similarity REAL)
BEGIN ATOMIC
    SELECT DISTINCT p.name, similarity(p.name, prefix) AS sim
    FROM products p
    WHERE p.name ILIKE prefix || '%'
    ORDER BY sim DESC, p.name LIMIT 10;
END;

SELECT * FROM suggest_products('—É–º–Ω');</div>
<div class="checkbox-item">
<input type="checkbox" id="task-suggest">
<label for="task-suggest">–ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ</label>
</div>
</div>

<div class="section">
<h2>üîÑ –®–∞–≥ 6: –ü–æ–∏—Å–∫ —Å —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏</h2>
<h3>6.1. –ß–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É —Å–∏–Ω–æ–Ω–∏–º–æ–≤</h3>
<div class="code-block">CREATE TABLE synonyms (word TEXT, synonym TEXT);
INSERT INTO synonyms VALUES
    ('—Ç–µ–ª–µ—Ñ–æ–Ω', '—Å–º–∞—Ä—Ç—Ñ–æ–Ω'),
    ('—Ç–µ–ª–µ—Ñ–æ–Ω', '–º–æ–±–∏–ª—å–Ω—ã–π'),
    ('–Ω–æ—É—Ç–±—É–∫', '–ª—ç–ø—Ç–æ–ø');

CREATE INDEX idx_synonyms ON synonyms(synonym);

WITH search_terms AS (
    SELECT '—Å–º–∞—Ä—Ç—Ñ–æ–Ω' AS term
    UNION
    SELECT word FROM synonyms WHERE synonym = '—Å–º–∞—Ä—Ç—Ñ–æ–Ω'
)
SELECT * FROM products
WHERE name ILIKE ANY(ARRAY(SELECT '%' || term || '%' FROM search_terms));</div>
<div class="checkbox-item">
<input type="checkbox" id="task-synonyms">
<label for="task-synonyms">–ü–æ–∏—Å–∫ —Å —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω</label>
</div>
</div>

<div class="section">
<h2>üöÄ –®–∞–≥ 7: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FastAPI</h2>
<h3>7.1. –ß–µ—Ä–µ–∑ SQL —Ñ—É–Ω–∫—Ü–∏—é</h3>
<div class="code-block">from fastapi import FastAPI, Depends
from sqlalchemy import text
from sqlalchemy.orm import Session

@app.get("/direct-search")
def direct_search(q: str, db: Session = Depends(get_db)):
    rows = db.execute(text("SELECT * FROM search_products(:query)"), {"query": q})
    return {"hits": [dict(row._mapping) for row in rows]}</div>

<h3>7.2. –ß–µ—Ä–µ–∑ SQLAlchemy ORM</h3>
<div class="code-block">from sqlalchemy import func, text

@app.get("/search-ranked")
def search_ranked(q: str, db: Session = Depends(get_db)):
    query_text = Product.name + ' ' + Product.description
    results = db.query(
        Product.id, Product.name, Product.description,
        func.ts_rank(
            func.to_tsvector('russian', query_text),
            func.plainto_tsquery('russian', q)
        ).label('rank')
    ).filter(
        func.to_tsvector('russian', query_text).op('@@')(
            func.plainto_tsquery('russian', q)
        )
    ).order_by(text('rank DESC')).all()
    return {"results": [{"id": r.id, "name": r.name, "rank": float(r.rank)} for r in results]}</div>

<h3>7.3. Fuzzy search</h3>
<div class="code-block">@app.get("/fuzzy-search")
def fuzzy_search(q: str, threshold: float = 0.3, db: Session = Depends(get_db)):
    query_text = Product.name + ' ' + Product.description
    results = db.query(
        Product.name, Product.description,
        func.word_similarity(q, query_text).label('sim')
    ).filter(
        func.word_similarity(q, query_text) > threshold
    ).order_by(text('sim DESC')).limit(20).all()
    return {"results": [{"name": r.name, "similarity": float(r.sim)} for r in results]}</div>
<div class="checkbox-item">
<input type="checkbox" id="task-fastapi">
<label for="task-fastapi">FastAPI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞</label>
</div>
</div>

<div class="section">
<h2>üß™ –®–∞–≥ 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
<h3>8.1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞</h3>
<div class="code-block">uvicorn main:app --reload</div>

<h3>8.2. –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã</h3>
<div class="code-block">### –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫
GET http://localhost:8000/direct-search?q=—É–º–Ω—ã–π

### –ü–æ–∏—Å–∫ —Å —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ–º
GET http://localhost:8000/search-ranked?q=—É–º–Ω—ã–π –¥–æ–º

### Fuzzy search
GET http://localhost:8000/fuzzy-search?q=—É–º–Ω–∞–µ —á–∞—Å—ã&threshold=0.2

### –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
GET http://localhost:8000/suggest?q=—É–º–Ω</div>
<div class="checkbox-item">
<input type="checkbox" id="task-test">
<label for="task-test">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
</div>
</div>

<div class="section">
<h2>üìö –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è</h2>
<p>–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∏—Å–∫–∞:</p>
<ol style="padding-left:30px">
<li><strong>–ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</strong> - suggest_products(prefix)</li>
<li><strong>–†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ</strong> - search_ranked(query) —Å ts_rank()</li>
<li><strong>–ü–æ–¥—Å–≤–µ—Ç–∫–∞</strong> - search_highlight(query) —Å ts_headline()</li>
<li><strong>–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</strong> - search_by_category(query, category)</li>
<li><strong>Fuzzy –ø–æ–∏—Å–∫</strong> - fuzzy_search(term, threshold)</li>
<li><strong>–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π</strong> - combined_search(query) —Å ts_rank + word_similarity</li>
</ol>
</div>

<div class="section">
<h2>üìä –í—ã–≤–æ–¥—ã –ø–æ —Ä–∞–±–æ—Ç–µ</h2>
<div class="form-group">
<label>–ß—Ç–æ –∏–∑—É—á–∏–ª–∏:</label>
<textarea rows="4">–ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏...</textarea>
</div>
<div class="form-group">
<label>–ö–∞–∫–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ–∑–Ω–∏–∫–ª–∏:</label>
<textarea rows="4">–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã...</textarea>
</div>
<div class="form-group">
<label>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</label>
<textarea rows="4">–ì–¥–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?</textarea>
</div>
</div>

<button class="save-btn" onclick="saveToPDF()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PDF</button>
</div>

<script>
if(!sessionStorage.getItem('pg-search-loaded')){localStorage.clear();sessionStorage.setItem('pg-search-loaded','true')}
function loadFromStorage(){document.getElementById('student-name').value=localStorage.getItem('student-name')||'';document.getElementById('group').value=localStorage.getItem('group')||'';document.getElementById('date').value=localStorage.getItem('date')||new Date().toISOString().split('T')[0]}
function saveToStorage(){localStorage.setItem('student-name',document.getElementById('student-name').value);localStorage.setItem('group',document.getElementById('group').value);localStorage.setItem('date',document.getElementById('date').value)}
loadFromStorage();
document.getElementById('student-name').addEventListener('input',saveToStorage);
document.getElementById('group').addEventListener('input',saveToStorage);
document.getElementById('date').addEventListener('change',saveToStorage);
document.querySelectorAll('input[type="checkbox"]').forEach(checkbox=>{if(localStorage.getItem(checkbox.id)==='true')checkbox.checked=true;checkbox.addEventListener('change',()=>{localStorage.setItem(checkbox.id,checkbox.checked)})});
function autoResize(textarea){textarea.style.height='auto';textarea.style.height=textarea.scrollHeight+'px'}
document.querySelectorAll('textarea').forEach((textarea,index)=>{const saved=localStorage.getItem('textarea-'+index);if(saved)textarea.value=saved;textarea.addEventListener('input',function(){autoResize(this);localStorage.setItem('textarea-'+index,textarea.value)});autoResize(textarea)});
function saveToPDF(){const studentName=document.getElementById('student-name').value||'–ù–µ —É–∫–∞–∑–∞–Ω–æ';const group=document.getElementById('group').value||'–ù–µ —É–∫–∞–∑–∞–Ω–æ';const date=document.getElementById('date').value||'–ù–µ —É–∫–∞–∑–∞–Ω–æ';const originalTitle=document.title;document.title=`PostgreSQL_Search_${studentName}_${group}_${date}`;window.print();setTimeout(()=>{document.title=originalTitle},1000)}
</script>
</body>
</html>
