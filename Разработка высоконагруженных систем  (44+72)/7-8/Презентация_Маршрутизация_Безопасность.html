<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FastAPI: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</title>
    <link rel="stylesheet" href="../3-4/css/reveal.min.css">
    <link rel="stylesheet" href="../3-4/css/black.min.css">
    <link rel="stylesheet" href="../3-4/css/monokai.min.css">
    <link rel="stylesheet" href="../3-4/css/presentation.css">
    <style>
        .reveal h1 { font-size: 1.5em !important; margin-top: 0 !important; margin-bottom: 0.3em !important; }
        .reveal h2 { font-size: 1.25em !important; margin-top: 0 !important; margin-bottom: 0.3em !important; text-transform: none !important; }
        .reveal h3 { font-size: 1em !important; margin-top: 0 !important; margin-bottom: 0.3em !important; text-transform: none !important; }
        .reveal .slides section { padding-top: 5px !important; }
        pre code { font-size: 1.1em !important; max-height: 650px; overflow-y: auto; }
        pre { max-height: 650px; overflow-y: auto; }
        .diagram { font-family: 'Courier New', monospace; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides" data-separator="^---$" data-separator-vertical="^--$">
            
            <!-- –°–ª–∞–π–¥ 1: –¢–∏—Ç—É–ª—å–Ω—ã–π -->
            <section data-background-color="#1a1a2e">
                <div style="background: rgba(22,33,62,0.9); padding: 40px; border: 8px solid #0f3460; box-shadow: 0 0 0 4px #16213e;">
                    <h1 style="color: #FFD700; letter-spacing: 3px;">üöÄ FastAPI</h1>
                    <h2 style="color: #90EE90;">–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</h2>
                    <p style="color: #FFF; font-size: 1.2em; margin-top: 30px;">üè´ –ú–ü–ì–£, 2025</p>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 2: –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ -->
            <section>
                <h2>üìã –ß—Ç–æ –º—ã –∏–∑—É—á–∏–º</h2>
                <div style="text-align: left; font-size: 0.9em;">
                    <ul class="fragment">
                        <li>üõ£Ô∏è –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å APIRouter</li>
                        <li>üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏</li>
                        <li>üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (Basic Auth, OAuth2, JWT)</li>
                        <li>üß™ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API</li>
                    </ul>
                    
                    <div class="fragment" style="margin-top: 30px;">
                        <h3 style="color: #2ecc71;">–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º?</h3>
                        <ul>
                            <li>–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ = –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å</li>
                            <li>–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ = –ª–µ–≥–∫–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏</li>
                            <li>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å = –∑–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫</li>
                            <li>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ = —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 3: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å APIRouter -->
            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">üõ£Ô∏è –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å APIRouter</h2>
                <div style="text-align: left; font-size: 0.8em;">
                    <div class="fragment">
                        <h3 style="color: #e74c3c;">‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –º–æ–Ω–æ–ª–∏—Ç–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</h3>
                        <pre><code class="python">from fastapi import FastAPI
app = FastAPI()

@app.get("/users")
def get_users(): ...

@app.get("/products")
def get_products(): ...
# ... 100+ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤</code></pre>
                    </div>
                    
                    <div class="fragment">
                        <h3 style="color: #2ecc71;">‚úÖ –†–µ—à–µ–Ω–∏–µ: –º–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞</h3>
                        <pre><code class="python">from fastapi import FastAPI
from routers import users, products

app = FastAPI()
app.include_router(users.router, prefix="/api/v1")
app.include_router(products.router, prefix="/api/v1")</code></pre>
                    </div>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 3: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ -->
            <section>
                <h2>üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</h2>
                <div class="fragment diagram">
                    <pre>project/
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ routers/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ users.py      # /api/v1/users
‚îÇ   ‚îú‚îÄ‚îÄ products.py   # /api/v1/products
‚îÇ   ‚îî‚îÄ‚îÄ orders.py     # /api/v1/orders
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ user_service.py
‚îÇ   ‚îî‚îÄ‚îÄ product_service.py
‚îî‚îÄ‚îÄ models/
    ‚îú‚îÄ‚îÄ user.py
    ‚îî‚îÄ‚îÄ product.py</pre>
                </div>
                
                <div class="fragment" style="margin-top: 20px;">
                    <h3>–ü—Ä–∏–º–µ—Ä —Ä–æ—É—Ç–µ—Ä–∞:</h3>
                    <pre><code class="python">from fastapi import APIRouter

router = APIRouter(prefix="/users", tags=["users"])

@router.get("/")
async def get_users():
    return await user_service.get_all()

@router.post("/", status_code=201)
async def create_user(user: UserCreate):
    return await user_service.create(user)</code></pre>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 4: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã -->
            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã</h2>
                <div style="text-align: left; font-size: 0.85em;">
                    <div class="fragment">
                        <h3>MVC (Model-View-Controller)</h3>
                        <div style="font-family: 'Courier New', monospace; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px;">
                            <div>User Request ‚Üí Controller ‚Üí Model ‚Üí Database</div>
                            <div style="text-align: center; margin-left: -350px;">‚Üì</div>
                            <div style="text-align: center; margin-left: -200px;">View ‚Üí Response</div>
                        </div>
                    </div>
                    
                    <div class="fragment">
                        <h3>MTV (Model-Template-View) - Django –ø–æ–¥—Ö–æ–¥</h3>
                        <ul style="font-size: 0.9em;">
                            <li><strong>Model</strong> - –¥–∞–Ω–Ω—ã–µ</li>
                            <li><strong>Template</strong> - —à–∞–±–ª–æ–Ω—ã HTML</li>
                            <li><strong>View</strong> - –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏</li>
                        </ul>
                    </div>
                    

                    
                    <div class="fragment">
                        <p><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong></p>
                        <ul>
                            <li>‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏</li>
                            <li>‚úÖ –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
                            <li>‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å</li>
                        </ul>
                    </div>
                </div>
            </section>

            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">üèóÔ∏è Layered Architecture –¥–ª—è FastAPI</h2>
                <p style="font-size: 0.9em; margin-bottom: 10px;">–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è API</p>
                <table style="width: 100%; border-collapse: collapse; margin-top: 15px; margin-bottom: 15px;">
                    <tr style="background: rgba(52,152,219,0.3);">
                        <td style="padding: 15px; border: 2px solid rgba(255,255,255,0.3);">API Layer (Routers)</td>
                        <td style="padding: 15px; border: 2px solid rgba(255,255,255,0.3); width: 250px;">‚Üê HTTP</td>
                    </tr>
                    <tr style="background: rgba(46,204,113,0.3);">
                        <td style="padding: 15px; border: 2px solid rgba(255,255,255,0.3);">Service Layer (Business)</td>
                        <td style="padding: 15px; border: 2px solid rgba(255,255,255,0.3);">‚Üê –õ–æ–≥–∏–∫–∞</td>
                    </tr>
                    <tr style="background: rgba(155,89,182,0.3);">
                        <td style="padding: 15px; border: 2px solid rgba(255,255,255,0.3);">Repository Layer (Data)</td>
                        <td style="padding: 15px; border: 2px solid rgba(255,255,255,0.3);">‚Üê –ë–î</td>
                    </tr>
                    <tr style="background: rgba(243,156,18,0.3);">
                        <td style="padding: 15px; border: 2px solid rgba(255,255,255,0.3);">Database</td>
                        <td style="padding: 15px; border: 2px solid rgba(255,255,255,0.3);">‚Üê –î–∞–Ω–Ω—ã–µ</td>
                    </tr>
                </table>
                <div style="text-align: left; font-size: 0.8em;">
                    <h3 style="color: #2ecc71; margin-bottom: 10px;">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</h3>
                    <ul style="margin: 0;">
                        <li>‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)</li>
                        <li>‚úÖ –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è</li>
                        <li>‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–º–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</li>
                        <li>‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å</li>
                    </ul>
                </div>
            </section>

            <section>
                <section id="slide-5">
                <h2>üîÑ –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å–ª–æ–µ–≤</h2>
                
                <div style="font-size: 0.9em; line-height: 1.4;">
                    <div class="fragment" style="background: rgba(52,152,219,0.3); padding: 8px; margin-bottom: 5px; border-radius: 5px;">
                        <strong style="color: #3498db;">1Ô∏è‚É£ CLIENT</strong> ‚Üí POST /api/users
                    </div>
                    
                    <div style="text-align: center; font-size: 1.2em; color: #FFD700;">‚Üì</div>
                    
                    <div class="fragment" style="background: rgba(52,152,219,0.3); padding: 8px; margin-bottom: 5px; border-radius: 5px;">
                        <strong style="color: #3498db;">2Ô∏è‚É£ API LAYER</strong> ‚Üí –í–∞–ª–∏–¥–∞—Ü–∏—è + –ü—Ä–∞–≤–∞
                    </div>
                    
                    <div style="text-align: center; font-size: 1.2em; color: #FFD700;">‚Üì</div>
                    
                    <div class="fragment" style="background: rgba(46,204,113,0.3); padding: 8px; margin-bottom: 5px; border-radius: 5px;">
                        <strong style="color: #2ecc71;">3Ô∏è‚É£ SERVICE LAYER</strong> ‚Üí –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
                    </div>
                    
                    <div style="text-align: center; font-size: 1.2em; color: #FFD700;">‚Üì</div>
                    
                    <div class="fragment" style="background: rgba(155,89,182,0.3); padding: 8px; margin-bottom: 5px; border-radius: 5px;">
                        <strong style="color: #9b59b6;">4Ô∏è‚É£ REPOSITORY</strong> ‚Üí SQL –∑–∞–ø—Ä–æ—Å—ã
                    </div>
                    
                    <div style="text-align: center; font-size: 1.2em; color: #FFD700;">‚Üì</div>
                    
                    <div class="fragment" style="background: rgba(243,156,18,0.3); padding: 8px; border-radius: 5px;">
                        <strong style="color: #f39c12;">5Ô∏è‚É£ DATABASE</strong> ‚Üí INSERT INTO users
                    </div>
                </div>
            </section>

            <section id="slide-6" data-background-color="#16213e">
                <h2 style="color: #FFD700;">üîô –û–±—Ä–∞—Ç–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö</h2>
                <div class="diagram" style="font-size: 0.9em;">
                    <pre>Database ‚Üí Repository ‚Üí Service ‚Üí Router ‚Üí Client
   ‚Üì           ‚Üì          ‚Üì         ‚Üì        ‚Üì
  User      User DTO   UserOut   JSON    {"id": 1, ...}</pre>
                </div>
            </section>
            </section>

            <!-- –°–ª–∞–π–¥ 8: API Layer -->
            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">1Ô∏è‚É£ API Layer (Router)</h2>
                <pre class="fragment"><code class="python">from fastapi import APIRouter, Depends
from services.user_service import UserService
from schemas.user import UserCreate, UserOut

router = APIRouter(prefix="/users", tags=["users"])

@router.post("/", response_model=UserOut)
async def create_user(
    user_data: UserCreate,
    service: UserService = Depends()
):
    return await service.create_user(user_data)

@router.get("/{user_id}", response_model=UserOut)
async def get_user(
    user_id: int,
    service: UserService = Depends()
):
    return await service.get_user(user_id)</code></pre>
            </section>

            <!-- –°–ª–∞–π–¥ 9: Service Layer -->
            <section>
                <h2>2Ô∏è‚É£ Service Layer (Business Logic)</h2>
                <pre class="fragment"><code class="python">from repositories.user_repository import UserRepository
from utils.security import hash_password

class UserService:
    def __init__(self, repo: UserRepository = Depends()):
        self.repo = repo
    
    async def create_user(self, data: UserCreate):
        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
        if await self.repo.exists_by_email(data.email):
            raise ValueError("Email already exists")
        
        # –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è
        hashed_pwd = hash_password(data.password)
        
        # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
        user = await self.repo.create({
            **data.dict(),
            "password": hashed_pwd
        })
        
        # –û—Ç–ø—Ä–∞–≤–∫–∞ welcome email
        await send_welcome_email(user.email)
        return user</code></pre>
            </section>

            <!-- –°–ª–∞–π–¥ 10: Repository Layer -->
            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">3Ô∏è‚É£ Repository Layer (Data Access)</h2>
                <pre class="fragment"><code class="python">from sqlalchemy.ext.asyncio import AsyncSession
from sqlalchemy import select
from models.user import User

class UserRepository:
    def __init__(self, db: AsyncSession = Depends(get_db)):
        self.db = db
    
    async def create(self, data: dict):
        user = User(**data)
        self.db.add(user)
        await self.db.commit()
        await self.db.refresh(user)
        return user
    
    async def get_by_id(self, user_id: int):
        result = await self.db.execute(
            select(User).where(User.id == user_id)
        )
        return result.scalar_one_or_none()
    
    async def exists_by_email(self, email: str) -> bool:
        result = await self.db.execute(
            select(User).where(User.email == email)
        )
        return result.scalar_one_or_none() is not None</code></pre>
            </section>

            <!-- –°–ª–∞–π–¥ 11: Model Layer -->
            <section>
                <h2>4Ô∏è‚É£ Model Layer (Database)</h2>
                <pre class="fragment"><code class="python">from sqlalchemy import Column, Integer, String, DateTime
from sqlalchemy.sql import func
from database import Base

class User(Base):
    __tablename__ = "users"
    
    id = Column(Integer, primary_key=True, index=True)
    email = Column(String, unique=True, index=True)
    username = Column(String, unique=True)
    password = Column(String)
    created_at = Column(DateTime, server_default=func.now())
    updated_at = Column(DateTime, onupdate=func.now())</code></pre>
            </section>

            <!-- –°–ª–∞–π–¥ 12: –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è - –ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å -->
            <section data-background-color="#c0392b">
                <h2>üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</h2>
                <div style="text-align: left; font-size: 0.85em;">
                    <div class="fragment">
                        <h3>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∞—Ç–∞–∫:</h3>
                        <ul>
                            <li>üî¥ 81% –≤–∑–ª–æ–º–æ–≤ —Å–≤—è–∑–∞–Ω—ã —Å–æ —Å–ª–∞–±—ã–º–∏ –ø–∞—Ä–æ–ª—è–º–∏</li>
                            <li>üî¥ 43% –∫–∏–±–µ—Ä–∞—Ç–∞–∫ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –º–∞–ª—ã–π –±–∏–∑–Ω–µ—Å</li>
                            <li>üî¥ 95% —É—Ç–µ—á–µ–∫ –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ –±—ã–ª–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å</li>
                        </ul>
                    </div>
                    
                    <div class="fragment" style="margin-top: 20px;">
                        <h3>–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Authentication –∏ Authorization:</h3>
                        <div class="diagram">‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AUTHENTICATION (–ö—Ç–æ —Ç—ã?)       ‚îÇ
‚îÇ  ‚úì –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–Ω–∞/–ø–∞—Ä–æ–ª—è       ‚îÇ
‚îÇ  ‚úì –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  AUTHORIZATION (–ß—Ç–æ –º–æ–∂–µ—à—å?)    ‚îÇ
‚îÇ  ‚úì –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞        ‚îÇ
‚îÇ  ‚úì –†–æ–ª–∏ (admin, user)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</div>
                    </div>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 13: –ú–µ—Ç–æ–¥—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ -->
            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">üîë –ú–µ—Ç–æ–¥—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</h2>
                <div style="text-align: left; font-size: 0.75em;">
                    <div class="fragment">
                        <h3>1. HTTP Basic Authentication</h3>
                        <p>–ö–ª–∏–µ–Ω—Ç: Authorization: Basic base64(username:password)</p>
                        <p>‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞ | ‚ùå –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ –±–µ–∑ HTTPS</p>
                    </div>
                    
                    <div class="fragment">
                        <h3>2. Session-Based</h3>
                        <p>–°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é ‚Üí session_id –≤ cookie</p>
                        <p>‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ | ‚ùå –ù–µ –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤</p>
                    </div>
                    
                    <div class="fragment">
                        <h3>3. Token-Based (JWT)</h3>
                        <p>–°–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞–µ—Ç JWT ‚Üí –∫–ª–∏–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ</p>
                        <p>‚úÖ Stateless, –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ | ‚ùå –ù–µ–ª—å–∑—è –æ—Ç–æ–∑–≤–∞—Ç—å</p>
                    </div>
                    
                    <div class="fragment">
                        <h3>4. OAuth 2.0</h3>
                        <p>"–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google" ‚Üí authorization code ‚Üí access token</p>
                        <p>‚úÖ –ù–µ –Ω—É–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ | ‚ùå –°–ª–æ–∂–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è</p>
                    </div>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 14: HTTP Basic Auth -->
            <section>
                <h2>üîê HTTP Basic Auth - –ü—Ä–∏–º–µ—Ä</h2>
                <pre class="fragment"><code class="python">from fastapi import FastAPI, Depends, HTTPException
from fastapi.security import HTTPBasic, HTTPBasicCredentials
import secrets

app = FastAPI()
security = HTTPBasic()

USERS = {"admin": "secret123", "user": "password456"}

def verify_credentials(credentials: HTTPBasicCredentials = Depends(security)):
    username = credentials.username
    password = credentials.password
    
    if username not in USERS:
        raise HTTPException(401, "Incorrect credentials")
    
    if not secrets.compare_digest(password, USERS[username]):
        raise HTTPException(401, "Incorrect credentials")
    
    return username

@app.get("/protected")
def protected(username: str = Depends(verify_credentials)):
    return {"message": f"Hello, {username}!"}</code></pre>
            </section>


            <!-- –°–ª–∞–π–¥ 15: OAuth2 -->
            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">üîÑ OAuth 2.0</h2>
                <div style="text-align: left; font-size: 0.75em;">
                    <div class="fragment">
                        <h3>–†–æ–ª–∏ –≤ OAuth 2.0:</h3>
                        <div class="diagram">Resource Owner (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
        ‚Üì
Client (–í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
        ‚Üì
Authorization Server (Google, GitHub)
        ‚Üì
Resource Server (API —Å –¥–∞–Ω–Ω—ã–º–∏)</div>
                    </div>
                    
                    <div class="fragment">
                        <h3>Authorization Code Flow:</h3>
                        <ol>
                            <li>–†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</li>
                            <li>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ª–æ–≥–∏–Ω–∏—Ç—Å—è –∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø</li>
                            <li>–ü–æ–ª—É—á–∞–µ–º authorization code</li>
                            <li>–û–±–º–µ–Ω–∏–≤–∞–µ–º code –Ω–∞ access token</li>
                            <li>–ò—Å–ø–æ–ª—å–∑—É–µ–º token –¥–ª—è API –∑–∞–ø—Ä–æ—Å–æ–≤</li>
                        </ol>
                    </div>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 16: OAuth2 –≤ FastAPI -->
            <section>
                <h2>OAuth2 –≤ FastAPI</h2>
                <pre class="fragment"><code class="python">from fastapi import FastAPI, Depends
from fastapi.security import OAuth2PasswordBearer, OAuth2PasswordRequestForm

app = FastAPI()
oauth2_scheme = OAuth2PasswordBearer(tokenUrl="token")

@app.post("/token")
async def login(form_data: OAuth2PasswordRequestForm = Depends()):
    user = authenticate_user(form_data.username, form_data.password)
    if not user:
        raise HTTPException(401, "Incorrect credentials")
    
    access_token = create_access_token(data={"sub": user.username})
    return {"access_token": access_token, "token_type": "bearer"}

@app.get("/users/me")
async def read_users_me(token: str = Depends(oauth2_scheme)):
    user = decode_token(token)
    return user</code></pre>
            </section>

            <!-- –°–ª–∞–π–¥ 17: JWT -->
            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">üé´ JWT (JSON Web Token)</h2>
                <div style="text-align: left; font-size: 0.75em;">
                    <div class="fragment">
                        <h3>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ JWT:</h3>
                        <div class="diagram">eyJhbGc...  .  eyJzdWI...  .  SflKxw...
‚îú‚îÄ HEADER ‚îÄ‚î§‚îú‚îÄ PAYLOAD ‚îÄ‚î§‚îú‚îÄ SIGNATURE ‚îÄ‚î§</div>
                    </div>
                    
                    <div class="fragment">
                        <h3>Header:</h3>
                        <pre><code class="json">{"alg": "HS256", "typ": "JWT"}</code></pre>
                    </div>
                    
                    <div class="fragment">
                        <h3>Payload:</h3>
                        <pre><code class="json">{
  "sub": "1234567890",
  "name": "John Doe",
  "exp": 1516242622,
  "role": "admin"
}</code></pre>
                    </div>
                    
                    <div class="fragment">
                        <h3>Signature:</h3>
                        <pre><code>HMACSHA256(
  base64(header) + "." + base64(payload),
  secret_key
)</code></pre>
                    </div>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 18: JWT –≤ FastAPI -->
            <section>
                <h2>JWT –≤ FastAPI</h2>
                <pre class="fragment"><code class="python">from jose import JWTError, jwt
from datetime import datetime, timedelta

SECRET_KEY = "your-secret-key"
ALGORITHM = "HS256"

def create_access_token(data: dict):
    to_encode = data.copy()
    expire = datetime.utcnow() + timedelta(minutes=30)
    to_encode.update({"exp": expire})
    return jwt.encode(to_encode, SECRET_KEY, algorithm=ALGORITHM)

async def get_current_user(token: str = Depends(oauth2_scheme)):
    try:
        payload = jwt.decode(token, SECRET_KEY, algorithms=[ALGORITHM])
        username = payload.get("sub")
        if username is None:
            raise HTTPException(401)
        return username
    except JWTError:
        raise HTTPException(401)</code></pre>
            </section>

            <!-- –°–ª–∞–π–¥ 19: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è RBAC -->
            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">üë• –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (RBAC)</h2>
                <div style="text-align: left; font-size: 0.8em;">
                    <div class="fragment">
                        <h3>Role-Based Access Control:</h3>
                        <pre><code class="python">ROLES = {
    "admin": ["read", "write", "delete", "manage_users"],
    "moderator": ["read", "write", "delete"],
    "user": ["read", "write"],
    "guest": ["read"]
}</code></pre>
                    </div>
                    
                    <div class="fragment">
                        <h3>Dependency –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–∏:</h3>
                        <pre><code class="python">def require_role(required_role: Role):
    def role_checker(current_user: User = Depends(get_current_user)):
        if current_user.role != required_role:
            raise HTTPException(403, "Access denied")
        return current_user
    return role_checker

@app.delete("/posts/{post_id}")
async def delete_post(
    post_id: int,
    user: User = Depends(require_role(Role.MODERATOR))
):
    return {"message": "Post deleted"}</code></pre>
                    </div>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 20: Middleware -->
            <section>
                <h2>üîß Middleware</h2>
                <div style="text-align: left; font-size: 0.8em;">
                    <div class="fragment">
                        <h3>–ß—Ç–æ —Ç–∞–∫–æ–µ Middleware?</h3>
                        <div class="diagram">Request ‚Üí Middleware 1 ‚Üí Middleware 2 ‚Üí Handler
                                              ‚Üì
Response ‚Üê Middleware 1 ‚Üê Middleware 2 ‚Üê Return</div>
                    </div>
                    
                    <div class="fragment">
                        <h3>–ü—Ä–∏–º–µ—Ä: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤</h3>
                        <pre><code class="python">import time

@app.middleware("http")
async def log_requests(request: Request, call_next):
    start_time = time.time()
    
    response = await call_next(request)
    
    process_time = time.time() - start_time
    response.headers["X-Process-Time"] = str(process_time)
    
    return response</code></pre>
                    </div>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 21: CORS -->
            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">üåê CORS</h2>
                <div style="text-align: left; font-size: 0.85em;">
                    <div class="fragment">
                        <h3>–ü—Ä–æ–±–ª–µ–º–∞:</h3>
                        <div class="diagram">Frontend (localhost:3000) ‚Üí Backend (localhost:8000)
                                    ‚Üì
                              ‚ùå CORS Error</div>
                    </div>
                    
                    <div class="fragment">
                        <h3>–†–µ—à–µ–Ω–∏–µ:</h3>
                        <pre><code class="python">from fastapi.middleware.cors import CORSMiddleware

app.add_middleware(
    CORSMiddleware,
    allow_origins=[
        "http://localhost:3000",
        "https://myapp.com"
    ],
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)</code></pre>
                    </div>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 22: Rate Limiting -->
            <section>
                <h2>‚è±Ô∏è Rate Limiting Middleware</h2>
                <pre class="fragment"><code class="python">from collections import defaultdict
import time

request_counts = defaultdict(list)
RATE_LIMIT = 10  # –∑–∞–ø—Ä–æ—Å–æ–≤
TIME_WINDOW = 60  # —Å–µ–∫—É–Ω–¥

@app.middleware("http")
async def rate_limit_middleware(request: Request, call_next):
    client_ip = request.client.host
    current_time = time.time()
    
    # –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    request_counts[client_ip] = [
        req_time for req_time in request_counts[client_ip]
        if current_time - req_time < TIME_WINDOW
    ]
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞
    if len(request_counts[client_ip]) >= RATE_LIMIT:
        raise HTTPException(429, "Too many requests")
    
    request_counts[client_ip].append(current_time)
    return await call_next(request)</code></pre>
            </section>

            <!-- –°–ª–∞–π–¥ 23: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ -->
            <section data-background-color="#16213e">
                <h2 style="color: #FFD700;">üß™ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h2>
                <div style="text-align: left; font-size: 0.8em;">
                    <div class="fragment">
                        <h3>–ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Ç–µ—Å—Ç—ã?</h3>
                        <div class="diagram">–ë–µ–∑ —Ç–µ—Å—Ç–æ–≤:
–ò–∑–º–µ–Ω–∏–ª –∫–æ–¥ ‚Üí –ü—Ä–æ–≤–µ—Ä–∏–ª –≤—Ä—É—á–Ω—É—é ‚Üí 30 –º–∏–Ω—É—Ç

–° —Ç–µ—Å—Ç–∞–º–∏:
–ò–∑–º–µ–Ω–∏–ª –∫–æ–¥ ‚Üí pytest ‚Üí 5 —Å–µ–∫—É–Ω–¥ ‚úÖ</div>
                    </div>
                    
                    <div class="fragment">
                        <h3>–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤:</h3>
                        <ul>
                            <li><strong>Unit Tests</strong> - —Ç–µ—Å—Ç–∏—Ä—É—é—Ç —Ñ—É–Ω–∫—Ü–∏–∏</li>
                            <li><strong>Integration Tests</strong> - –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</li>
                            <li><strong>E2E Tests</strong> - –≤–µ—Å—å flow</li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- –°–ª–∞–π–¥ 24: –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ -->
            <section>
                <h2>–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞</h2>
                <pre class="fragment"><code class="python">from fastapi.testclient import TestClient

client = TestClient(app)

def test_create_user():
    response = client.post(
        "/users",
        json={"username": "test", "email": "test@example.com"}
    )
    assert response.status_code == 201
    data = response.json()
    assert data["username"] == "test"
    assert "id" in data

def test_login():
    response = client.post(
        "/token",
        data={"username": "test", "password": "secret"}
    )
    assert response.status_code == 200
    assert "access_token" in response.json()

def test_protected_endpoint():
    # –ë–µ–∑ —Ç–æ–∫–µ–Ω–∞
    response = client.get("/users/me")
    assert response.status_code == 401</code></pre>
            </section>

            <!-- –°–ª–∞–π–¥ 25: –ó–∞–∫–ª—é—á–µ–Ω–∏–µ -->
            <section data-background-color="#1a1a2e">
                <h2 style="color: #FFD700;">üéØ –ß—Ç–æ –º—ã –∏–∑—É—á–∏–ª–∏</h2>
                <div style="text-align: left; font-size: 0.85em;">
                    <ul class="fragment">
                        <li>‚úÖ <strong>–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è</strong> - APIRouter –¥–ª—è –º–æ–¥—É–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã</li>
                        <li>‚úÖ <strong>–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</strong> - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (API, Service, Repository)</li>
                        <li>‚úÖ <strong>–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</strong> - Basic Auth, OAuth2, JWT</li>
                        <li>‚úÖ <strong>–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è</strong> - RBAC, Permissions</li>
                        <li>‚úÖ <strong>Middleware</strong> - CORS, Rate Limiting, Logging</li>
                        <li>‚úÖ <strong>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</strong> - Unit, Integration, E2E</li>
                    </ul>
                    
                    <div class="fragment" style="margin-top: 30px;">
                        <h3 style="color: #2ecc71;">Best Practices:</h3>
                        <ul>
                            <li>üöÄ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ async/await</li>
                            <li>üîê –í—Å–µ–≥–¥–∞ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ</li>
                            <li>üìä –õ–æ–≥–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã</li>
                            <li>üß™ –ü–æ–∫—Ä—ã–≤–∞–π—Ç–µ –∫–æ–¥ —Ç–µ—Å—Ç–∞–º–∏ (80%+)</li>
                            <li>üîÑ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis)</li>
                            <li>üõ°Ô∏è –ó–∞—â–∏—â–∞–π—Ç–µ—Å—å –æ—Ç –∞—Ç–∞–∫</li>
                        </ul>
                    </div>
                </div>
            </section>

        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="navigation-panel" id="navigationPanel">
        <div class="nav-grid" id="navGrid"></div>
    </div>

    <style>
        .navigation-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            background: rgba(22, 33, 62, 0.95);
            border: 2px solid rgba(255, 215, 0, 0.3);
            padding: 7px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            z-index: 1000;
        }
        
        .nav-grid {
            display: flex;
            flex-wrap: nowrap;
            gap: 2px;
            overflow-x: auto;
        }
        
        .nav-button {
            width: 18px;
            height: 18px;
            background: linear-gradient(135deg, #34495e 0%, #2c3e50 100%);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 3px;
            font-size: 6px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .nav-button:hover {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            transform: scale(1.1);
        }
        
        .nav-button.active {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #000;
        }
    </style>

    <script src="../3-4/js/reveal.min.js"></script>
    <script src="../3-4/js/notes.min.js"></script>
    <script src="../3-4/js/markdown.min.js"></script>
    <script src="../3-4/js/highlight.min.js"></script>
    <script>
        Reveal.initialize({
            hash: true,
            transition: 'slide',
            controls: true,
            progress: true,
            slideNumber: false,
            center: true,
            plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
        });

        function createNavigationButtons() {
            const navGrid = document.getElementById('navGrid');
            for (let i = 1; i <= 26; i++) {
                const button = document.createElement('div');
                button.className = 'nav-button';
                button.textContent = i;
                button.onclick = () => Reveal.slide(i - 1, 0);
                navGrid.appendChild(button);
            }
        }

        function updateActiveButton() {
            const buttons = document.querySelectorAll('.nav-button');
            const currentSlide = Reveal.getIndices().h;
            buttons.forEach((button, index) => {
                button.classList.toggle('active', index === currentSlide);
            });
        }

        Reveal.on('ready', () => {
            createNavigationButtons();
            updateActiveButton();
        });
        
        Reveal.on('slidechanged', updateActiveButton);
    </script>
</body>
</html>
