<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞: –ò–∑—É—á–µ–Ω–∏–µ MongoDB</title>
<style media="print">
        body { font-family: Arial, sans-serif; font-size: 12px; }
        .container { box-shadow: none; background: white; }
        .header { background: white !important; color: black !important; }
        .save-btn { display: none !important; }
        .section { page-break-inside: avoid; }
        input, textarea { border: 1px solid #ccc; background: white; color: black; }
        .code-block { background: white !important; color: black !important; border: 1px solid #ccc; }
    </style>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            margin-top: 20px;
            margin-bottom: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .header {
            text-align: center;
            padding: 30px 0;
            background: linear-gradient(135deg, #00C853 0%, #00796B 100%);
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .student-info {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #00796B;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: #00C853;
            box-shadow: 0 0 0 3px rgba(0, 200, 83, 0.1);
        }

        .form-group textarea {
            min-height: auto;
            resize: vertical;
        }

        .section textarea.code-textarea {
            min-height: 300px;
        }

        .code-textarea {
            font-family: 'Courier New', monospace;
            background: #2d3748;
            color: #e2e8f0;
            white-space: pre;
            tab-size: 4;
        }

        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #fff;
            border-left: 5px solid #00C853;
            border-radius: 0 10px 10px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .section h2 {
            color: #00796B;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .section h3 {
            color: #00C853;
            margin: 20px 0 10px 0;
            font-size: 1.3em;
        }

        .section h4 {
            color: #555;
            margin: 15px 0 10px 0;
            font-size: 1.1em;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            white-space: pre;
            font-size: 14px;
        }

        .code-block .keyword { color: #ff79c6; font-weight: bold; }
        .code-block .string { color: #f1fa8c; }
        .code-block .function { color: #50fa7b; }
        .code-block .class { color: #8be9fd; }
        .code-block .comment { color: #6272a4; font-style: italic; }
        .code-block .number { color: #bd93f9; }

        ul {
            list-style: none;
            padding-left: 0;
        }

        ul li {
            padding: 8px 0 8px 30px;
            position: relative;
        }

        ul li::before {
            content: '‚ñ∏';
            position: absolute;
            left: 0;
            color: #00C853;
            font-size: 18px;
            font-weight: bold;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        table th, table td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        table th {
            background: #00796B;
            color: white;
        }

        table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .save-btn {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 10px;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: transform 0.3s;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.3);
        }

        .checkbox-item {
            margin: 15px 0;
            padding: 15px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            display: flex;
            align-items: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .checkbox-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .checkbox-item input[type="checkbox"] {
            appearance: none;
            width: 24px;
            height: 24px;
            border: 3px solid white;
            border-radius: 6px;
            margin-right: 15px;
            cursor: pointer;
            position: relative;
            background: transparent;
            transition: all 0.3s;
        }

        .checkbox-item input[type="checkbox"]:checked {
            background: white;
        }

        .checkbox-item input[type="checkbox"]:checked::after {
            content: '‚úì';
            position: absolute;
            top: -2px;
            left: 4px;
            font-size: 18px;
            color: #667eea;
            font-weight: bold;
        }

        .checkbox-item label {
            color: white;
            font-weight: 500;
            cursor: pointer;
            user-select: none;
        }

        @media (max-width: 768px) {
            .student-info {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üçÉ –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞</h1>
            <h2>–ò–∑—É—á–µ–Ω–∏–µ MongoDB</h2>
            <p>NoSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º</p>
        </div>

        <div class="student-info">
            <div class="form-group">
                <label for="student-name">–§–ò–û —Å—Ç—É–¥–µ–Ω—Ç–∞:</label>
                <input type="text" id="student-name" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á">
            </div>
            <div class="form-group">
                <label for="group">–ì—Ä—É–ø–ø–∞:</label>
                <input type="text" id="group" placeholder="–ò–°–¢-401">
            </div>
            <div class="form-group">
                <label for="date">–î–∞—Ç–∞:</label>
                <input type="date" id="date">
            </div>
        </div>

        <div class="section">
            <h2>1. üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</h2>
            
            <h3>1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞</h3>
            <div class="code-block">cd LAB-REDIS-MONGO</div>

            <h3>2. –ü–æ–¥–Ω—è—Ç—å MongoDB –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ</h3>
            <p><strong>docker-compose.yml</strong></p>
            <div class="code-block">services:
  mongodb:
    image: mongo:7
    env_file:
      - .env
    ports:
      - "27017:27017"</div>

            <p><strong>.env</strong></p>
            <div class="code-block">MONGO_INITDB_ROOT_USERNAME=student
MONGO_INITDB_ROOT_PASSWORD=password

MONGODB_URL=mongodb://student:password@mongodb:27017/</div>

            <div class="code-block">docker-compose up --build -d</div>

            <h3>3. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É MongoDB Compass</h3>
            
            <h4>–£—Å—Ç–∞–Ω–æ–≤–∫–∞</h4>
            <ul>
                <li>–°–∫–∞—á–∞—Ç—å —Å https://github.com/mongodb-js/compass/releases/download/v1.48.2/mongodb-compass-1.48.2-win32-x64.msi</li>
                <li>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å MongoDB Compass</li>
            </ul>

            <h4>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</h4>
            <p><strong>Connection String:</strong></p>
            <div class="code-block">mongodb://student:password@localhost:27017/</div>
            
            <div class="checkbox-item">
                <input type="checkbox" id="task-quickstart">
                <label for="task-quickstart">–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω</label>
            </div>
        </div>

        <div class="section">
            <h2>2. –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ —Ä–∞–±–æ—Ç–µ –≤ MongoDB Compass</h2>
            
            <h3>üìå –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ</h3>
            <ul>
                <li><strong>–í—ã–±–æ—Ä –ë–î:</strong> –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å ‚Üí –í—ã–±—Ä–∞—Ç—å library (–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É +)</li>
                <li><strong>–í—ã–±–æ—Ä –∫–æ–ª–ª–µ–∫—Ü–∏–∏:</strong> –ö–ª–∏–∫–Ω—É—Ç—å –Ω–∞ authors –∏–ª–∏ books</li>
                <li><strong>–í–∫–ª–∞–¥–∫–∏:</strong>
                    <ul>
                        <li><strong>Documents</strong> ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</li>
                        <li><strong>Aggregations</strong> ‚Äî –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ pipeline –∞–≥—Ä–µ–≥–∞—Ü–∏–∏</li>
                        <li><strong>Schema</strong> ‚Äî –∞–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö</li>
                        <li><strong>Indexes</strong> ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞–º–∏</li>
                    </ul>
                </li>
            </ul>
        </div>

        <div class="section">
            <h2>MongoDB –ë—ã—Å—Ç—Ä–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞</h2>
            
            <h3>–ó–ê–ü–£–°–ö MONGOSH</h3>
            <div class="code-block"><span class="comment">// –ò–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:</span>
mongosh <span class="operator">--username</span> student <span class="operator">--password</span> password

<span class="comment">// –ò–ª–∏ –∏–∑ Docker:</span>
docker-compose exec mongodb mongosh <span class="operator">--username</span> student <span class="operator">--password</span> password</div>

            <h3>–û–°–ù–û–í–ù–´–ï –ö–û–ú–ê–ù–î–´</h3>
            <div class="code-block">show dbs;              <span class="comment">// –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</span>
show collections;      <span class="comment">// –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ —Ç–µ–∫—É—â–µ–π –ë–î</span>
db;                    <span class="comment">// –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –ë–î</span>
help;                  <span class="comment">// –°–ø—Ä–∞–≤–∫–∞</span>
exit;                  <span class="comment">// –í—ã—Ö–æ–¥</span></div>

            <h3>–ü–û–î–ö–õ–Æ–ß–ï–ù–ò–ï</h3>
            <div class="code-block">use library;           <span class="comment">// –í—ã–±—Ä–∞—Ç—å/—Å–æ–∑–¥–∞—Ç—å –ë–î</span></div>

            <h3>CREATE (–°–æ–∑–¥–∞–Ω–∏–µ)</h3>
            <div class="code-block">db.authors.<span class="function">insertOne</span>({<span class="string">name</span>: <span class="string">"–¢–æ–ª—Å—Ç–æ–π"</span>, <span class="string">birthYear</span>: <span class="number">1828</span>});
db.authors.<span class="function">insertMany</span>([
  {<span class="string">name</span>: <span class="string">"–¢–æ–ª—Å—Ç–æ–π"</span>, <span class="string">birthYear</span>: <span class="number">1828</span>},
  {<span class="string">name</span>: <span class="string">"–î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π"</span>, <span class="string">birthYear</span>: <span class="number">1821</span>}
]);</div>

            <h3>READ (–ß—Ç–µ–Ω–∏–µ)</h3>
            <div class="code-block">db.authors.<span class="function">find</span>();                              <span class="comment">// –í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã</span>
db.authors.<span class="function">findOne</span>({<span class="string">name</span>: <span class="string">"–¢–æ–ª—Å—Ç–æ–π"</span>});          <span class="comment">// –û–¥–∏–Ω –¥–æ–∫—É–º–µ–Ω—Ç</span>
db.books.<span class="function">find</span>({<span class="string">pages</span>: {<span class="operator">$gt</span>: <span class="number">500</span>}});             <span class="comment">// –ë–æ–ª—å—à–µ 500 —Å—Ç—Ä–∞–Ω–∏—Ü</span>
db.books.<span class="function">find</span>({<span class="string">genre</span>: <span class="string">"—Ä–æ–º–∞–Ω"</span>}).<span class="function">limit</span>(<span class="number">5</span>);       <span class="comment">// –ü–µ—Ä–≤—ã–µ 5</span></div>

            <h3>UPDATE (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ)</h3>
            <div class="code-block">db.authors.<span class="function">updateOne</span>(
  {<span class="string">name</span>: <span class="string">"–¢–æ–ª—Å—Ç–æ–π"</span>},                  <span class="comment">// –§–∏–ª—å—Ç—Ä</span>
  {<span class="operator">$set</span>: {<span class="string">country</span>: <span class="string">"–†–æ—Å—Å–∏—è"</span>}}         <span class="comment">// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ</span>
);
db.books.<span class="function">updateMany</span>(
  {<span class="string">genre</span>: <span class="string">"—Ä–æ–º–∞–Ω"</span>},
  {<span class="operator">$set</span>: {<span class="string">category</span>: <span class="string">"–∫–ª–∞—Å—Å–∏–∫–∞"</span>}}
);</div>

            <h3>DELETE (–£–¥–∞–ª–µ–Ω–∏–µ)</h3>
            <div class="code-block">db.authors.<span class="function">deleteOne</span>({<span class="string">name</span>: <span class="string">"–¢–æ–ª—Å—Ç–æ–π"</span>});
db.books.<span class="function">deleteMany</span>({<span class="string">pages</span>: {<span class="operator">$lt</span>: <span class="number">100</span>}});</div>

            <h3>–û–ü–ï–†–ê–¢–û–†–´ –ó–ê–ü–†–û–°–û–í</h3>
            <div class="code-block">{<span class="string">price</span>: {<span class="operator">$gt</span>: <span class="number">1000</span>}}    <span class="comment">// –ë–æ–ª—å—à–µ</span>
{<span class="string">price</span>: {<span class="operator">$gte</span>: <span class="number">1000</span>}}   <span class="comment">// –ë–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ</span>
{<span class="string">price</span>: {<span class="operator">$lt</span>: <span class="number">1000</span>}}    <span class="comment">// –ú–µ–Ω—å—à–µ</span>
{<span class="string">price</span>: {<span class="operator">$lte</span>: <span class="number">1000</span>}}   <span class="comment">// –ú–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ</span>
{<span class="string">price</span>: {<span class="operator">$ne</span>: <span class="number">1000</span>}}    <span class="comment">// –ù–µ —Ä–∞–≤–Ω–æ</span>

<span class="comment">// –õ–æ–≥–∏—á–µ—Å–∫–∏–µ</span>
{<span class="operator">$and</span>: [{<span class="string">pages</span>: {<span class="operator">$gt</span>: <span class="number">500</span>}}, {<span class="string">genre</span>: <span class="string">"—Ä–æ–º–∞–Ω"</span>}]}
{<span class="operator">$or</span>: [{<span class="string">genre</span>: <span class="string">"—Ä–æ–º–∞–Ω"</span>}, {<span class="string">genre</span>: <span class="string">"–ø–æ–≤–µ—Å—Ç—å"</span>}]}

<span class="comment">// –ú–∞—Å—Å–∏–≤—ã</span>
{<span class="string">tags</span>: {<span class="operator">$in</span>: [<span class="string">"–∫–ª–∞—Å—Å–∏–∫–∞"</span>, <span class="string">"—Ä–æ–º–∞–Ω"</span>]}}      <span class="comment">// –ï—Å—Ç—å –≤ –º–∞—Å—Å–∏–≤–µ</span>
{<span class="string">tags</span>: {<span class="operator">$nin</span>: [<span class="string">"—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"</span>]}}            <span class="comment">// –ù–µ—Ç –≤ –º–∞—Å—Å–∏–≤–µ</span></div>
        </div>

        <div class="section">
            <h2>–ê–ì–†–ï–ì–ê–¶–ò–Ø</h2>
            
            <h3>–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞</h3>
            <div class="code-block">db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$group</span>: {
      <span class="string">_id</span>: <span class="string">"$genre"</span>,              <span class="comment">// –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ –∂–∞–Ω—Ä—É</span>
      <span class="string">count</span>: {<span class="operator">$sum</span>: <span class="number">1</span>},           <span class="comment">// –ü–æ–¥—Å—á–µ—Ç</span>
      <span class="string">avgPages</span>: {<span class="operator">$avg</span>: <span class="string">"$pages"</span>}  <span class="comment">// –°—Ä–µ–¥–Ω–µ–µ</span>
    }
  }
]);</div>

            <h3>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –ª–∏–º–∏—Ç</h3>
            <div class="code-block">db.books.<span class="function">aggregate</span>([
  {<span class="operator">$sort</span>: {<span class="string">pages</span>: <span class="number">-1</span>}},  <span class="comment">// -1 = —É–±—ã–≤–∞–Ω–∏–µ, 1 = –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ</span>
  {<span class="operator">$limit</span>: <span class="number">5</span>}
]);</div>

            <h3>–ü—Ä–æ–µ–∫—Ü–∏—è (–≤—ã–±–æ—Ä –ø–æ–ª–µ–π)</h3>
            <div class="code-block">db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$project</span>: {
      <span class="string">title</span>: <span class="number">1</span>,                    <span class="comment">// –í–∫–ª—é—á–∏—Ç—å</span>
      <span class="string">authorName</span>: <span class="string">"$author.name"</span>,  <span class="comment">// –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å</span>
      <span class="string">_id</span>: <span class="number">0</span>                       <span class="comment">// –ò—Å–∫–ª—é—á–∏—Ç—å</span>
    }
  }
]);</div>

            <h3>Lookup (JOIN)</h3>
            <div class="code-block">db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"authors"</span>,        <span class="comment">// –ò–∑ –∫–∞–∫–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏</span>
      <span class="string">localField</span>: <span class="string">"authorId"</span>, <span class="comment">// –ü–æ–ª–µ –≤ books</span>
      <span class="string">foreignField</span>: <span class="string">"_id"</span>,    <span class="comment">// –ü–æ–ª–µ –≤ authors</span>
      <span class="string">as</span>: <span class="string">"author"</span>            <span class="comment">// –ò–º—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è</span>
    }
  },
  {<span class="operator">$unwind</span>: <span class="string">"$author"</span>}  <span class="comment">// –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ –≤ –æ–±—ä–µ–∫—Ç</span>
]);</div>

            <h3>–ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´</h3>
            <div class="code-block">db.books.<span class="function">countDocuments</span>({<span class="string">genre</span>: <span class="string">"—Ä–æ–º–∞–Ω"</span>});  <span class="comment">// –ü–æ–¥—Å—á–µ—Ç</span>
db.books.<span class="function">distinct</span>(<span class="string">"genre"</span>);                 <span class="comment">// –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è</span>
show collections;                           <span class="comment">// –°–ø–∏—Å–æ–∫ –∫–æ–ª–ª–µ–∫—Ü–∏–π</span>
db.books.<span class="function">drop</span>();                            <span class="comment">// –£–¥–∞–ª–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é</span></div>
            
            <div class="checkbox-item">
                <input type="checkbox" id="task-cheatsheet">
                <label for="task-cheatsheet">MongoDB —à–ø–∞—Ä–≥–∞–ª–∫–∞ –∏–∑—É—á–µ–Ω–∞</label>
            </div>
        </div>

        <div class="section">
            <h2>3. –†–∞–±–æ—Ç–∞ –≤ MONGODB COMPASS (GUI)</h2>
            
            <h3>CREATE (–°–æ–∑–¥–∞–Ω–∏–µ)</h3>
            <ul>
                <li>–í—ã–±—Ä–∞—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é (–Ω–∞–ø—Ä–∏–º–µ—Ä, authors)</li>
                <li>–ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É <strong>INSERT DOCUMENT</strong></li>
                <li>–í–≤–µ—Å—Ç–∏ JSON:</li>
            </ul>
            <div class="code-block">{<span class="string">"name"</span>: <span class="string">"–¢–æ–ª—Å—Ç–æ–π"</span>, <span class="string">"birthYear"</span>: <span class="number">1828</span>, <span class="string">"country"</span>: <span class="string">"–†–æ—Å—Å–∏—è"</span>}
{<span class="string">"name"</span>: <span class="string">"–ü—É—à–∫–∏–Ω"</span>, <span class="string">"birthYear"</span>: <span class="number">1799</span>, <span class="string">"country"</span>: <span class="string">"–†–æ—Å—Å–∏—è"</span>}</div>
            <ul>
                <li>–ù–∞–∂–∞—Ç—å <strong>INSERT</strong></li>
            </ul>

            <h3>READ (–ß—Ç–µ–Ω–∏–µ)</h3>
            <ul>
                <li>–û—Ç–∫—Ä—ã—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é</li>
                <li>–í –ø–æ–ª–µ <strong>Filter</strong> –≤–≤–µ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å:</li>
            </ul>
            
            <p><strong>–ù–∞–π—Ç–∏ –ø–æ –¥—Ä:</strong></p>
            <div class="code-block">{<span class="string">"birthYear"</span>: <span class="string">"1928"</span>}</div>
            
            <p><strong>–° 1800 –≥–æ–¥–∞:</strong></p>
            <div class="code-block">{<span class="string">"birthYear"</span>: {<span class="string">"$gt"</span>: <span class="number">1800</span>}}
{<span class="string">"pages"</span>: {<span class="string">"$gt"</span>: <span class="number">500</span>}}</div>
            
            <p><strong>–° 1799 –≥–æ–¥–∞:</strong></p>
            <div class="code-block">{<span class="string">"publishedYear"</span>: {<span class="string">"$gte"</span>: <span class="number">1900</span>}}</div>
            
            <ul>
                <li>–ù–∞–∂–∞—Ç—å <strong>FIND</strong></li>
            </ul>

            <h3>UPDATE (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ)</h3>
            <ul>
                <li>–ù–∞–π—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç —á–µ—Ä–µ–∑ Filter</li>
                <li>–ù–∞–≤–µ—Å—Ç–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç ‚Üí –Ω–∞–∂–∞—Ç—å –∏–∫–æ–Ω–∫—É –∫–∞—Ä–∞–Ω–¥–∞—à–∞ ‚úèÔ∏è (Edit)</li>
                <li>–ò–∑–º–µ–Ω–∏—Ç—å –ø–æ–ª—è –≤ JSON</li>
                <li>–ù–∞–∂–∞—Ç—å <strong>UPDATE</strong></li>
            </ul>

            <h3>DELETE (–£–¥–∞–ª–µ–Ω–∏–µ)</h3>
            <ul>
                <li>–ù–∞–π—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç</li>
                <li>–ù–∞–≤–µ—Å—Ç–∏ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç ‚Üí –Ω–∞–∂–∞—Ç—å –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã üóëÔ∏è (Delete)</li>
                <li>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ</li>
            </ul>

            <h3>AGGREGATIONS (–ê–≥—Ä–µ–≥–∞—Ü–∏—è)</h3>
            <ul>
                <li>–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É <strong>Aggregations</strong></li>
                <li>–î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞–¥–∏–∏ pipeline:
                    <ul>
                        <li><strong>Stage 1:</strong> {<span class="string">"$match"</span>: {<span class="string">"genre"</span>: <span class="string">"—Ä–æ–º–∞–Ω"</span>}}</li>
                        <li><strong>Stage 2:</strong> {<span class="string">"$sort"</span>: {<span class="string">"pages"</span>: <span class="number">-1</span>}}</li>
                        <li><strong>Stage 3:</strong> {<span class="string">"$limit"</span>: <span class="number">5</span>}</li>
                    </ul>
                </li>
                <li>–ù–∞–∂–∞—Ç—å <strong>RUN</strong> –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞</li>
            </ul>

            <h3>INDEXES (–ò–Ω–¥–µ–∫—Å—ã)</h3>
            <ul>
                <li>–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É <strong>Indexes</strong></li>
                <li>–ù–∞–∂–∞—Ç—å <strong>CREATE INDEX</strong></li>
                <li>–£–∫–∞–∑–∞—Ç—å –ø–æ–ª—è: {<span class="string">"name"</span>: <span class="number">1</span>} (1 = –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏–µ, -1 = —É–±—ã–≤–∞–Ω–∏–µ)</li>
                <li>–î–∞—Ç—å –∏–º—è –∏–Ω–¥–µ–∫—Å—É</li>
                <li>–ù–∞–∂–∞—Ç—å <strong>CREATE</strong></li>
            </ul>

            <h3>SCHEMA (–°—Ö–µ–º–∞)</h3>
            <ul>
                <li>–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫—É <strong>Schema</strong></li>
                <li>–ù–∞–∂–∞—Ç—å <strong>ANALYZE SCHEMA</strong></li>
                <li>–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π</li>
            </ul>

            <h3>EXPORT/IMPORT</h3>
            
            <p><strong>Export:</strong></p>
            <ul>
                <li>Collection ‚Üí <strong>Export Collection</strong></li>
                <li>–í—ã–±—Ä–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç (JSON/CSV)</li>
                <li>–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª</li>
            </ul>
            
            <p><strong>Import:</strong></p>
            <ul>
                <li>Collection ‚Üí <strong>Import Data</strong></li>
                <li>–í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª</li>
                <li>–ù–∞–∂–∞—Ç—å <strong>IMPORT</strong></li>
            </ul>
            
            <div class="checkbox-item">
                <input type="checkbox" id="task-compass">
                <label for="task-compass">–†–∞–±–æ—Ç–∞ –≤ MongoDB Compass –æ—Å–≤–æ–µ–Ω–∞</label>
            </div>
        </div>

        <div class="section">
            <h2>4. –ü–æ–¥–Ω—è—Ç—å FastAPI-—Å–µ—Ä–≤–µ—Ä</h2>
            <div class="code-block"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI
<span class="keyword">from</span> pymongo <span class="keyword">import</span> MongoClient
<span class="keyword">import</span> uvicorn

app = FastAPI()

<span class="comment"># –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MongoDB</span>
client = MongoClient(<span class="string">"mongodb://student:password@localhost:27017/"</span>)
db = client.testdb

<span class="decorator">@app.get</span>(<span class="string">"/"</span>)
<span class="keyword">def</span> <span class="function">root</span>():
    <span class="keyword">return</span> {<span class="string">"message"</span>: <span class="string">"MongoDB FastAPI Server"</span>}

<span class="decorator">@app.get</span>(<span class="string">"/ping"</span>)
<span class="keyword">def</span> <span class="function">ping_mongodb</span>():
    <span class="keyword">try</span>:
        client.admin.command(<span class="string">'ping'</span>)
        <span class="keyword">return</span> {<span class="string">"status"</span>: <span class="string">"success"</span>, <span class="string">"message"</span>: <span class="string">"MongoDB connected"</span>}
    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
        <span class="keyword">return</span> {<span class="string">"status"</span>: <span class="string">"error"</span>, <span class="string">"message"</span>: str(e)}

<span class="decorator">@app.get</span>(<span class="string">"/collections"</span>)
<span class="keyword">def</span> <span class="function">list_collections</span>():
    collections = db.list_collection_names()
    <span class="keyword">return</span> {<span class="string">"collections"</span>: collections}

<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    uvicorn.run(app, host=<span class="string">"127.0.0.1"</span>, port=<span class="number">8000</span>)</div>
            
            <div class="checkbox-item">
                <input type="checkbox" id="task-fastapi">
                <label for="task-fastapi">FastAPI-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω</label>
            </div>
        </div>

        <div class="section">
            <h2>5. –ù–∞–∫–∞—Ç–∏—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—É</h2>
            <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª <strong>library.js</strong> –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö</p>
            
            <div class="checkbox-item">
                <input type="checkbox" id="task-fixture">
                <label for="task-fixture">–§–∏–∫—Å—Ç—É—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞</label>
            </div>
        </div>

        <div class="section">
            <h2>6. –û—Ç—Ä–∞–±–æ—Ç–∞—Ç—å CRUDs</h2>
            
            <h3>–ú–æ–¥–µ–ª–∏</h3>
            <div class="code-block"><span class="keyword">from</span> pymongo <span class="keyword">import</span> MongoClient
<span class="keyword">from</span> bson <span class="keyword">import</span> ObjectId
<span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel

<span class="keyword">class</span> <span class="class">Author</span>(BaseModel):
    name: str
    birthYear: int
    country: str

<span class="keyword">class</span> <span class="class">Book</span>(BaseModel):
    title: str
    authorId: str
    pages: int
    publishedYear: int
    genre: str

<span class="keyword">class</span> <span class="class">Review</span>(BaseModel):
    bookId: str
    rating: int
    comment: str
    reviewerName: str</div>

            <h3>CRUD –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤</h3>
            <div class="code-block"><span class="decorator">@app.get</span>(<span class="string">"/authors"</span>)
<span class="keyword">def</span> <span class="function">get_authors</span>():
    <span class="comment"># –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö –∞–≤—Ç–æ—Ä–æ–≤ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏</span>
    authors = list(db.authors.find())
    <span class="comment"># –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å ObjectId –≤ —Å—Ç—Ä–æ–∫—É –¥–ª—è JSON</span>
    <span class="keyword">for</span> author <span class="keyword">in</span> authors:
        author[<span class="string">"_id"</span>] = str(author[<span class="string">"_id"</span>])
    <span class="keyword">return</span> authors

<span class="decorator">@app.post</span>(<span class="string">"/authors"</span>)
<span class="keyword">def</span> <span class="function">create_author</span>(author: Author):
    <span class="comment"># –í—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤–æ–≥–æ –∞–≤—Ç–æ—Ä–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é</span>
    result = db.authors.insert_one(author.dict())
    <span class="keyword">return</span> {<span class="string">"id"</span>: str(result.inserted_id)}

<span class="decorator">@app.get</span>(<span class="string">"/authors/{author_id}"</span>)
<span class="keyword">def</span> <span class="function">get_author</span>(author_id: str):
    <span class="comment"># –ù–∞–π—Ç–∏ –∞–≤—Ç–æ—Ä–∞ –ø–æ ID</span>
    <span class="keyword">try</span>:
        author = db.authors.find_one({<span class="string">"_id"</span>: ObjectId(author_id)})
    <span class="keyword">except</span>:
        <span class="keyword">raise</span> HTTPException(status_code=<span class="number">400</span>, detail=<span class="string">"Invalid ObjectId format"</span>)
    <span class="keyword">if not</span> author:
        <span class="keyword">raise</span> HTTPException(status_code=<span class="number">404</span>, detail=<span class="string">"Author not found"</span>)
    author[<span class="string">"_id"</span>] = str(author[<span class="string">"_id"</span>])
    <span class="keyword">return</span> author</div>
            
            <div class="checkbox-item">
                <input type="checkbox" id="task-crud">
                <label for="task-crud">CRUD –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω</label>
            </div>

        </div>

        <div class="section">
            <h2>üìù –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞: CRUD –¥–ª—è –∫–Ω–∏–≥ –∏ –æ—Ç–∑—ã–≤–æ–≤</h2>
            <p>–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å CRUD –¥–ª—è –∞–≤—Ç–æ—Ä–æ–≤:</p>
            
            <h3>CRUD –¥–ª—è –∫–Ω–∏–≥</h3>
            <div class="form-group">
                <label>–í–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:</label>
                <textarea class="code-textarea">@app.get("/books")
def get_books():
    # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–Ω–∏–≥–∏
    ...
    return books

@app.post("/books")
def create_book(book: Book):
    # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å authorId –∏–∑ —Å—Ç—Ä–æ–∫–∏ –≤ ObjectId
    ...
    # –í—Å—Ç–∞–≤–∏—Ç—å –∫–Ω–∏–≥—É –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é
    ...
    return {"id": str(result.inserted_id)}

@app.get("/books/{book_id}")
def get_book(book_id: str):
    # –ù–∞–π—Ç–∏ –∫–Ω–∏–≥—É –ø–æ ID
    ...
    return book
</textarea>
            </div>

            <h3>CRUD –¥–ª—è –æ—Ç–∑—ã–≤–æ–≤</h3>
            <div class="form-group">
                <label>–í–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:</label>
                <textarea class="code-textarea">@app.get("/reviews")
def get_reviews():
    ...
    return reviews

@app.post("/reviews")
def create_review(review: Review):
    ...
    return {"id": str(result.inserted_id)}

@app.get("/reviews/book/{book_id}")
def get_book_reviews(book_id: str):
    ...
    return reviews
</textarea>
            </div>



            <h3>–ê–≥—Ä–µ–≥–∞—Ü–∏—è: –∫–Ω–∏–≥–∏ —Å –∞–≤—Ç–æ—Ä–∞–º–∏</h3>
            <div class="code-block"><span class="decorator">@app.get</span>(<span class="string">"/books-with-authors"</span>)
<span class="keyword">def</span> <span class="function">get_books_with_authors</span>():
    <span class="comment"># Pipeline –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏</span>
    pipeline = [
        {
            <span class="comment"># $lookup - —Å–æ–µ–¥–∏–Ω—è–µ—Ç –∫–æ–ª–ª–µ–∫—Ü–∏–∏ books –∏ authors</span>
            <span class="string">"$lookup"</span>: {
                <span class="string">"from"</span>: <span class="string">"authors"</span>,           <span class="comment"># –ò–∑ –∫–∞–∫–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏</span>
                <span class="string">"localField"</span>: <span class="string">"authorId"</span>,    <span class="comment"># –ü–æ–ª–µ –≤ books</span>
                <span class="string">"foreignField"</span>: <span class="string">"_id"</span>,       <span class="comment"># –ü–æ–ª–µ –≤ authors</span>
                <span class="string">"as"</span>: <span class="string">"author"</span>               <span class="comment"># –ò–º—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è</span>
            }
        },
        <span class="comment"># $unwind - —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –º–∞—Å—Å–∏–≤ author –≤ –æ–±—ä–µ–∫—Ç</span>
        {<span class="string">"$unwind"</span>: <span class="string">"$author"</span>}
    ]
    <span class="comment"># –í—ã–ø–æ–ª–Ω–∏—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏—é</span>
    books = list(db.books.aggregate(pipeline))
    <span class="comment"># –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å ObjectId –≤ —Å—Ç—Ä–æ–∫—É</span>
    <span class="keyword">for</span> book <span class="keyword">in</span> books:
        book[<span class="string">"_id"</span>] = str(book[<span class="string">"_id"</span>])
        book[<span class="string">"authorId"</span>] = str(book[<span class="string">"authorId"</span>])
        book[<span class="string">"author"</span>][<span class="string">"_id"</span>] = str(book[<span class="string">"author"</span>][<span class="string">"_id"</span>])
    <span class="keyword">return</span> books</div>
            
            <div class="checkbox-item">
                <input type="checkbox" id="task-crud-books">
                <label for="task-crud-books">CRUD –¥–ª—è –∫–Ω–∏–≥ –∏ –æ—Ç–∑—ã–≤–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω</label>
            </div>
        </div>

        <div class="section">
            <h2>7. –û—Ç—Ä–∞–±–æ—Ç–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–π –≤ MongoDB Compass Shell</h2>
            <p><strong>–¶–µ–ª—å:</strong> –ù–∞—É—á–∏—Ç—å—Å—è –ø–∏—Å–∞—Ç—å –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≥—Ä–µ–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ MongoDB Shell –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–Ω–æ—Å–æ–º –≤ FastAPI</p>
            
            <h3>–ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å MongoDB Shell –≤ Compass:</h3>
            <ul>
                <li>–û—Ç–∫—Ä—ã—Ç—å MongoDB Compass</li>
                <li>–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö</li>
                <li>–í–Ω–∏–∑—É –æ–∫–Ω–∞ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É <strong>>_MONGOSH</strong> (MongoDB Shell)</li>
                <li>–í—ã–±—Ä–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö: <code>use library</code></li>
            </ul>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 1: –¢–æ–ø-5 —Å–∞–º—ã—Ö –¥–ª–∏–Ω–Ω—ã—Ö –∫–Ω–∏–≥</h3>
            <div class="code-block"><span class="comment">// –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö</span>
db.books.<span class="function">findOne</span>()  <span class="comment">// –°–º–æ—Ç—Ä–∏–º, –∫–∞–∫–∏–µ –ø–æ–ª—è –µ—Å—Ç—å –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏</span>

<span class="comment">// –®–∞–≥ 2: –ü—Ä–æ—Å—Ç–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏ –ª–∏–º–∏—Ç</span>
db.books.<span class="function">find</span>().<span class="function">sort</span>({<span class="string">pages</span>: <span class="number">-1</span>}).<span class="function">limit</span>(<span class="number">5</span>)
<span class="comment">// –†–µ–∑—É–ª—å—Ç–∞—Ç: 5 –∫–Ω–∏–≥, –Ω–æ –±–µ–∑ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–≤—Ç–æ—Ä–∞—Ö</span>

<span class="comment">// –®–∞–≥ 3: –î–æ–±–∞–≤–ª—è–µ–º –∞–≥—Ä–µ–≥–∞—Ü–∏—é —Å $lookup</span>
db.books.<span class="function">aggregate</span>([
  {<span class="operator">$sort</span>: {<span class="string">pages</span>: <span class="number">-1</span>}},
  {<span class="operator">$limit</span>: <span class="number">5</span>},
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"authors"</span>,
      <span class="string">localField</span>: <span class="string">"authorId"</span>,
      <span class="string">foreignField</span>: <span class="string">"_id"</span>,
      <span class="string">as</span>: <span class="string">"author"</span>
    }
  }
])
<span class="comment">// –†–µ–∑—É–ª—å—Ç–∞—Ç: author —Ç–µ–ø–µ—Ä—å –º–∞—Å—Å–∏–≤ [{}], –Ω—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å</span>

<span class="comment">// –®–∞–≥ 4: –î–æ–±–∞–≤–ª—è–µ–º $unwind</span>
db.books.<span class="function">aggregate</span>([
  {<span class="operator">$sort</span>: {<span class="string">pages</span>: <span class="number">-1</span>}},
  {<span class="operator">$limit</span>: <span class="number">5</span>},
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"authors"</span>,
      <span class="string">localField</span>: <span class="string">"authorId"</span>,
      <span class="string">foreignField</span>: <span class="string">"_id"</span>,
      <span class="string">as</span>: <span class="string">"author"</span>
    }
  },
  {<span class="operator">$unwind</span>: <span class="string">"$author"</span>}
])
<span class="comment">// –†–µ–∑—É–ª—å—Ç–∞—Ç: author —Ç–µ–ø–µ—Ä—å –æ–±—ä–µ–∫—Ç {}, –Ω–æ –º–Ω–æ–≥–æ –ª–∏—à–Ω–∏—Ö –ø–æ–ª–µ–π</span>

<span class="comment">// –®–∞–≥ 5: –î–æ–±–∞–≤–ª—è–µ–º $project –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª–µ–π</span>
db.books.<span class="function">aggregate</span>([
  {<span class="operator">$sort</span>: {<span class="string">pages</span>: <span class="number">-1</span>}},
  {<span class="operator">$limit</span>: <span class="number">5</span>},
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"authors"</span>,
      <span class="string">localField</span>: <span class="string">"authorId"</span>,
      <span class="string">foreignField</span>: <span class="string">"_id"</span>,
      <span class="string">as</span>: <span class="string">"author"</span>
    }
  },
  {<span class="operator">$unwind</span>: <span class="string">"$author"</span>},
  {
    <span class="operator">$project</span>: {
      <span class="string">title</span>: <span class="number">1</span>,
      <span class="string">pages</span>: <span class="number">1</span>,
      <span class="string">authorName</span>: <span class="string">"$author.name"</span>,
      <span class="string">publishedYear</span>: <span class="number">1</span>
    }
  }
])
<span class="comment">// ‚úÖ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –≤ FastAPI</span></div>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 2: –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–∏</h3>
            <div class="code-block"><span class="comment">// –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ—Ç–∑—ã–≤–æ–≤</span>
db.reviews.<span class="function">findOne</span>()

<span class="comment">// –®–∞–≥ 2: –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –æ—Ç–∑—ã–≤—ã –ø–æ bookId</span>
db.reviews.<span class="function">aggregate</span>([
  {
    <span class="operator">$group</span>: {
      <span class="string">_id</span>: <span class="string">"$bookId"</span>,
      <span class="string">avgRating</span>: {<span class="operator">$avg</span>: <span class="string">"$rating"</span>},
      <span class="string">reviewCount</span>: {<span class="operator">$sum</span>: <span class="number">1</span>}
    }
  }
])
<span class="comment">// –†–µ–∑—É–ª—å—Ç–∞—Ç: –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –Ω–æ –Ω–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–π –∫–Ω–∏–≥</span>

<span class="comment">// –®–∞–≥ 3: –î–æ–±–∞–≤–ª—è–µ–º $lookup –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π</span>
db.reviews.<span class="function">aggregate</span>([
  {
    <span class="operator">$group</span>: {
      <span class="string">_id</span>: <span class="string">"$bookId"</span>,
      <span class="string">avgRating</span>: {<span class="operator">$avg</span>: <span class="string">"$rating"</span>},
      <span class="string">reviewCount</span>: {<span class="operator">$sum</span>: <span class="number">1</span>}
    }
  },
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"books"</span>,
      <span class="string">localField</span>: <span class="string">"_id"</span>,
      <span class="string">foreignField</span>: <span class="string">"_id"</span>,
      <span class="string">as</span>: <span class="string">"book"</span>
    }
  },
  {<span class="operator">$unwind</span>: <span class="string">"$book"</span>}
])

<span class="comment">// –®–∞–≥ 4: –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—ã–≤–æ–¥ –∏ —Å–æ—Ä—Ç–∏—Ä—É–µ–º</span>
db.reviews.<span class="function">aggregate</span>([
  {
    <span class="operator">$group</span>: {
      <span class="string">_id</span>: <span class="string">"$bookId"</span>,
      <span class="string">avgRating</span>: {<span class="operator">$avg</span>: <span class="string">"$rating"</span>},
      <span class="string">reviewCount</span>: {<span class="operator">$sum</span>: <span class="number">1</span>}
    }
  },
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"books"</span>,
      <span class="string">localField</span>: <span class="string">"_id"</span>,
      <span class="string">foreignField</span>: <span class="string">"_id"</span>,
      <span class="string">as</span>: <span class="string">"book"</span>
    }
  },
  {<span class="operator">$unwind</span>: <span class="string">"$book"</span>},
  {
    <span class="operator">$project</span>: {
      <span class="string">title</span>: <span class="string">"$book.title"</span>,
      <span class="string">avgRating</span>: {<span class="operator">$round</span>: [<span class="string">"$avgRating"</span>, <span class="number">2</span>]},
      <span class="string">reviewCount</span>: <span class="number">1</span>
    }
  },
  {<span class="operator">$sort</span>: {<span class="string">avgRating</span>: <span class="number">-1</span>}}
])
<span class="comment">// ‚úÖ –ì–æ—Ç–æ–≤–æ!</span></div>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 3: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–≤—Ç–æ—Ä–∞–º</h3>
            <div class="code-block"><span class="comment">// –®–∞–≥ 1: –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –∫–Ω–∏–≥–∏ –ø–æ authorId</span>
db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$group</span>: {
      <span class="string">_id</span>: <span class="string">"$authorId"</span>,
      <span class="string">bookCount</span>: {<span class="operator">$sum</span>: <span class="number">1</span>},
      <span class="string">totalPages</span>: {<span class="operator">$sum</span>: <span class="string">"$pages"</span>},
      <span class="string">avgPages</span>: {<span class="operator">$avg</span>: <span class="string">"$pages"</span>}
    }
  }
])
<span class="comment">// –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –µ—Å—Ç—å, –Ω–æ –Ω–µ—Ç –∏–º–µ–Ω –∞–≤—Ç–æ—Ä–æ–≤</span>

<span class="comment">// –®–∞–≥ 2: –î–æ–±–∞–≤–ª—è–µ–º –∏–º–µ–Ω–∞ –∞–≤—Ç–æ—Ä–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º</span>
db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$group</span>: {
      <span class="string">_id</span>: <span class="string">"$authorId"</span>,
      <span class="string">bookCount</span>: {<span class="operator">$sum</span>: <span class="number">1</span>},
      <span class="string">totalPages</span>: {<span class="operator">$sum</span>: <span class="string">"$pages"</span>},
      <span class="string">avgPages</span>: {<span class="operator">$avg</span>: <span class="string">"$pages"</span>}
    }
  },
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"authors"</span>,
      <span class="string">localField</span>: <span class="string">"_id"</span>,
      <span class="string">foreignField</span>: <span class="string">"_id"</span>,
      <span class="string">as</span>: <span class="string">"author"</span>
    }
  },
  {<span class="operator">$unwind</span>: <span class="string">"$author"</span>},
  {
    <span class="operator">$project</span>: {
      <span class="string">authorName</span>: <span class="string">"$author.name"</span>,
      <span class="string">bookCount</span>: <span class="number">1</span>,
      <span class="string">totalPages</span>: <span class="number">1</span>,
      <span class="string">avgPages</span>: {<span class="operator">$round</span>: [<span class="string">"$avgPages"</span>, <span class="number">0</span>]}
    }
  },
  {<span class="operator">$sort</span>: {<span class="string">bookCount</span>: <span class="number">-1</span>}}
])
<span class="comment">// ‚úÖ –ì–æ—Ç–æ–≤–æ!</span></div>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 4: –ö–Ω–∏–≥–∏ –ø–æ –∂–∞–Ω—Ä–∞–º</h3>
            <div class="code-block"><span class="comment">// –®–∞–≥ 1: –ü—Ä–æ—Å—Ç–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞</span>
db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$group</span>: {
      <span class="string">_id</span>: <span class="string">"$genre"</span>,
      <span class="string">count</span>: {<span class="operator">$sum</span>: <span class="number">1</span>}
    }
  }
])
<span class="comment">// –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–∏–≥ –ø–æ –∂–∞–Ω—Ä–∞–º</span>

<span class="comment">// –®–∞–≥ 2: –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –∏ —Å—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü</span>
db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$group</span>: {
      <span class="string">_id</span>: <span class="string">"$genre"</span>,
      <span class="string">count</span>: {<span class="operator">$sum</span>: <span class="number">1</span>},
      <span class="string">books</span>: {<span class="operator">$push</span>: <span class="string">"$title"</span>},      <span class="comment">// –°–æ–±–∏—Ä–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –≤ –º–∞—Å—Å–∏–≤</span>
      <span class="string">avgPages</span>: {<span class="operator">$avg</span>: <span class="string">"$pages"</span>}
    }
  },
  {<span class="operator">$sort</span>: {<span class="string">count</span>: <span class="number">-1</span>}}
])
<span class="comment">// ‚úÖ –ì–æ—Ç–æ–≤–æ! –í–∏–¥–∏–º –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –∂–∞–Ω—Ä—ã –∏ —Å–ø–∏—Å–æ–∫ –∫–Ω–∏–≥ –≤ –∫–∞–∂–¥–æ–º</span></div>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 5: –ü–æ–∏—Å–∫ –∫–Ω–∏–≥ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –ª–µ—Ç</h3>
            <div class="code-block"><span class="comment">// –®–∞–≥ 1: –ü—Ä–æ—Å—Ç–æ–π —Ñ–∏–ª—å—Ç—Ä</span>
db.books.<span class="function">find</span>({
  <span class="string">publishedYear</span>: {<span class="operator">$gte</span>: <span class="number">1850</span>, <span class="operator">$lte</span>: <span class="number">1900</span>}
})
<span class="comment">// –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–Ω–∏–≥–∏ –Ω–∞–π–¥–µ–Ω—ã, –Ω–æ –±–µ–∑ –∞–≤—Ç–æ—Ä–æ–≤</span>

<span class="comment">// –®–∞–≥ 2: –ü–µ—Ä–µ–≤–æ–¥–∏–º –≤ –∞–≥—Ä–µ–≥–∞—Ü–∏—é —Å $match</span>
db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$match</span>: {
      <span class="string">publishedYear</span>: {<span class="operator">$gte</span>: <span class="number">1850</span>, <span class="operator">$lte</span>: <span class="number">1900</span>}
    }
  }
])

<span class="comment">// –®–∞–≥ 3: –î–æ–±–∞–≤–ª—è–µ–º –∞–≤—Ç–æ—Ä–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º</span>
db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$match</span>: {
      <span class="string">publishedYear</span>: {<span class="operator">$gte</span>: <span class="number">1850</span>, <span class="operator">$lte</span>: <span class="number">1900</span>}
    }
  },
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"authors"</span>,
      <span class="string">localField</span>: <span class="string">"authorId"</span>,
      <span class="string">foreignField</span>: <span class="string">"_id"</span>,
      <span class="string">as</span>: <span class="string">"author"</span>
    }
  },
  {<span class="operator">$unwind</span>: <span class="string">"$author"</span>},
  {
    <span class="operator">$project</span>: {
      <span class="string">title</span>: <span class="number">1</span>,
      <span class="string">authorName</span>: <span class="string">"$author.name"</span>,
      <span class="string">publishedYear</span>: <span class="number">1</span>,
      <span class="string">genre</span>: <span class="number">1</span>
    }
  },
  {<span class="operator">$sort</span>: {<span class="string">publishedYear</span>: <span class="number">1</span>}}
])
<span class="comment">// ‚úÖ –ì–æ—Ç–æ–≤–æ! –ú–µ–Ω—è–µ–º –≥–æ–¥—ã –≤ $match –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤</span></div>

            <h3>–ö–Ω–∏–≥–∏ –±–µ–∑ –æ—Ç–∑—ã–≤–æ–≤</h3>
            <div class="code-block"><span class="comment">// –®–∞–≥ 1: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º –æ—Ç–∑—ã–≤—ã –∫ –∫–Ω–∏–≥–∞–º</span>
db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"reviews"</span>,
      <span class="string">localField</span>: <span class="string">"_id"</span>,
      <span class="string">foreignField</span>: <span class="string">"bookId"</span>,
      <span class="string">as</span>: <span class="string">"reviews"</span>
    }
  }
])
<span class="comment">// –†–µ–∑—É–ª—å—Ç–∞—Ç: —É –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–∏ –µ—Å—Ç—å –ø–æ–ª–µ reviews (–º–∞—Å—Å–∏–≤)</span>

<span class="comment">// –®–∞–≥ 2: –§–∏–ª—å—Ç—Ä—É–µ–º –∫–Ω–∏–≥–∏ —Å –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º –æ—Ç–∑—ã–≤–æ–≤</span>
db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"reviews"</span>,
      <span class="string">localField</span>: <span class="string">"_id"</span>,
      <span class="string">foreignField</span>: <span class="string">"bookId"</span>,
      <span class="string">as</span>: <span class="string">"reviews"</span>
    }
  },
  {
    <span class="operator">$match</span>: {
      <span class="string">reviews</span>: {<span class="operator">$size</span>: <span class="number">0</span>}  <span class="comment">// –†–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ = 0</span>
    }
  }
])

<span class="comment">// –®–∞–≥ 3: –î–æ–±–∞–≤–ª—è–µ–º –∞–≤—Ç–æ—Ä–æ–≤ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º</span>
db.books.<span class="function">aggregate</span>([
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"reviews"</span>,
      <span class="string">localField</span>: <span class="string">"_id"</span>,
      <span class="string">foreignField</span>: <span class="string">"bookId"</span>,
      <span class="string">as</span>: <span class="string">"reviews"</span>
    }
  },
  {
    <span class="operator">$match</span>: {
      <span class="string">reviews</span>: {<span class="operator">$size</span>: <span class="number">0</span>}
    }
  },
  {
    <span class="operator">$lookup</span>: {
      <span class="string">from</span>: <span class="string">"authors"</span>,
      <span class="string">localField</span>: <span class="string">"authorId"</span>,
      <span class="string">foreignField</span>: <span class="string">"_id"</span>,
      <span class="string">as</span>: <span class="string">"author"</span>
    }
  },
  {<span class="operator">$unwind</span>: <span class="string">"$author"</span>},
  {
    <span class="operator">$project</span>: {
      <span class="string">title</span>: <span class="number">1</span>,
      <span class="string">authorName</span>: <span class="string">"$author.name"</span>,
      <span class="string">publishedYear</span>: <span class="number">1</span>
    }
  }
])
<span class="comment">// ‚úÖ –ì–æ—Ç–æ–≤–æ! –ù–∞—à–ª–∏ –∫–Ω–∏–≥–∏, –∫–æ—Ç–æ—Ä—ã–º –Ω—É–∂–Ω—ã –æ—Ç–∑—ã–≤—ã</span></div>

            <h3>üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:</h3>
            <div class="code-block"><span class="comment">// –ü–æ–¥—Å—á–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏</span>
db.books.<span class="function">countDocuments</span>()

<span class="comment">// –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–≤—ã—Ö N –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤</span>
db.books.<span class="function">find</span>().<span class="function">limit</span>(<span class="number">3</span>)

<span class="comment">// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞</span>
db.books.<span class="function">findOne</span>()

<span class="comment">// –û—á–∏—Å—Ç–∫–∞ —ç–∫—Ä–∞–Ω–∞</span>
cls  <span class="comment">// –∏–ª–∏ clear</span>

<span class="comment">// –ö—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥</span>
db.books.<span class="function">find</span>().<span class="function">pretty</span>()

<span class="comment">// –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞</span>
db.books.<span class="function">find</span>({<span class="string">genre</span>: <span class="string">"—Ä–æ–º–∞–Ω"</span>}).<span class="function">explain</span>(<span class="string">"executionStats"</span>)</div>
            
            <div class="checkbox-item">
                <input type="checkbox" id="task-aggregations">
                <label for="task-aggregations">–û—Ç—Ä–∞–±–æ—Ç–∫–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∞</label>
            </div>
        </div>

        <div class="section">
            <h2>8. –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞</h2>
            <p>–†–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—è –∞–≥—Ä–µ–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã MongoDB:</p>
            
            <h3>–ó–∞–¥–∞–Ω–∏–µ 1: –¢–æ–ø-5 —Å–∞–º—ã—Ö –¥–ª–∏–Ω–Ω—ã—Ö –∫–Ω–∏–≥</h3>
            <div class="form-group">
                <label>–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:</label>
                <textarea class="code-textarea">@app.get("/books/longest")
def get_longest_books():
    """–ù–∞–π—Ç–∏ 5 —Å–∞–º—ã—Ö –¥–ª–∏–Ω–Ω—ã—Ö –∫–Ω–∏–≥ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∞–≤—Ç–æ—Ä–∞—Ö"""
    pipeline = [
        # –®–∞–≥ 1: –°–æ—Ä—Ç–∏—Ä—É–µ–º –≤—Å–µ –∫–Ω–∏–≥–∏ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Å—Ç—Ä–∞–Ω–∏—Ü
        ...,
        # –®–∞–≥ 2: –ë–µ—Ä–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 5 –∫–Ω–∏–≥
        ...,
        # –®–∞–≥ 3: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–≤—Ç–æ—Ä–∞—Ö
        ...,
        # –®–∞–≥ 4: –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –º–∞—Å—Å–∏–≤ author
        ...,
        # –®–∞–≥ 5: –í—ã–±–∏—Ä–∞–µ–º –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è
        ...
    ]
    return list(db.books.aggregate(pipeline))
</textarea>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task8-1">
                <label for="task8-1">–ó–∞–¥–∞–Ω–∏–µ 1 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
            </div>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 2: –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–∏</h3>
            <div class="form-group">
                <label>–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:</label>
                <textarea class="code-textarea">@app.get("/books/ratings")
def get_books_ratings():
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ä–µ–¥–Ω—é—é –æ—Ü–µ–Ω–∫—É –¥–ª—è –∫–∞–∂–¥–æ–π –∫–Ω–∏–≥–∏"""
    pipeline = [
        # –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –æ—Ç–∑—ã–≤—ã –ø–æ bookId –∏ —Å—á–∏—Ç–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        ...
    ]
    return list(db.reviews.aggregate(pipeline))
</textarea>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task8-2">
                <label for="task8-2">–ó–∞–¥–∞–Ω–∏–µ 2 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
            </div>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 3: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–≤—Ç–æ—Ä–∞–º</h3>
            <div class="form-group">
                <label>–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:</label>
                <textarea class="code-textarea">@app.get("/authors/stats")
def get_authors_stats():
    """–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–∏–≥ –∏ –æ–±—â–µ–µ —á–∏—Å–ª–æ —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ—Ä–∞"""
    ...
    return list(db.books.aggregate(pipeline))
</textarea>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task8-3">
                <label for="task8-3">–ó–∞–¥–∞–Ω–∏–µ 3 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
            </div>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 4: –ö–Ω–∏–≥–∏ –ø–æ –∂–∞–Ω—Ä–∞–º</h3>
            <div class="form-group">
                <label>–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:</label>
                <textarea class="code-textarea">@app.get("/books/by-genre")
def get_books_by_genre():
    """–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–Ω–∏–≥ –ø–æ –∂–∞–Ω—Ä–∞–º —Å –ø–æ–¥—Å—á–µ—Ç–æ–º"""
    ...
    return list(db.books.aggregate(pipeline))
</textarea>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task8-4">
                <label for="task8-4">–ó–∞–¥–∞–Ω–∏–µ 4 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
            </div>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 5: –ü–æ–∏—Å–∫ –∫–Ω–∏–≥ –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –ª–µ—Ç</h3>
            <div class="form-group">
                <label>–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:</label>
                <textarea class="code-textarea">@app.get("/books/by-years/{start_year}/{end_year}")
def get_books_by_years(start_year: int, end_year: int):
    """–ù–∞–π—Ç–∏ –∫–Ω–∏–≥–∏, –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –ª–µ—Ç"""
    ...
    return list(db.books.aggregate(pipeline))
</textarea>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task8-5">
                <label for="task8-5">–ó–∞–¥–∞–Ω–∏–µ 5 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
            </div>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 6: –°–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ—Ü–µ–Ω–∑–µ–Ω—Ç</h3>
            <div class="form-group">
                <label>–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:</label>
                <textarea class="code-textarea">@app.get("/reviewers/top")
def get_top_reviewers():
    """–ù–∞–π—Ç–∏ —Å–∞–º—ã—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ—Ü–µ–Ω–∑–µ–Ω—Ç–æ–≤"""
    ...
    return list(db.reviews.aggregate(pipeline))
</textarea>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task8-6">
                <label for="task8-6">–ó–∞–¥–∞–Ω–∏–µ 6 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
            </div>

            <h3>–ó–∞–¥–∞–Ω–∏–µ 7: –ö–Ω–∏–≥–∏ –±–µ–∑ –æ—Ç–∑—ã–≤–æ–≤</h3>
            <div class="form-group">
                <label>–í–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ:</label>
                <textarea class="code-textarea">@app.get("/books/no-reviews")
def get_books_without_reviews():
    """–ù–∞–π—Ç–∏ –∫–Ω–∏–≥–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –æ—Ç–∑—ã–≤–æ–≤"""
    ...
    return list(db.books.aggregate(pipeline))
</textarea>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="task8-7">
                <label for="task8-7">–ó–∞–¥–∞–Ω–∏–µ 7 –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</label>
            </div>
        </div>

        <div class="section">
            <h2>üìä –í—ã–≤–æ–¥—ã –ø–æ –∑–∞–Ω—è—Ç–∏—é</h2>

            <div class="form-group">
                <label>–ù–∞ –¥–∞–Ω–Ω–æ–º –∑–∞–Ω—è—Ç–∏–∏ –º—ã –∏–∑—É—á–∏–ª–∏:</label>
                <textarea rows="3">–ü–µ—Ä–µ—á–∏—Å–ª–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ–º—ã...</textarea>
            </div>

            <div class="form-group">
                <label>–ß—Ç–æ –Ω–æ–≤–æ–≥–æ —É–∑–Ω–∞–ª(–∞):</label>
                <textarea rows="3">–û–ø–∏—à–∏—Ç–µ –Ω–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è...</textarea>
            </div>

            <div class="form-group">
                <label>–ß—Ç–æ –±—ã–ª–æ —Ç—Ä—É–¥–Ω–æ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è:</label>
                <textarea rows="3">–û–ø–∏—à–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏...</textarea>
            </div>
        </div>

        <button class="save-btn" onclick="saveToPDF()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ PDF</button>
    </div>

    <script>
        if (!sessionStorage.getItem('mongodb-lab-loaded')) {
            localStorage.clear();
            sessionStorage.setItem('mongodb-lab-loaded', 'true');
        }

        function loadFromStorage() {
            document.getElementById('student-name').value = localStorage.getItem('student-name') || '';
            document.getElementById('group').value = localStorage.getItem('group') || '';
            document.getElementById('date').value = localStorage.getItem('date') || new Date().toISOString().split('T')[0];
        }
        
        function saveToStorage() {
            localStorage.setItem('student-name', document.getElementById('student-name').value);
            localStorage.setItem('group', document.getElementById('group').value);
            localStorage.setItem('date', document.getElementById('date').value);
        }
        
        loadFromStorage();

        document.getElementById('student-name').addEventListener('input', saveToStorage);
        document.getElementById('group').addEventListener('input', saveToStorage);
        document.getElementById('date').addEventListener('change', saveToStorage);
        
        document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
            if (localStorage.getItem(checkbox.id) === 'true') checkbox.checked = true;
            checkbox.addEventListener('change', () => {
                localStorage.setItem(checkbox.id, checkbox.checked);
            });
        });

        function autoResize(textarea) {
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        }

        document.querySelectorAll('.code-textarea').forEach(textarea => {
            textarea.addEventListener('input', function() {
                autoResize(this);
                saveToStorage();
            });
            autoResize(textarea);
        });

        document.querySelectorAll('textarea:not(.code-textarea)').forEach(textarea => {
            textarea.addEventListener('input', function() {
                autoResize(this);
                saveToStorage();
            });
            autoResize(textarea);
        });

        document.querySelectorAll('textarea').forEach((textarea, index) => {
            const saved = localStorage.getItem('textarea-' + index);
            if (saved) textarea.value = saved;
        });

        document.querySelectorAll('textarea').forEach((textarea, index) => {
            textarea.addEventListener('input', function() {
                localStorage.setItem('textarea-' + index, textarea.value);
            });
        });

        function highlightPython(code) {
            let result = code
                .replace(/&/g, '&amp;')
                .replace(/</g, '&lt;')
                .replace(/>/g, '&gt;');
            
            result = result.replace(/(#.*$)/gm, '###COMMENT###$1###/COMMENT###');
            result = result.replace(/(['"`])((?:\\\\.|(?!\1)[^\\\\\r\n])*?)\1/g, '###STRING###$&###/STRING###');
            result = result.replace(/\b(from|import|def|class|return|if|else|elif|for|while|try|except|finally|with|as|and|or|not|in|is|True|False|None|async|await|raise|pass)\b/g, '###KEYWORD###$1###/KEYWORD###');
            result = result.replace(/\b(\d+)\b/g, '###NUMBER###$1###/NUMBER###');
            result = result.replace(/\b(db|ObjectId|Book|Review|Author|HTTPException|list|str|dict|int)\b/g, '###CLASS###$1###/CLASS###');
            result = result.replace(/\b([a-zA-Z_][a-zA-Z0-9_]*)(?=\s*\()/g, '###FUNCTION###$1###/FUNCTION###');
            result = result.replace(/(@app\.(get|post|put|delete))/g, '###DECORATOR###$1###/DECORATOR###');
            
            result = result.replace(/###COMMENT###/g, '<span class="comment">');
            result = result.replace(/###\/COMMENT###/g, '</span>');
            result = result.replace(/###STRING###/g, '<span class="string">');
            result = result.replace(/###\/STRING###/g, '</span>');
            result = result.replace(/###KEYWORD###/g, '<span class="keyword">');
            result = result.replace(/###\/KEYWORD###/g, '</span>');
            result = result.replace(/###CLASS###/g, '<span class="class">');
            result = result.replace(/###\/CLASS###/g, '</span>');
            result = result.replace(/###FUNCTION###/g, '<span class="function">');
            result = result.replace(/###\/FUNCTION###/g, '</span>');
            result = result.replace(/###NUMBER###/g, '<span class="number">');
            result = result.replace(/###\/NUMBER###/g, '</span>');
            result = result.replace(/###DECORATOR###/g, '<span class="decorator">');
            result = result.replace(/###\/DECORATOR###/g, '</span>');
            
            return result;
        }

        document.querySelectorAll('.code-textarea').forEach(textarea => {
            const wrapper = document.createElement('div');
            wrapper.style.position = 'relative';
            textarea.parentNode.insertBefore(wrapper, textarea);
            wrapper.appendChild(textarea);

            const preview = document.createElement('div');
            preview.className = 'code-block';
            preview.style.display = 'none';
            preview.style.cursor = 'pointer';
            wrapper.appendChild(preview);

            textarea.addEventListener('blur', () => {
                saveToStorage();
                setTimeout(() => {
                    if (textarea.value.trim()) {
                        preview.innerHTML = highlightPython(textarea.value);
                        preview.style.display = 'block';
                        textarea.style.display = 'none';
                    }
                }, 200);
            });

            preview.addEventListener('click', () => {
                preview.style.display = 'none';
                textarea.style.display = 'block';
                textarea.focus();
            });
            
            if (textarea.value.trim()) {
                preview.innerHTML = highlightPython(textarea.value);
                preview.style.display = 'block';
                textarea.style.display = 'none';
            }
        });

        function saveToPDF() {
            const studentName = document.getElementById('student-name').value || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
            const group = document.getElementById('group').value || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
            const date = document.getElementById('date').value || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
            
            const originalTitle = document.title;
            document.title = `MongoDB_Lab_${studentName}_${group}_${date}`;
            
            window.print();
            
            setTimeout(() => {
                document.title = originalTitle;
            }, 1000);
        }
    </script>
</body>
</html>
