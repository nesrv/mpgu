# Практические занятия: OpenSearch + PostgreSQL + FastAPI

## Сценарий 1: Поисковая система для каталога товаров

**Задача**: Создать API для интернет-магазина с полнотекстовым поиском

**Компоненты**:
- PostgreSQL: хранение товаров (id, название, описание, цена, категория)
- OpenSearch: индексация для быстрого поиска
- FastAPI: REST API с эндпоинтами

**Практические задания**:
1. Синхронизация данных PostgreSQL → OpenSearch
2. Поиск с автодополнением (suggest)
3. Фасетный поиск (фильтры по категориям, ценам)
4. Ранжирование результатов по релевантности

---

## Сценарий 2: Система логирования и мониторинга

**Задача**: Централизованный сбор и анализ логов приложения

**Компоненты**:
- PostgreSQL: метаданные пользователей, конфигурации
- OpenSearch: хранение и индексация логов
- FastAPI: API для записи и поиска логов

**Практические задания**:
1. Запись структурированных логов в OpenSearch
2. Агрегация логов по уровням (ERROR, WARNING, INFO)
3. Поиск по временным диапазонам
4. Дашборд с метриками (топ ошибок, активность по времени)

---

## Сценарий 3: Социальная сеть с поиском контента

**Задача**: Поиск по постам, комментариям и пользователям

**Компоненты**:
- PostgreSQL: пользователи, посты, связи
- OpenSearch: индексация контента для поиска
- FastAPI: API для CRUD и поиска

**Практические задания**:
1. Индексация постов с метаданными автора
2. Поиск с учетом геолокации
3. Поиск похожих постов (More Like This)
4. Обработка обновлений в реальном времени

---

## Сценарий 4: Система рекомендаций и аналитики

**Задача**: Анализ поведения пользователей и рекомендации

**Компоненты**:
- PostgreSQL: транзакции, профили пользователей
- OpenSearch: события, клики, просмотры
- FastAPI: API для аналитики

**Практические задания**:
1. Сбор событий пользователей (clickstream)
2. Агрегация метрик (популярные товары, тренды)
3. Персонализированный поиск на основе истории
4. A/B тестирование поисковых алгоритмов

---

## Сценарий 5: Документооборот и knowledge base

**Задача**: Корпоративная система поиска документов

**Компоненты**:
- PostgreSQL: метаданные документов, права доступа
- OpenSearch: полнотекстовая индексация документов
- FastAPI: API для загрузки и поиска

**Практические задания**:
1. Индексация документов разных форматов (PDF, DOCX)
2. Поиск с учетом прав доступа
3. Highlighting найденных фрагментов
4. Семантический поиск с векторными представлениями

---

## Рекомендуемая структура занятия (2 пары)

**Пара 1 (теория + setup)**:
- Архитектура связки PostgreSQL + OpenSearch + FastAPI
- Docker Compose для развертывания
- Базовая настройка индексов и маппингов

**Пара 2 (практика)**:
- Реализация выбранного сценария
- Тестирование производительности
- Оптимизация запросов
