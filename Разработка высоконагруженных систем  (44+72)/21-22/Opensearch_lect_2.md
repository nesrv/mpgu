# OpenSearch: –ü–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–ª—è —Ö–∞–π–ª–æ–∞–¥–æ–≤ üöÄ

## –ß—Ç–æ —Ç–∞–∫–æ–µ OpenSearch?

OpenSearch ‚Äî —ç—Ç–æ **—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –ø–æ–∏—Å–∫–æ–≤–∞—è –º–∞—à–∏–Ω–∞** (–¥—É–º–∞–π –ø—Ä–æ –Ω–µ—ë –∫–∞–∫ –ø—Ä–æ Google –¥–ª—è —Ç–≤–æ–∏—Ö –¥–∞–Ω–Ω—ã—Ö). –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –æ–¥–Ω–æ–π —Ç–∞—á–∫–µ –∏–ª–∏ —Ä–∞—Å–∫–∏–¥–∞—Ç—å –ø–æ —Å–æ—Ç–Ω—è–º —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ –¥–∞—Ç–∞-—Ü–µ–Ω—Ç—Ä–µ.

**–ó–∞—á–µ–º –Ω—É–∂–µ–Ω?**
- –ü–æ–∏—Å–∫–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –Ω–∞ —Å–∞–π—Ç–µ (–∫–∞–∫ –Ω–∞ Amazon)
- –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ª–æ–≤–∏–º —Ö–∞–∫–µ—Ä–æ–≤)
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö (BigData, –¥–µ—Ç–∫–∞!)

---

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ (–±–∞–∑–∞, –∫–æ—Ç–æ—Ä—É—é –Ω–∞–¥–æ –∑–Ω–∞—Ç—å)

### üìÑ –î–æ–∫—É–º–µ–Ω—Ç (Document)

**–ß—Ç–æ —ç—Ç–æ?** –ï–¥–∏–Ω–∏—Ü–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ. –ö–∞–∫ —Å—Ç—Ä–æ–∫–∞ –≤ SQL-—Ç–∞–±–ª–∏—Ü–µ, —Ç–æ–ª—å–∫–æ –∫—Ä—É—á–µ.

**–ü—Ä–∏–º–µ—Ä:** –°—Ç—É–¥–µ–Ω—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

| ID | –ò–º—è | –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª | –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞ |
|----|-----|--------------|-------------|
| 1 | –î–∂–æ–Ω –î–æ—É | 3.89 | 2022 |

–í JSON –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```json
{
  "name": "John Doe",
  "gpa": 3.89,
  "grad_year": 2022
}
```

**–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è:** –î–æ–∫—É–º–µ–Ω—Ç = –∫–∞—Ä—Ç–æ—á–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ –≤ –¥–µ–∫–∞–Ω–∞—Ç–µ.

---

### üìö –ò–Ω–¥–µ–∫—Å (Index)

**–ß—Ç–æ —ç—Ç–æ?** –ö–æ–ª–ª–µ–∫—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –ö–∞–∫ —Ç–∞–±–ª–∏—Ü–∞ –≤ SQL, –Ω–æ –±–µ–∑ –∂–µ—Å—Ç–∫–æ–π —Å—Ö–µ–º—ã.

**–ü—Ä–∏–º–µ—Ä:** –í—Å–µ —Å—Ç—É–¥–µ–Ω—Ç—ã —à–∫–æ–ª—ã

| ID | –ò–º—è | –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª | –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞ |
|----|-----|--------------|-------------|
| 1 | –î–∂–æ–Ω –î–æ—É | 3.89 | 2022 |
| 2 | –î–∂–æ–Ω–∞—Ç–∞–Ω –ü–∞—É—ç—Ä—Å | 3.85 | 2025 |
| 3 | –î–∂–µ–π–Ω –î–æ—É | 3.52 | 2024 |

**–ê—Å—Å–æ—Ü–∏–∞—Ü–∏—è:** –ò–Ω–¥–µ–∫—Å = –ø–∞–ø–∫–∞ —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.

---

### üñ•Ô∏è –ö–ª–∞—Å—Ç–µ—Ä—ã –∏ —É–∑–ª—ã (Clusters & Nodes)

**–ö–ª–∞—Å—Ç–µ—Ä** = –≥—Ä—É–ø–ø–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤–º–µ—Å—Ç–µ  
**–£–∑–µ–ª** = –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ö–ª–∞—Å—Ç–µ—Ä ‚Äî —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, —É–∑–µ–ª ‚Äî –æ–¥–∏–Ω –¥–µ–≤–µ–ª–æ–ø–µ—Ä.

**–¢–∏–ø—ã —É–∑–ª–æ–≤:**
- **Master-node** (–º–µ–Ω–µ–¥–∂–µ—Ä) ‚Äî –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –∫–ª–∞—Å—Ç–µ—Ä–∞
- **Data-node** (–≤–æ—Ä–∫–µ—Ä) ‚Äî —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫
- **Ingest-node** (–ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä) ‚Äî –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π

**–ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –û–¥–∏–Ω –Ω–æ—É—Ç = –æ–¥–Ω–æ—É–∑–ª–æ–≤–æ–π –∫–ª–∞—Å—Ç–µ—Ä (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- –ü—Ä–æ–¥–∞–∫—à–Ω = —Å–æ—Ç–Ω–∏ –º–æ—â–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤

---

### üçï –®–∞—Ä–¥—ã (Shards) ‚Äî –¥–µ–ª–∏–º –ø–∏—Ü—Ü—É –Ω–∞ –∫—É—Å–∫–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò–Ω–¥–µ–∫—Å –Ω–∞ 400 –ì–ë –Ω–µ –≤–ª–µ–∑–µ—Ç –Ω–∞ –æ–¥–∏–Ω —Å–µ—Ä–≤–µ—Ä.  
**–†–µ—à–µ–Ω–∏–µ:** –†–µ–∂–µ–º –∏–Ω–¥–µ–∫—Å –Ω–∞ **—à–∞—Ä–¥—ã** (–∫—É—Å–∫–∏ –ø–æ 40 –ì–ë) –∏ —Ä–∞—Å–∫–∏–¥—ã–≤–∞–µ–º –ø–æ —É–∑–ª–∞–º.

![–®–∞—Ä–¥—ã](image.png)

**–ü—Ä–∏–º–µ—Ä:**
- –ò–Ω–¥–µ–∫—Å 1: 2 —à–∞—Ä–¥–∞
- –ò–Ω–¥–µ–∫—Å 2: 4 —à–∞—Ä–¥–∞
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ 1 –∏ 2

![–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —à–∞—Ä–¥–æ–≤](image-1.png)

**–í–∞–∂–Ω–æ!** –ö–∞–∂–¥—ã–π —à–∞—Ä–¥ = –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å Lucene (–∂—Ä—ë—Ç CPU –∏ RAM). –ù–µ –¥–µ–ª–∞–π 1000 —à–∞—Ä–¥–æ–≤ –Ω–∞ 400 –ì–ë ‚Äî —É–±—å—ë—à—å –∫–ª–∞—Å—Ç–µ—Ä.

**–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –†–∞–∑–º–µ—Ä —à–∞—Ä–¥–∞ = 10-50 –ì–ë.

---

### üîÑ Primary –∏ Replica —à–∞—Ä–¥—ã

**Primary shard** (–æ—Å–Ω–æ–≤–Ω–æ–π) ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö  
**Replica shard** (—Ä–µ–ø–ª–∏–∫–∞) ‚Äî –∫–æ–ø–∏—è –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏

**–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 1 —Ä–µ–ø–ª–∏–∫–∞ –Ω–∞ –∫–∞–∂–¥—ã–π primary —à–∞—Ä–¥.

![Primary –∏ Replica](image-2.png)

**–ó–∞—á–µ–º —Ä–µ–ø–ª–∏–∫–∏?**
1. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å** ‚Äî –µ—Å–ª–∏ —É–∑–µ–ª —É–ø–∞–ª, –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ—Ç–µ—Ä—è–Ω—ã
2. **–°–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞** ‚Äî –∑–∞–ø—Ä–æ—Å—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É —Ä–µ–ø–ª–∏–∫–∞–º–∏

**–°–ª–µ–Ω–≥:** "–®–∞—Ä–¥–∏–º –±–∞–∑—É" = –¥–µ–ª–∏–º –∏–Ω–¥–µ–∫—Å –Ω–∞ —á–∞—Å—Ç–∏.

---

### üîç –ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å (Inverted Index)

**–ß—Ç–æ —ç—Ç–æ?** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–æ–≤–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.

**–ü—Ä–∏–º–µ—Ä:**

**–î–æ–∫—É–º–µ–Ω—Ç—ã:**
- –î–æ–∫—É–º–µ–Ω—Ç 1: "–ö—Ä–∞—Å–æ—Ç–∞ –≤ –≥–ª–∞–∑–∞—Ö —Å–º–æ—Ç—Ä—è—â–µ–≥–æ"
- –î–æ–∫—É–º–µ–Ω—Ç 2: "–ö—Ä–∞—Å–∞–≤–∏—Ü–∞ –∏ —á—É–¥–æ–≤–∏—â–µ"

**–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å:**

| –°–ª–æ–≤–æ | –î–æ–∫—É–º–µ–Ω—Ç—ã |
|-------|-----------|
| –∫—Ä–∞—Å–æ—Ç–∞ | 1, 2 |
| —è–≤–ª—è–µ—Ç—Å—è | 1 |
| –≤ | 1 |
| –≥–ª–∞–∑ | 1 |
| –∏ | 2 |
| –∑–≤–µ—Ä—å | 2 |

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ö–∞–∫ –∏–Ω–¥–µ–∫—Å –≤ –∫–æ–Ω—Ü–µ —É—á–µ–±–Ω–∏–∫–∞ ‚Äî —Å–ª–æ–≤–æ ‚Üí —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

**–ë–æ–Ω—É—Å:** OpenSearch —Ö—Ä–∞–Ω–∏—Ç **–ø–æ–∑–∏—Ü–∏—é —Å–ª–æ–≤–∞** –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –¥–ª—è —Ñ—Ä–∞–∑–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.

---

### ‚≠ê –†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (Relevance Score)

**–ß—Ç–æ —ç—Ç–æ?** –û—Ü–µ–Ω–∫–∞ —Ç–æ–≥–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∑–∞–ø—Ä–æ—Å—É.

**–ê–ª–≥–æ—Ä–∏—Ç–º:** BM25 (Okapi BM25)

**–§–∞–∫—Ç–æ—Ä—ã:**
1. **TF (Term Frequency)** ‚Äî —á–µ–º —á–∞—â–µ —Å–ª–æ–≤–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ, —Ç–µ–º –≤—ã—à–µ –±–∞–ª–ª
2. **IDF (Inverse Document Frequency)** ‚Äî —á–µ–º —Ä–µ–∂–µ —Å–ª–æ–≤–æ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, —Ç–µ–º –≤—ã—à–µ –±–∞–ª–ª
3. **–î–ª–∏–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞** ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Ä–∞–Ω–∂–∏—Ä—É—é—Ç—Å—è –≤—ã—à–µ

**–ü—Ä–∏–º–µ—Ä:**
- –ó–∞–ø—Ä–æ—Å: "blue axolotl"
- –î–æ–∫—É–º–µ–Ω—Ç —Å "axolotl" (—Ä–µ–¥–∫–æ–µ —Å–ª–æ–≤–æ) –ø–æ–ª—É—á–∏—Ç –≤—ã—à–µ –±–∞–ª–ª, —á–µ–º —Å "blue"

**–°–ª–µ–Ω–≥:** "–°–∫–æ—Ä —É–ø–∞–ª" = —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞ —É—Ö—É–¥—à–∏–ª–∞—Å—å.

---

## –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å OpenSearch

### üõ†Ô∏è REST API

**–°–ø–æ—Å–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤:**
1. **cURL** (—Ç–µ—Ä–º–∏–Ω–∞–ª)
2. **Dev Tools** (OpenSearch Dashboards)
3. **HTTP-–∫–ª–∏–µ–Ω—Ç—ã** (Postman, Insomnia)

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**–ë–µ–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
```bash
curl -X GET "http://localhost:9200/_cluster/health"
```

**–° –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é:**
```bash
curl -X GET "https://localhost:9200/_cluster/health" -ku admin:PASSWORD
```

**–ö—Ä–∞—Å–∏–≤—ã–π JSON (pretty print):**
```bash
curl -X GET "https://localhost:9200/_cluster/health?pretty"
```

**–ó–∞–ø—Ä–æ—Å —Å —Ç–µ–ª–æ–º:**
```bash
curl -X GET "https://localhost:9200/students/_search?pretty" \
  -H 'Content-Type: application/json' \
  -d '{
    "query": {
      "match_all": {}
    }
  }'
```

### Dev Tools (—É–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)

```http
GET _cluster/health
```

**–ó–∞–ø—É—Å–∫:** `Ctrl+Enter` –∏–ª–∏ –∫–ª–∏–∫ –ø–æ ‚ñ∂

---

## CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ (Create, Read, Update, Delete)

### üìù –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ (Create)

**–°–∏–Ω—Ç–∞–∫—Å–∏—Å:**
```http
PUT /<index>/_doc/<id>
```

**–ü—Ä–∏–º–µ—Ä:**
```http
PUT /students/_doc/1
{
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "gpa": 4.5,
  "grad_year": 2023
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**
1. –°–æ–∑–¥–∞—ë—Ç—Å—è –∏–Ω–¥–µ–∫—Å `students` (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
2. –î–æ–∫—É–º–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Å ID = 1
3. –ï—Å–ª–∏ ID –Ω–µ —É–∫–∞–∑–∞–Ω ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

### üîé –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –º–∞–ø–ø–∏–Ω–≥ (Dynamic Mapping)

OpenSearch **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø—ã –ø–æ–ª–µ–π** –∏–∑ JSON.

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã:**
```http
GET /students/_mapping
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "students": {
    "mappings": {
      "properties": {
        "gpa": {"type": "float"},
        "grad_year": {"type": "long"},
        "name": {
          "type": "text",
          "fields": {
            "keyword": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        }
      }
    }
  }
}
```

**–¢–∏–ø—ã –ø–æ–ª–µ–π:**
- `text` ‚Äî –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è)
- `keyword` ‚Äî –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è)
- `float`, `long` ‚Äî —á–∏—Å–ª–∞
- `date` ‚Äî –¥–∞—Ç—ã

**–í–∞–∂–Ω–æ!** –ò–∑–º–µ–Ω–∏—Ç—å —Ç–∏–ø –ø–æ–ª—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ **–Ω–µ–ª—å–∑—è** ‚Äî –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω–¥–µ–∫—Å.

---

### üîç –ü–æ–∏—Å–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (Read)

**–í—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã:**
```http
GET /students/_search
{
  "query": {
    "match_all": {}
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "took": 12,
  "hits": {
    "total": {"value": 1, "relation": "eq"},
    "max_score": 1,
    "hits": [
      {
        "_index": "students",
        "_id": "1",
        "_score": 1,
        "_source": {
          "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
          "gpa": 4.5,
          "grad_year": 2023
        }
      }
    ]
  }
}
```

**–ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è:**
- `took` ‚Äî –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–º—Å)
- `hits.total` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `_score` ‚Äî —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
- `_source` ‚Äî –∏—Å—Ö–æ–¥–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç

---

### ‚úèÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (Update)

**–ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è):**
```http
PUT /students/_doc/1
{
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "gpa": 4.7,
  "grad_year": 2023,
  "address": "—É–ª. –õ–µ–Ω–∏–Ω–∞, 123"
}
```

**–ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
```http
POST /students/_update/1
{
  "doc": {
    "gpa": 4.7,
    "address": "—É–ª. –õ–µ–Ω–∏–Ω–∞, 123"
  }
}
```

**–°–ª–µ–Ω–≥:** "–ê–ø–¥–µ–π—Ç–∏–º –¥–æ–∫—É–º–µ–Ω" = –æ–±–Ω–æ–≤–ª—è–µ–º –¥–æ–∫—É–º–µ–Ω—Ç.

---

### üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ (Delete)

**–£–¥–∞–ª–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç:**
```http
DELETE /students/_doc/1
```

**–£–¥–∞–ª–∏—Ç—å –∏–Ω–¥–µ–∫—Å:**
```http
DELETE /students
```

**–û—Å—Ç–æ—Ä–æ–∂–Ω–æ!** –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ = —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö.

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤

### –Ø–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ —Å –º–∞–ø–ø–∏–Ω–≥–æ–º

```http
PUT /students
{
  "settings": {
    "index.number_of_shards": 1
  },
  "mappings": {
    "properties": {
      "name": {"type": "text"},
      "grad_year": {"type": "date"}
    }
  }
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `settings` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω–¥–µ–∫—Å–∞ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞—Ä–¥–æ–≤)
- `mappings` ‚Äî —Å—Ö–µ–º–∞ –ø–æ–ª–µ–π

---

## –ü–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö (Search)

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```http
POST _bulk
{ "create": { "_index": "students", "_id": "1" } }
{ "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤", "gpa": 4.5, "grad_year": 2023}
{ "create": { "_index": "students", "_id": "2" } }
{ "name": "–ê–ª–µ–∫—Å–µ–π –°–º–∏—Ä–Ω–æ–≤", "gpa": 4.2, "grad_year": 2025 }
{ "create": { "_index": "students", "_id": "3" } }
{ "name": "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞", "gpa": 4.8, "grad_year": 2024 }
```

**–°–ª–µ–Ω–≥:** "–ó–∞–ª–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ bulk" = –º–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞.

---

### Query String –ø–æ–∏—Å–∫ (–ø—Ä–æ—Å—Ç–æ–π)

```http
GET /students/_search?q=name:–∏–≤–∞–Ω
```

**–ú–∏–Ω—É—Å—ã:**
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –°–ª–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å

---

### Query DSL (–º–æ—â–Ω—ã–π)

**–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫:**
```http
GET /students/_search
{
  "query": {
    "match": {
      "name": "–∏–≤–∞–Ω"
    }
  }
}
```

**–ù–∞–π–¥—ë—Ç:** "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤" –∏ "–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞"

---

### –ü–æ–∏—Å–∫ –ø–æ keyword (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)

```http
GET /students/_search
{
  "query": {
    "match": {
      "name.keyword": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤"
    }
  }
}
```

**–ù–∞–π–¥—ë—Ç:** —Ç–æ–ª—å–∫–æ "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤" (–ø–æ–ª–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)

---

### –§–∏–ª—å—Ç—Ä—ã (–±–µ–∑ —Ä–∞—Å—á—ë—Ç–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏)

**–¢–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:**
```http
GET students/_search
{
  "query": { 
    "bool": { 
      "filter": [ 
        { "term": { "grad_year": 2023 }}
      ]
    }
  }
}
```

**–î–∏–∞–ø–∞–∑–æ–Ω:**
```http
GET students/_search
{
  "query": { 
    "bool": { 
      "filter": [ 
        { "range": { "gpa": { "gt": 4.0 }}}
      ]
    }
  }
}
```

**–û–ø–µ—Ä–∞—Ç–æ—Ä—ã:**
- `gt` ‚Äî –±–æ–ª—å—à–µ (>)
- `gte` ‚Äî –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ (‚â•)
- `lt` ‚Äî –º–µ–Ω—å—à–µ (<)
- `lte` ‚Äî –º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ (‚â§)

---

### –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (bool query)

```http
GET students/_search
{
  "query": {
    "bool": {
      "must": [
        { "match": { "name": "–∏–≤–∞–Ω" } },
        { "range": { "gpa": { "gte": 4.0 } } },
        { "term": { "grad_year": 2023 }}
      ]
    }
  }
}
```

**–õ–æ–≥–∏–∫–∞:**
- `must` ‚Äî –ò (AND)
- `should` ‚Äî –ò–õ–ò (OR)
- `must_not` ‚Äî –ù–ï (NOT)
- `filter` ‚Äî —Ñ–∏–ª—å—Ç—Ä –±–µ–∑ —Å–∫–æ—Ä–∞

**–°–ª–µ–Ω–≥:** "–ë—É–ª–µ–≤—ã–π –∑–∞–ø—Ä–æ—Å" = –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —É—Å–ª–æ–≤–∏–π.

---

## Query DSL ‚Äî —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤

### –¢–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤

#### 1Ô∏è‚É£ –õ–∏—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (Leaf queries)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–ª—è–º
- –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
- –ù–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –¥—Ä—É–≥–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–¢–∏–ø—ã:**

**1.1 –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–µ (Full-text):**
- `match` ‚Äî –ø–æ–∏—Å–∫ —Å –∞–Ω–∞–ª–∏–∑–æ–º —Ç–µ–∫—Å—Ç–∞
- `match_phrase` ‚Äî –ø–æ–∏—Å–∫ —Ñ—Ä–∞–∑—ã
- `multi_match` ‚Äî –ø–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º

**1.2 –¢–µ—Ä–º–∏–Ω–æ-—É—Ä–æ–≤–Ω–µ–≤—ã–µ (Term-level):**
- `term` ‚Äî —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
- `terms` ‚Äî —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å –æ–¥–Ω–∏–º –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π
- `range` ‚Äî –¥–∏–∞–ø–∞–∑–æ–Ω
- `exists` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ–ª—è

**1.3 –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ (Geo):**
- `geo_distance` ‚Äî –ø–æ–∏—Å–∫ –≤ —Ä–∞–¥–∏—É—Å–µ
- `geo_bounding_box` ‚Äî –ø–æ–∏—Å–∫ –≤ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–µ

**1.4 –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ:**
- `more_like_this` ‚Äî –ø–æ—Ö–æ–∂–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- `script` ‚Äî –∑–∞–ø—Ä–æ—Å—ã —Å–æ —Å–∫—Ä–∏–ø—Ç–∞–º–∏

---

#### 2Ô∏è‚É£ –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (Compound queries)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –û–±—ä–µ–¥–∏–Ω—è—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤
- –£–ø—Ä–∞–≤–ª—è—é—Ç –ª–æ–≥–∏–∫–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–¢–∏–ø—ã:**
- `bool` ‚Äî –±—É–ª–µ–≤–∞ –ª–æ–≥–∏–∫–∞ (AND, OR, NOT)
- `dis_max` ‚Äî –ø–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º (–±–µ—Ä—ë—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Å–∫–æ—Ä)
- `constant_score` ‚Äî —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
- `function_score` ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —Å–∫–æ—Ä–∏–Ω–≥–∞

---

### –†–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã (–¥–æ—Ä–æ–≥–∏–µ)

**–¢–∏–ø—ã:**
- `fuzzy` ‚Äî –Ω–µ—á—ë—Ç–∫–∏–π –ø–æ–∏—Å–∫
- `prefix` ‚Äî –ø–æ–∏—Å–∫ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É
- `regexp` ‚Äî —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
- `wildcard` ‚Äî –ø–æ–∏—Å–∫ —Å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏

**–ó–∞—â–∏—Ç–∞ –æ—Ç –¥–æ—Ä–æ–≥–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤:**
```http
PUT _cluster/settings
{
  "persistent": {
    "search.allow_expensive_queries": false
  }
}
```

**–°–ª–µ–Ω–≥:** "–î–æ—Ä–æ–≥–æ–π –∑–∞–ø—Ä–æ—Å" = –∑–∞–ø—Ä–æ—Å, –∂—Ä—É—â–∏–π –º–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–æ–≤.

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞

### –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ñ–∏–ª—å—Ç—Ä–∞ (Filter context)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ë–∏–Ω–∞—Ä–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç (–î–∞/–ù–µ—Ç)
- –ù–µ –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è
- –ë—ã—Å—Ç—Ä–µ–µ, —á–µ–º query context

**–ü—Ä–∏–º–µ—Ä:**
```http
GET students/_search
{
  "query": {
    "bool": {
      "filter": [
        { "term": { "honors": true }},
        { "range": { "graduation_year": { "gte": 2020, "lte": 2022 }}}
      ]
    }
  }
}
```

**–ê–Ω–∞–ª–æ–≥–∏—è:** –§–∏–ª—å—Ç—Ä = —Å–∏—Ç–æ (–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∏–ª–∏ –Ω–µ—Ç).

---

### –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–ø—Ä–æ—Å–∞ (Query context)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –í—ã—á–∏—Å–ª—è–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å (_score)
- –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
- –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —Ñ–∏–ª—å—Ç—Ä–∞

**–ü—Ä–∏–º–µ—Ä:**
```http
GET shakespeare/_search
{
  "query": {
    "match": {
      "text_entry": "long live king"
    }
  }
}
```

**–ê–Ω–∞–ª–æ–≥–∏—è:** –ó–∞–ø—Ä–æ—Å = —ç–∫–∑–∞–º–µ–Ω (–æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–∞).

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–µ—Ä–º–æ–≤—ã—Ö –∏ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –¢–µ—Ä–º–æ–≤—ã–µ (term-level) | –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–µ (full-text) |
|----------------|----------------------|---------------------------|
| **–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä** | –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |
| **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å** | –ù–µ —Å–æ—Ä—Ç–∏—Ä—É–µ—Ç | –°–æ—Ä—Ç–∏—Ä—É–µ—Ç –ø–æ _score |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –¢–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (ID, –¥–∞—Ç—ã) | –¢–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è |
| **–ü—Ä–∏–º–µ—Ä** | `term`, `range` | `match`, `match_phrase` |

---

### –ü—Ä–∏–º–µ—Ä 1: –ü–æ–∏—Å–∫ —Ñ—Ä–∞–∑—ã

**–¢–µ—Ä–º–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–µ –Ω–∞–π–¥—ë—Ç):**
```http
GET shakespeare/_search
{
  "query": {
    "term": {
      "text_entry": "To be, or not to be"
    }
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 0 –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∏—â–µ—Ç —Ç–æ—á–Ω—É—é —Ñ—Ä–∞–∑—É –±–µ–∑ –∞–Ω–∞–ª–∏–∑–∞).

**–ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–∞–π–¥—ë—Ç):**
```http
GET shakespeare/_search
{
  "query": {
    "match": {
      "text_entry": "To be, or not to be"
    }
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 10000+ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ñ—Ä–∞–∑—É).

---

### –ü—Ä–∏–º–µ—Ä 2: –ü–æ–∏—Å–∫ —Ç–æ—á–Ω–æ–≥–æ —Ç–µ—Ä–º–∏–Ω–∞

```http
GET shakespeare/_search
{
  "query": {
    "term": {
      "speaker": "HAMLET"
    }
  }
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 1582 –¥–æ–∫—É–º–µ–Ω—Ç–∞.

**–í–∞–∂–Ω–æ!** –ü–æ–∏—Å–∫ –ø–æ "Hamlet" –Ω–µ –¥–∞—Å—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ–ª–µ `speaker` ‚Äî keyword, —Ä–µ–≥–∏—Å—Ç—Ä –≤–∞–∂–µ–Ω).

---

## –¢–µ—Ä–º–∏–Ω–æ-—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã (Term-level queries)

### –¢–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `term` | –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ |
| `terms` | –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å –æ–¥–Ω–∏–º –∏–∑ –∑–Ω–∞—á–µ–Ω–∏–π |
| `terms_set` | –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π |
| `ids` | –ü–æ–∏—Å–∫ –ø–æ ID |
| `range` | –î–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π |
| `prefix` | –ü–æ–∏—Å–∫ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É |
| `exists` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ–ª—è |
| `fuzzy` | –ù–µ—á—ë—Ç–∫–∏–π –ø–æ–∏—Å–∫ (–æ–ø–µ—á–∞—Ç–∫–∏) |
| `wildcard` | –ü–æ–∏—Å–∫ —Å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–æ—á–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏ |
| `regexp` | –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è |

---

### –ü—Ä–∏–º–µ—Ä—ã

**–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ:**
```http
GET products/_search
{
  "query": {
    "term": {
      "product_code": "ABC-123"
    }
  }
}
```

**–î–∏–∞–ø–∞–∑–æ–Ω:**
```http
GET logs/_search
{
  "query": {
    "range": {
      "timestamp": {
        "gte": "2023-01-01",
        "lte": "2023-12-31"
      }
    }
  }
}
```

**–ù–µ—á—ë—Ç–∫–∏–π –ø–æ–∏—Å–∫ (–æ–ø–µ—á–∞—Ç–∫–∏):**
```http
GET contacts/_search
{
  "query": {
    "fuzzy": {
      "last_name": {
        "value": "Smith",
        "fuzziness": 2
      }
    }
  }
}
```

**–°–ª–µ–Ω–≥:** "–§–∞–∑–∑–∏ –ø–æ–∏—Å–∫" = –ø–æ–∏—Å–∫ —Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏.

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (Best Practices)

### ‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å

1. **–î–ª—è —Ç–æ—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π `keyword` –∏ —Ç–µ—Ä–º–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
2. **–î–ª—è —Ç–µ–∫—Å—Ç–∞** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π `text` –∏ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã
3. **–î–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π filter context (–∫—ç—à–∏—Ä—É–µ—Ç—Å—è)
4. **–î–ª—è –ø–æ–∏—Å–∫–∞** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–π query context (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å)
5. **–†–∞–∑–º–µ—Ä —à–∞—Ä–¥–∞** ‚Üí 10-50 –ì–ë
6. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Üí –≤–∫–ª—é—á–∏ slow logs –¥–ª—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚ùå –ß–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å

1. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π** —Ç–µ—Ä–º–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è `text` –ø–æ–ª–µ–π
2. **–ù–µ —Å–æ–∑–¥–∞–≤–∞–π** —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —à–∞—Ä–¥–æ–≤ (—É–±—å—ë—à—å –∫–ª–∞—Å—Ç–µ—Ä)
3. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π** –¥–æ—Ä–æ–≥–∏–µ –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
4. **–ù–µ –∑–∞–±—ã–≤–∞–π** –ø—Ä–æ —Ä–µ–ø–ª–∏–∫–∏ (–æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å)

---

## –ì–ª–æ—Å—Å–∞—Ä–∏–π (—Å–ª–µ–Ω–≥ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞)

- **–®–∞—Ä–¥–∏—Ç—å** ‚Äî –¥–µ–ª–∏—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–∞ —á–∞—Å—Ç–∏
- **–°–∫–æ—Ä** ‚Äî —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞
- **–ë—É–ª–µ–≤—ã–π –∑–∞–ø—Ä–æ—Å** ‚Äî –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —É—Å–ª–æ–≤–∏–π (AND, OR, NOT)
- **–§–∞–∑–∑–∏ –ø–æ–∏—Å–∫** ‚Äî –ø–æ–∏—Å–∫ —Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏
- **–î–æ—Ä–æ–≥–æ–π –∑–∞–ø—Ä–æ—Å** ‚Äî —Ä–µ—Å—É—Ä—Å–æ—ë–º–∫–∏–π –∑–∞–ø—Ä–æ—Å
- **–ó–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ** ‚Äî –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –∏–Ω–¥–µ–∫—Å
- **–ê–ø–¥–µ–π—Ç–∏—Ç—å** ‚Äî –æ–±–Ω–æ–≤–ª—è—Ç—å
- **–ú–∞–ø–ø–∏–Ω–≥** ‚Äî —Å—Ö–µ–º–∞ –ø–æ–ª–µ–π –∏–Ω–¥–µ–∫—Å–∞
- **–ö–ª–∞—Å—Ç–µ—Ä —É–ø–∞–ª** ‚Äî —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
- **–†–µ–ø–ª–∏–∫–∞** ‚Äî –∫–æ–ø–∏—è —à–∞—Ä–¥–∞

---

## –ò—Ç–æ–≥–∏

OpenSearch ‚Äî —ç—Ç–æ –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏:

1. **–î–æ–∫—É–º–µ–Ω—Ç** ‚Äî –µ–¥–∏–Ω–∏—Ü–∞ –¥–∞–Ω–Ω—ã—Ö (JSON)
2. **–ò–Ω–¥–µ–∫—Å** ‚Äî –∫–æ–ª–ª–µ–∫—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
3. **–®–∞—Ä–¥** ‚Äî —á–∞—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞
4. **–†–µ–ø–ª–∏–∫–∞** ‚Äî –∫–æ–ø–∏—è —à–∞—Ä–¥–∞
5. **Query DSL** ‚Äî —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–æ–≤
6. **Filter vs Query** ‚Äî —Ñ–∏–ª—å—Ç—Ä –±—ã—Å—Ç—Ä–µ–µ, –∑–∞–ø—Ä–æ—Å —É–º–Ω–µ–µ

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞ –ø–æ–ª—è!

üöÄ **–£–¥–∞—á–∏ –≤ –æ—Å–≤–æ–µ–Ω–∏–∏ OpenSearch!**
