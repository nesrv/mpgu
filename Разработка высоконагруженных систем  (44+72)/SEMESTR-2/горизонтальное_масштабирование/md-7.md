ะคะธะฝะฐะป ๐ฅ
ะะธะถะต โ **ะกัะตะฝะฐัะธะน 7** ะบะฐะบ ะฟะพะปะฝะพัะตะฝะฝัะน **ััะตะฑะฝัะน ะผะธะฝะธ-ะฟัะพะตะบั** โ ะธัะพะณ ะฒัะตะณะพ ะบัััะฐ. ะญัะพ ะฝะต ะฟัะพััะพ ะทะฐะฝััะธะต, ะฐ  **ะฟัะพะตะบัะฝะฐั ัะฐะฑะพัะฐ** , ะบะพัะพัะฐั ัะพัะผะธััะตั ะผััะปะตะฝะธะต DevOps/Platform-ะธะฝะถะตะฝะตัะฐ.

---

# ะกัะตะฝะฐัะธะน 7

# ะัะพะณะพะฒัะน ะผะธะฝะธ-ะฟัะพะตะบั

## ยซะััะพะบะพะฝะฐะณััะถะตะฝะฝะพะต ะฒะตะฑ-ะฟัะธะปะพะถะตะฝะธะต ะฒ Docker Composeยป

---

## ๐ฏ ะฆะตะปั ะฟัะพะตะบัะฐ

ะกะพะฑัะฐัั  **ะฟะพะปะฝะพัะตะฝะฝัั ะฐััะธัะตะบัััั ัะตัะฒะธัะฐ** , ะบะพัะพัะฐั ะฒะบะปััะฐะตั:

* ะพัะบะตัััะฐัะธั ัะตัะฒะธัะพะฒ
* ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต
* ะฑะฐะปะฐะฝัะธัะพะฒะบั ะฝะฐะณััะทะบะธ
* ัะฟัะฐะฒะปะตะฝะธะต ัะตััััะฐะผะธ
* ะพัะบะฐะทะพัััะพะนัะธะฒะพััั
* ะผะพะฝะธัะพัะธะฝะณ ัะพััะพัะฝะธั

๐ ะฝะต ะฟัะพััะพ ยซะบะพะฝัะตะนะฝะตััยป, ะฐ **ัะธััะตะผะฝะพะต ะผััะปะตะฝะธะต**

---

# ๐ง ะะพะฝัะตะฟัะธั ะฟัะพะตะบัะฐ

> ะกััะดะตะฝัั ะผะพะดะตะปะธัััั ะธะฝััะฐััััะบัััั ะฟัะพะดะฐะบัะฝ-ัะตัะฒะธัะฐ

**ะััะธัะตะบัััะฐ:**

```
Client
   โ
Nginx (Load Balancer / Reverse Proxy)
   โ
Backend (ัะตะฟะปะธะบะธ, ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต)
   โ
Database (PostgreSQL)
```

---

# ๐งฑ ะััะธัะตะบัััะฝัะต ะบะพะผะฟะพะฝะตะฝัั

## ะะฑัะทะฐัะตะปัะฝัะต ัะตัะฒะธัั:

1. **Nginx**
   * ัะพัะบะฐ ะฒัะพะดะฐ
   * ะฑะฐะปะฐะฝัะธัะพะฒะบะฐ ะฝะฐะณััะทะบะธ
2. **Backend**
   * 3+ ัะตะฟะปะธะบะธ
   * REST API
3. **Database**
   * PostgreSQL / Redis
4. **Docker Compose**
   * ะพัะบะตัััะฐัะธั
5. **Healthcheck**
6. **Restart policy**
7. **Resource limits**

---

# ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```text
highload-app/
โโโ docker-compose.yml
โโโ .env
โโโ nginx/
โ   โโโ nginx.conf
โโโ backend/
โ   โโโ app.py
โ   โโโ Dockerfile
โโโ db/
โ   โโโ init.sql
โโโ README.md
```

---

# ๐ ะขะตัะฝะธัะตัะบะพะต ะทะฐะดะฐะฝะธะต (ะขะ)

## Backend ะดะพะปะถะตะฝ:

* ะธะผะตัั endpoint `/`
* ะธะผะตัั endpoint `/health`
* ะธะผะตัั endpoint `/cpu`
* ะธะผะตัั endpoint `/memory`
* ะฒัะฒะพะดะธัั `hostname ะบะพะฝัะตะนะฝะตัะฐ`
* ะฟะพะดะบะปััะฐัััั ะบ ะะ
* ะฑััั ะผะฐัััะฐะฑะธััะตะผัะผ

---

## Nginx ะดะพะปะถะตะฝ:

* ะฑััั load balancer
* ะธัะฟะพะปัะทะพะฒะฐัั upstream
* ะฟัะพะบัะธัะพะฒะฐัั ะฝะฐ backend
* ัะฐะฑะพัะฐัั ะบะฐะบ ะตะดะธะฝััะฒะตะฝะฝะฐั ัะพัะบะฐ ะฒัะพะดะฐ

---

## Database:

* ะพัะดะตะปัะฝัะน ะบะพะฝัะตะนะฝะตั
* volume ะดะปั ะดะฐะฝะฝัั
* ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะธะท `.env`

---

## Docker Compose ะดะพะปะถะตะฝ ะฒะบะปััะฐัั:

### ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต:

```bash
--scale backend=3
```

### ะะธะผะธัั ัะตััััะพะฒ:

```yaml
deploy:
  resources:
    limits:
      cpus: "0.5"
      memory: 256M
```

### ะัะบะฐะทะพัััะพะนัะธะฒะพััั:

```yaml
restart: on-failure
```

### Healthcheck:

```yaml
healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost:5000/health"]
```

---

# ๐งช ะคัะฝะบัะธะพะฝะฐะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

| ะะพะผะฟะพะฝะตะฝั | ะขัะตะฑะพะฒะฐะฝะธะต                  |
| ------------------ | ------------------------------------- |
| Backend            | ะผะฐัััะฐะฑะธััะตะผัะน          |
| Nginx              | ะฑะฐะปะฐะฝัะธัะพะฒะบะฐ              |
| DB                 | persistence                           |
| Compose            | orchestration                         |
| Restart            | ะฐะฒัะพ-ะฒะพัััะฐะฝะพะฒะปะตะฝะธะต |
| Healthcheck        | ะผะพะฝะธัะพัะธะฝะณ                  |
| Limits             | ะทะฐัะธัะฐ ัะตััััะพะฒ         |

---

# ๐งญ ะญัะฐะฟั ะฒัะฟะพะปะฝะตะฝะธั ะฟัะพะตะบัะฐ

## ะญัะฐะฟ 1 โ ะััะธัะตะบัััะฐ

ะกััะดะตะฝัั ะฟัะพะตะบัะธัััั ััะตะผั:

```
Client โ Nginx โ Backend replicas โ DB
```

---

## ะญัะฐะฟ 2 โ Backend

* ะบะพะฝัะตะนะฝะตัะธะทะฐัะธั
* endpoints
* ะปะพะณะธัะพะฒะฐะฝะธะต hostname

---

## ะญัะฐะฟ 3 โ Nginx

* upstream
* proxy_pass
* round-robin

---

## ะญัะฐะฟ 4 โ Docker Compose

* ะพัะบะตัััะฐัะธั
* ัะตัะธ
* volumes
* env

---

## ะญัะฐะฟ 5 โ ะะฐะดัะถะฝะพััั

* restart policy
* healthcheck
* resource limits

---

## ะญัะฐะฟ 6 โ ะขะตััะธัะพะฒะฐะฝะธะต

* ะฝะฐะณััะทะบะฐ
* ะฟะฐะดะตะฝะธั ะบะพะฝัะตะนะฝะตัะพะฒ
* OOM
* ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต

---

# ๐ง ะะตะผะพะฝัััะฐัะธั ะฝะฐ ะทะฐัะธัะต ะฟัะพะตะบัะฐ

ะกััะดะตะฝั ะดะพะปะถะตะฝ ะฟะพะบะฐะทะฐัั:

### 1. ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต:

```bash
docker compose up --scale backend=5
```

### 2. ะะฐะปะฐะฝัะธัะพะฒะบั:

```bash
curl localhost:8080
```

(ัะฐะทะฝัะต hostname)

### 3. ะัะบะฐะท:

```bash
docker stop backend-2
```

(ัะตัะฒะธั ัะฐะฑะพัะฐะตั)

### 4. ะะตัะตะทะฐะฟััะบ:

```bash
curl /crash
```

(ะบะพะฝัะตะนะฝะตั ะฒะพัััะฐะฝะฐะฒะปะธะฒะฐะตััั)

### 5. ะะตััััั:

```bash
docker stats
```

---

# ๐ README.md (ะพะฑัะทะฐัะตะปัะฝัะต ัะฐะทะดะตะปั)

```md
# Highload App

## Architecture
ะพะฟะธัะฐะฝะธะต

## Services
ะพะฟะธัะฐะฝะธะต ัะตัะฒะธัะพะฒ

## Run
docker compose up --build --scale backend=3

## Endpoints
/  
/health  
/cpu  
/memory  

## Fault tolerance
ะพะฟะธัะฐะฝะธะต restart + healthcheck

## Load balancing
ะพะฟะธัะฐะฝะธะต nginx
```

---

# ๐ ะัะธัะตัะธะธ ะพัะตะฝะบะธ

| ะัะธัะตัะธะน               | ะะฐะปะปั    |
| ------------------------------ | ------------- |
| ะััะธัะตะบัััะฐ         | 20            |
| Docker Compose                 | 20            |
| ะะฐัััะฐะฑะธัะพะฒะฐะฝะธะต | 15            |
| ะะฐะปะฐะฝัะธัะพะฒะบะฐ       | 15            |
| ะะฐะดัะถะฝะพััั           | 15            |
| README                         | 10            |
| ะะฐัะธัะฐ                   | 5             |
| **ะะขะะะ**           | **100** |

---

# ๐งช ะฃัะพะฒะฝะธ ัะปะพะถะฝะพััะธ

### ะะฐะทะพะฒัะน

* backend + nginx
* ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต
* ะฑะฐะปะฐะฝัะธัะพะฒะบะฐ

### ะกัะตะดะฝะธะน

* ะะ
* healthcheck
* limits

### ะัะพะดะฒะธะฝัััะน โญ

* ะปะพะณะธัะพะฒะฐะฝะธะต
* ัะฐะทะฝัะต ะปะธะผะธัั
* ะดะตะณัะฐะดะฐัะธั ัะตัะฒะธัะฐ
* graceful shutdown

---

# ๐ง ะะฑัะฐะทะพะฒะฐัะตะปัะฝัะน ัััะตะบั

ะะพัะปะต ะฟัะพะตะบัะฐ ัััะดะตะฝั:

* ะฟะพะฝะธะผะฐะตั **ะฐััะธัะตะบัััั ัะตัะฒะธัะพะฒ**
* ะฟะพะฝะธะผะฐะตั **ะพัะบะตัััะฐัะธั**
* ะฟะพะฝะธะผะฐะตั **ะฑะฐะปะฐะฝัะธัะพะฒะบั**
* ะฒะธะดะธั ะพะณัะฐะฝะธัะตะฝะธั Compose
* ะณะพัะพะฒ ะบ Kubernetes ะบะพะฝัะตะฟััะฐะปัะฝะพ

---

# ๐จโ๐ซ ะะตัะพะดะธัะตัะบะธะต ัะตะบะพะผะตะฝะดะฐัะธะธ

* ะทะฐัะธัะฐ ะบะฐะบ  **ะฐััะธัะตะบัััะฝัะน ัะฐะทะฑะพั** , ะฐ ะฝะต ะบะพะด-ัะตะฒัั
* ะฒะพะฟัะพัั ะฝะต ยซััะพ ะฝะฐะฟะธัะฐะฝะพยป, ะฐ:
  * ะฟะพัะตะผั ัะฐะบ?
  * ััะพ ะฑัะดะตั ะตัะปะธ ัะฟะฐะดัั?
  * ะณะดะต bottleneck?
  * ััะพ ะผะฐัััะฐะฑะธััะตััั?

---

# ๐ฏ ะะปะฐะฒะฝัะน ัะตะทัะปััะฐั ะบัััะฐ

ะกััะดะตะฝั ะฝะฐัะธะฝะฐะตั ะผััะปะธัั ะฝะต ะบะฐะบ:

> ยซะฏ ะฝะฐะฟะธัะฐะป ะฟัะธะปะพะถะตะฝะธะตยป

ะ ะบะฐะบ:

> ยซะฏ ัะฟัะพะตะบัะธัะพะฒะฐะป ัะธััะตะผัยป ๐งโ๏ธ

---

ะัะปะธ ัะพัะตัั โ ะผะพะณั ะพัะพัะผะธัั ััะพ ะบะฐะบ:

* ๐ **ััะตะฑะฝะพะต ะฟะพัะพะฑะธะต (PDF ััััะบัััะฐ)**
* ๐งช **ะผะตัะพะดะธัะบั ะดะปั ะฟัะตะฟะพะดะฐะฒะฐัะตะปั**
* ๐งโ๐ **ัััะดะตะฝัะตัะบะธะน ะฒะฐัะธะฐะฝั ะขะ**
* ๐ **ัะบะทะฐะผะตะฝะฐัะธะพะฝะฝัะน ะฑะธะปะตั**
* ๐ **ัะฐะฑะปะพะฝ ัะตะฟะพะทะธัะพัะธั**

ะฅะพัะตัั ะฒะตััะธั ะดะปั ะฒัะทะฐ, ะบัััะพะฒ ะธะปะธ ะบะพัะฟะพัะฐัะธะฒะฝะพะณะพ ะพะฑััะตะฝะธั?
