```markdown

Обзор инструментов CI/CD
В предыдущих уроках мы разобрались, что такое CI/CD и зачем это нужно. Теперь пришло время познакомиться с конкретными инструментами.

Категории инструментов CI/CD
Все инструменты CI/CD можно разделить на несколько категорий по разным признакам. Понимание этих категорий поможет вам быстрее сориентироваться в многообразии решений.

По способу развёртывания инструменты делятся на облачные (SaaS) и self-hosted. Облачные решения работают на серверах провайдера — вы просто регистрируетесь и начинаете использовать. Self-hosted решения вы устанавливаете на свои сервера и полностью контролируете.

По модели оплаты есть опенсорс решения (бесплатные, с открытым кодом), freemium (базовая версия бесплатна, расширенные возможности платные) и полностью коммерческие продукты.

По интеграции с системами контроля версий выделяют встроенные решения (GitLab CI, GitHub Actions — часть платформы) и независимые (Jenkins, TeamCity — работают с любыми Git-серверами).


![alt text](image-7.png)


enkins — ветеран CI/CD


Jenkins — это дедушка всех CI/CD инструментов. Появился в 2011 году и до сих пор остаётся одним из самых популярных решений, особенно в энтерпрайзе. Полностью опенсорсный, написан на Java, работает везде, где есть JVM.

 

Главное преимущество Jenkins — его гибкость. Существует более 1800 плагинов для интеграции практически с любым инструментом, который используется в разработке. Нужна интеграция с экзотической системой мониторинга из 2005 года? Скорее всего, для Jenkins есть плагин.

Но эта гибкость — одновременно и недостаток. Jenkins требует значительных усилий для настройки и поддержки. Из коробки вы получаете довольно примитивный интерфейс и базовый функционал. Чтобы собрать полноценную CI/CD систему, придётся установить десятки плагинов, настроить их взаимодействие, следить за обновлениями и совместимостью.

В российских реалиях Jenkins популярен в крупных компаниях и банках. Во-первых, он бесплатный. Во-вторых, его можно полностью изолировать от внешнего мира — никаких данных наружу не утекает. В-третьих, есть большое сообщество и много специалистов, которые умеют с ним работать.

GitLab CI — всё в одном
GitLab CI — это встроенная в GitLab система CI/CD. Если ваш код уже в GitLab, то CI/CD получаете бесплатно, без дополнительных настроек. Просто добавляете файл .gitlab-ci.yml в репозиторий, и пайплайн начинает работать.

Главное преимущество GitLab CI — тесная интеграция со всей экосистемой GitLab. Код-ревью, управление задачами, CI/CD, мониторинг, безопасность — всё в одном месте. Не нужно настраивать интеграции между разными системами, всё работает из коробки.

GitLab предлагает несколько вариантов использования. GitLab.com — облачная версия с бесплатным тарифом (400 минут CI в месяц). GitLab Community Edition — бесплатная self-hosted версия со всеми базовыми возможностями. GitLab Enterprise Edition — расширенная версия с продвинутыми функциями для больших команд.

В России GitLab CI очень популярен. Многие компании используют self-hosted версию, которую можно развернуть в своей инфраструктуре. Это решает вопросы с безопасностью данных и независимостью от внешних сервисов. При этом Community Edition покрывает потребности большинства команд.

GitHub Actions


GitHub Actions появился относительно недавно (2019 год), но быстро набрал популярность. Если код на GitHub, это самый простой способ добавить CI/CD — никаких дополнительных настроек не требуется.

Особенность GitHub Actions — маркетплейс с тысячами готовых экшенов. 

 

Бесплатный план включает 2000 минут в месяц для приватных репозиториев и неограниченное использование для публичных. Для опенсорс проектов это идеальный вариант — мощная CI/CD система совершенно бесплатно.

Но в России с GitHub Actions есть проблемы. Из-за санкций могут быть сложности с оплатой платных планов. Некоторые компании опасаются хранить код на американских серверах. Self-hosted версии GitHub Actions не существует — только облако. Поэтому в российских компаниях GitHub Actions чаще используется для опенсорс проектов, чем для коммерческой разработки.

TeamCity
TeamCity — продукт от JetBrains, создателей IntelliJ IDEA, PyCharm и других популярных IDE. Это мощная CI/CD система с фокусом на удобство использования и производительность.

 

Главная фишка TeamCity — умная оптимизация сборок. Система анализирует историю изменений и тестов, чтобы запускать только необходимые проверки. Изменили один модуль? TeamCity запустит только тесты, связанные с этим модулем. Это экономит время и ресурсы.

TeamCity предлагает удобный визуальный конфигуратор пайплайнов. Не нужно писать YAML или Groovy — всё настраивается через веб-интерфейс. Для сложных сценариев есть Kotlin DSL — типизированный язык конфигурации с автодополнением в IDE.

Модель лицензирования TeamCity довольно щедрая. Бесплатная версия позволяет использовать 3 агента сборки и 100 конфигураций. Этого хватает небольшим командам и стартапам. JetBrains — компания с российскими корнями (хотя юридически зарегистрирована в Чехии), поэтому их продукты традиционно популярны в России.

Разные облачные сервисы
CircleCI, Travis CI, Drone CI, Codeship — это облачные CI/CD сервисы, которые берут на себя всю инфраструктуру. Вы подключаете репозиторий, добавляете конфигурацию, и всё работает. Не нужно думать о серверах, обновлениях, масштабировании.

Эти сервисы отлично подходят для стартапов и небольших команд. Быстрый старт, предсказуемые расходы, никакой головной боли с инфраструктурой. Многие предлагают щедрые бесплатные планы для опенсорс проектов.

Однако в российских реалиях с ними есть сложности. Во-первых, санкции — некоторые сервисы прямо запрещены для российских пользователей, с другими проблемы с оплатой. Во-вторых, безопасность — не все компании готовы отправлять свой код на зарубежные сервера. В-третьих, зависимость от интернета — если связь с облаком прервётся, разработка остановится.

ArgoCD и GitOps инструменты
ArgoCD — это декларативный инструмент непрерывной доставки для Kubernetes, который реализует GitOps подход. Если традиционные CI/CD инструменты "проталкивают" изменения в кластер, то ArgoCD вытягивает их из Git-репозитория, постоянно синхронизируя желаемое состояние с фактическим.

GitOps — это методология, где Git становится единственным источником истины для инфраструктуры и приложений. Вся конфигурация хранится в Git, любые изменения происходят через коммиты, а специальный оператор в кластере следит за репозиторием и применяет изменения автоматически.

Традиционный CI/CD vs GitOps:


Традиционный подход (Push):
Developer → Git → CI/CD → Push → Kubernetes
         |
         └─ CI/CD имеет доступ к кластеру


GitOps подход (Pull):
Developer → Git ← ArgoCD → Apply → Kubernetes
         |
         └─ Git единственный источник истины
         └─ ArgoCD живёт в кластере

                  
Главные преимущества ArgoCD — это повышенная безопасность (CI/CD системе не нужен доступ к продакшн-кластеру), полная история изменений в Git, автоматическая синхронизация и самовосстановление при расхождениях. Если кто-то вручную изменит что-то в кластере, ArgoCD автоматически вернёт состояние к тому, что описано в Git.

ArgoCD предоставляет удобный веб-интерфейс для визуализации приложений в кластере. Можно видеть статус всех ресурсов, историю синхронизаций, различия между Git и кластером.

В российских компаниях, активно использующих Kubernetes, ArgoCD становится всё популярнее. Он полностью опенсорсный, может работать в изолированной инфраструктуре, не требует внешних зависимостей. Многие компании используют связку GitLab CI для сборки образов и ArgoCD для деплоя в Kubernetes.

Кроме ArgoCD, в экосистеме GitOps есть и другие инструменты. Flux — более легковесная, но с меньшим функционалом. Rancher Fleet — GitOps решение для мультикластерных развёртываний. Для российских компаний важно, что все эти инструменты open source и могут работать полностью в своей инфраструктуре.

Типичный пайплайн с ArgoCD:

1. Разработчик пушит код в Git
2. GitLab CI/Jenkins собирает и тестирует
3. Создаётся Docker-образ, пушится в registry
4. Обновляется манифест в Git (новая версия образа)
5. ArgoCD видит изменение в Git
6. ArgoCD применяет изменения в Kubernetes
7. Приложение обновляется без прямого доступа CI к кластеру

                  
Сравнение ключевых характеристик
Каждый инструмент имеет свои сильные и слабые стороны. Давайте сравним их по ключевым параметрам, важным для выбора.

Простота начала работы — насколько быстро можно запустить первый пайплайн. GitHub Actions и GitLab CI лидируют здесь — если код уже на платформе, достаточно добавить один файл конфигурации. Jenkins требует установки, настройки плагинов, создания джоб — это может занять дни.

Гибкость настройки — возможность реализовать нестандартные сценарии. Jenkins здесь вне конкуренции благодаря огромному количеству плагинов. GitLab CI и GitHub Actions покрывают большинство типовых сценариев, но для чего-то экзотического придётся писать собственные скрипты.

Стоимость владения включает не только лицензии, но и затраты на инфраструктуру и поддержку. Опенсорс решения (Jenkins, GitLab CE) не требуют оплаты лицензий, но нужны сервера и администратор. Облачные сервисы берут фиксированную плату, но не требуют администрирования.

Масштабируемость — способность справляться с ростом нагрузки. Облачные сервисы масштабируются автоматически, но это стоит денег. Self-hosted решения требуют ручного масштабирования, зато вы полностью контролируете расходы.

Экосистема и интеграции
CI/CD инструмент не живёт в вакууме — он должен интегрироваться с другими системами в вашем технологическом стеке. Рассмотрим, как разные инструменты работают с популярными сервисами.

Интеграция с системами контроля версий критически важна. Jenkins работает с любыми Git-серверами через плагины, но требует настройки. GitLab CI и GitHub Actions встроены в свои платформы, но ограничены ими.

Работа с контейнерами стала стандартом в современной разработке. GitLab CI и GitHub Actions нативно поддерживают Docker, можно запускать пайплайны в контейнерах без дополнительных настроек. Jenkins требует установки Docker плагина. TeamCity поддерживает Docker, но настройка не самая очевидная.

Уведомления и мониторинг помогают команде быть в курсе статуса сборок. Все инструменты поддерживают базовые уведомления (email, вебхуки). Jenkins имеет плагины для всего. GitLab и GitHub Actions — встроенные интеграции с популярными сервисами. TeamCity требует настройки через вебхуки.

Деплой и оркестрация — финальная стадия CI/CD пайплайна. Jenkins через плагины работает с любыми платформами деплоя. GitLab имеет встроенную поддержку Kubernetes и популярных облачных платформ. GitHub Actions использует экшены для разных платформ. TeamCity интегрируется с облаками через плагины и REST API.

Производительность и оптимизация
Скорость выполнения пайплайнов напрямую влияет на продуктивность команды. Разные инструменты предлагают свои подходы к оптимизации.

Параллельное выполнение джоб позволяет значительно ускорить пайплайн. GitLab CI и GitHub Actions поддерживают это из коробки — просто указываете, какие джобы могут выполняться параллельно. В Jenkins нужен пайплайн плагин и правильная конфигурация агентов. TeamCity автоматически распараллеливает независимые сборки.

Кеширование зависимостей экономит время на повторную установку пакетов. GitLab CI имеет встроенный механизм кеширования с гибкими настройками. GitHub Actions предлагает готовые экшены для кеширования. Jenkins требует настройки через плагины или скрипты. TeamCity имеет умное кеширование артефактов между сборками.

Инкрементальные сборки — запуск только необходимых проверок на основе изменений в коде. TeamCity лидирует здесь со своей системой анализа зависимостей. GitLab CI позволяет настроить правила only/except для контроля запуска джоб. В Jenkins это реализуется через плагины или скрипты.

Безопасность и соответствие требованиям
В эпоху утечек данных и кибератак безопасность CI/CD инфраструктуры критически важна. Разные инструменты предлагают разные уровни защиты.

Self-hosted решения (Jenkins, GitLab CE/EE, TeamCity) дают полный контроль над данными. Код не покидает вашу инфраструктуру, вы сами отвечаете за безопасность. Это важно для компаний с жёсткими требованиями или работающих с гостайной.

В следующем уроке мы подробно разберём, как выбрать подходящий инструмент именно для проекта, учитывая размер команды, технологический стек, бюджет и другие факторы.


Как выбрать инструмент для своего проекта?
После обзора инструментов CI/CD у вас наверняка возник вопрос: а какой же выбрать для конкретного проекта? Универсального ответа нет — каждая команда и проект уникальны. В этом уроке мы разберём, какие факторы влияют на выбор, рассмотрим типовые сценарии и поможем определиться с инструментом для старта.

Факторы выбора CI/CD инструмента
Выбор CI/CD инструмента — это не техническое, а стратегическое решение. Оно повлияет на процессы разработки на годы вперёд. Поэтому важно учесть все факторы, а не только технические характеристики.

Размер и структура команды — первое, на что стоит обратить внимание. Для команды из 3 человек избыточно разворачивать Jenkins с десятками плагинов. А для команды из 100 разработчиков GitHub Actions может оказаться слишком дорогим. Также важна техническая зрелость команды — готовы ли разработчики изучать новый инструмент или нужно что-то максимально простое.

Текущий технологический стек во многом определяет выбор. Если весь код уже в GitLab, логично использовать GitLab CI. Если команда работает с продуктами JetBrains, TeamCity будет естественным выбором. Используете Kubernetes? Стоит присмотреться к ArgoCD для деплоя.

Требования к безопасности могут стать решающим фактором. Работаете с персональными данными или гостайной? — Только self-hosted решения. Стартап без особых требований? — Можно использовать облачные сервисы.

Бюджет — болезненная, но важная тема. Нужно считать не только прямые расходы на лицензии, но и косвенные — на инфраструктуру, поддержку, обучение команды. Опенсорс решения бесплатны по лицензии, но требуют времени на настройку и поддержку. Облачные сервисы дороже, но экономят время.

Миграция между инструментами
Важно понимать, что выбор CI/CD инструмента — это не навсегда. Компании мигрируют между решениями по мере роста и изменения требований. Но миграция — это всегда боль, поэтому лучше выбирать с запасом на рост.

Самая простая миграция — между GitLab CI и GitHub Actions. Синтаксис похожий, концепции одинаковые, есть инструменты для автоматической конвертации конфигураций. Переезд займёт дни, а не месяцы.

Миграция с Jenkins сложнее из-за уникальности настроек и плагинов. Часто проще переписать пайплайны с нуля, чем пытаться их сконвертировать. Зато Jenkins может работать параллельно с новой системой, позволяя мигрировать проекты постепенно.

Матрица сравнения для быстрого выбора
Быстрый выбор по критериям:

Если...                              То...
─────────────────────────────────    ──────────────────────────
Код на GitHub                     →  GitHub Actions
Код на GitLab                     →  GitLab CI
Нужен максимальный контроль       →  Jenkins
Используете продукты JetBrains    →  TeamCity
Всё на Kubernetes                 →  Tekton + ArgoCD
Нужно быстро и просто             →  GitHub Actions / GitLab.com
Жёсткие требования безопасности   →  Self-hosted Jenkins / GitLab
Ограниченный бюджет               →  GitLab CI / Jenkins
Legacy-системы и интеграции       →  Jenkins
Большая команда (100+)            →  GitLab CI / Jenkins

                  
Помните, что изучение CI/CD — это не просто изучение инструментов. Это понимание философии автоматизации, непрерывной интеграции, быстрой обратной связи. Инструменты — это просто средства достижения цели. Главное — понять принципы и научиться их применять.

В следующем модуле мы перейдём от теории к практике и начнём создавать настоящие пайплайны. Вы узнаете, что такое pipeline, jobs и stages, напишете свои первые конфигурации для GitLab CI и Jenkins.
```