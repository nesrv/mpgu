<!DOCTYPE html><html lang="ru"><head><meta charset="UTF-8"><title>–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ API –Ω–∞ Django - REST, GraphQL –∏ Django 6.0</title><link rel="stylesheet" href="../15-16/css/reveal.min.css"><link rel="stylesheet" href="../15-16/css/black.min.css"><link rel="stylesheet" href="../15-16/css/monokai.min.css"><style>.reveal .slides{width:70%!important;height:90%!important;transform:scale(1.2)!important;position:absolute!important;left:50%!important;top:0!important;transform:translateX(calc(-50% + 5%)) scale(1.2)!important;transform-origin:top center!important}.reveal h1{font-size:1.8em!important;margin-top:0!important;margin-bottom:.4em!important}.reveal h2{font-size:0.75em!important;margin-top:0!important;margin-bottom:.4em!important;text-transform:none!important;text-align:right!important;margin-right:10%!important}.reveal h3{font-size:1.1em!important;margin-top:0!important;margin-bottom:.3em!important;text-transform:none!important}.reveal .slides section{padding:15px!important;font-size:1em!important}.reveal p,.reveal ul,.reveal ol{font-size:.9em!important}pre code{font-size:.975em;max-height:none;overflow:hidden}pre{max-height:none;overflow:hidden;margin:10px 0!important}table{font-size:.65em!important;width:100%!important;border-collapse:collapse!important}table th,table td{padding:8px!important;border:1px solid #444!important;text-align:left!important}.lector-note{background:rgba(255,215,0,0.1);border-left:3px solid #FFD700;padding:10px;margin-top:15px;font-size:.85em;font-style:italic}</style></head><body><div class="reveal"><div class="slides">

<section data-background-color="#1a1a2e"><div style="background:rgba(22,33,62,0.9);padding:40px;border:8px solid #0f3460"><h1 style="color:#FFD700">üöÄ –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ API –Ω–∞ Django</h1><h2 style="color:#90EE90">REST, GraphQL –∏ –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Django 6.0</h2><p style="color:#FFF;font-size:1em">üè´ –ú–ü–ì–£, 4 –∫—É—Ä—Å, 2025</p></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 1: –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Django 6.0</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong style="color:#2ecc71">–û—Å–Ω–æ–≤–Ω—ã–µ –Ω–æ–≤–æ–≤–≤–µ–¥–µ–Ω–∏—è:</strong></p><table style="margin:15px auto;width:95%"><thead><tr><th>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>–ü—Ä–∏–º–µ—Ä</th><th>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞</th></tr></thead><tbody><tr><td><strong>Template Partials</strong></td><td>–ú–æ–¥—É–ª—è—Ä–∏–∑–∞—Ü–∏—è —à–∞–±–ª–æ–Ω–æ–≤</td><td><code>{% partial "header" %}</code></td><td>–ß–∏—Å—Ç—ã–π –∫–æ–¥ —à–∞–±–ª–æ–Ω–æ–≤</td></tr><tr><td><strong>Background Tasks</strong></td><td>–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –∑–∞–¥–∞—á</td><td><code>@background_task</code></td><td>–ë–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</td></tr><tr><td><strong>CSP</strong></td><td>Content Security Policy</td><td><code>CSP_MIDDLEWARE</code></td><td>–ó–∞—â–∏—Ç–∞ –æ—Ç XSS</td></tr><tr><td><strong>Modern Email API</strong></td><td>Python EmailMessage</td><td><code>EmailMessage()</code></td><td>Unicode-friendly</td></tr></tbody></table></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 2: Background Tasks</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–ß—Ç–æ —ç—Ç–æ?</strong> –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Celery, RQ).</p><p style="margin-left:20px;margin-top:15px"><strong>–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</strong></p><pre><code class="language-python">from django.tasks import background_task

@background_task
def send_notification_email(user_id, message):
    user = User.objects.get(id=user_id)
    send_mail(
        subject='Notification',
        message=message,
        from_email='noreply@example.com',
        recipient_list=[user.email],
    )

# –í—ã–∑–æ–≤ –∑–∞–¥–∞—á–∏
send_notification_email.delay(user.id, "Welcome!")</code></pre><p style="margin-left:20px;margin-top:10px"><strong style="color:#2ecc71">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong></p><ul style="margin-left:40px"><li>‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</li><li>‚úÖ –ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</li><li>‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django ORM</li><li>‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á</li></ul></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 3: –î—Ä—É–≥–∏–µ —É–ª—É—á—à–µ–Ω–∏—è Django 6.0</h2><div style="text-align:left;font-size:.65em"><table style="margin:15px auto;width:95%"><thead><tr><th>–û–±–ª–∞—Å—Ç—å</th><th>–£–ª—É—á—à–µ–Ω–∏–µ</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th></tr></thead><tbody><tr><td><strong>ORM</strong></td><td>–£–ª—É—á—à–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã</td><td>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è select_related() –∏ prefetch_related()</td></tr><tr><td><strong>Admin</strong></td><td>–ù–æ–≤—ã–π UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç</td><td>–£–ª—É—á—à–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏</td></tr><tr><td><strong>Forms</strong></td><td>–í–∞–ª–∏–¥–∞—Ü–∏—è</td><td>–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ñ–æ—Ä–º</td></tr><tr><td><strong>Security</strong></td><td>–£–ª—É—á—à–µ–Ω–Ω–∞—è –∑–∞—â–∏—Ç–∞</td><td>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é</td></tr><tr><td><strong>Performance</strong></td><td>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</td><td>–£–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–∞–ø—Ä–æ—Å–æ–≤</td></tr></tbody></table></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 4: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ API —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤ –¥–ª—è Django</h2><div style="text-align:left;font-size:.55em"><p style="margin-left:20px">–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è API –≤ <strong>Django</strong> —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤:</p><table style="margin:10px auto;width:98%;font-size:.85em"><thead><tr><th>–ö—Ä–∏—Ç–µ—Ä–∏–π</th><th>DRF</th><th>Django Ninja</th><th>Tastypie</th><th>Graphene-Django</th><th>Strawberry</th></tr></thead><tbody><tr><td><strong>–¢–∏–ø API</strong></td><td>REST</td><td>REST</td><td>REST</td><td>GraphQL</td><td>GraphQL</td></tr><tr><td><strong>–¢–∏–ø–∏–∑–∞—Ü–∏—è</strong></td><td>–ß–∞—Å—Ç–∏—á–Ω–∞—è</td><td>‚úÖ –ü–æ–ª–Ω–∞—è</td><td>‚ùå –ù–µ—Ç</td><td>‚ùå –°–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã</td><td>‚úÖ –ù–∞—Ç–∏–≤–Ω—ã–µ —Ç–∏–ø—ã</td></tr><tr><td><strong>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</strong></td><td>–•–æ—Ä–æ—à–∞—è</td><td>‚ö° –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è</td><td>–ù–∏–∑–∫–∞—è</td><td>–°—Ä–µ–¥–Ω—è—è</td><td>–í—ã—Å–æ–∫–∞—è</td></tr><tr><td><strong>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å</strong></td><td>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è</td><td>‚úÖ –ü–æ–ª–Ω–∞—è</td><td>‚ùå –ù–µ—Ç</td><td>‚ùå –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è</td><td>‚úÖ –ü–æ–ª–Ω–∞—è</td></tr><tr><td><strong>–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</strong></td><td>‚úÖ Swagger</td><td>‚úÖ OpenAPI</td><td>‚ùå –ù–µ—Ç</td><td>‚úÖ GraphiQL</td><td>‚úÖ GraphiQL</td></tr><tr><td><strong>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</strong></td><td>‚úÖ –ê–∫—Ç–∏–≤–Ω–æ</td><td>‚úÖ –ê–∫—Ç–∏–≤–Ω–æ</td><td>‚ùå –£—Å—Ç–∞—Ä–µ–ª</td><td>‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–æ</td><td>‚úÖ –ê–∫—Ç–∏–≤–Ω–æ</td></tr></tbody></table></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 5: –í–≤–µ–¥–µ–Ω–∏–µ –≤ Graphene</h2><div style="text-align:left;font-size:.7em"><p style="margin-left:20px"><strong>Graphene</strong> - —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è GraphQL API –≤ Python. –†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è Django, –Ω–æ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∏ —Å –¥—Ä—É–≥–∏–º–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏.</p><p style="margin-left:20px;margin-top:15px"><strong style="color:#2ecc71">–ü–æ—á–µ–º—É Graphene?</strong></p><ul style="margin-left:40px"><li>–ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django ORM</li><li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã –∏–∑ –º–æ–¥–µ–ª–µ–π</li><li>Type-safe —Å –ø–æ–º–æ—â—å—é Python type hints</li><li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π GraphQL</li><li>–ê–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –∏ —Ö–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è</li></ul><p style="margin-left:20px;margin-top:15px"><strong>–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:</strong></p><ul style="margin-left:40px"><li>Strawberry GraphQL (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è, —Å type hints)</li><li>Ariadne (code-first –ø–æ–¥—Ö–æ–¥)</li><li>Tartiflette (async-first)</li></ul><p style="margin-left:20px;margin-top:15px">Graphene - —Å–∞–º—ã–π –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è Django –ø—Ä–æ–µ–∫—Ç–æ–≤.</p></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 6: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Strawberry –∏ Graphene</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>Graphene vs Strawberry GraphQL</strong> - –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤—ã–±–æ—Ä–∞ –¥–ª—è GraphQL –≤ Python.</p><div style="display:flex;gap:20px;margin-top:15px"><div style="flex:1"><p style="margin-left:20px"><strong style="color:#2ecc71">Graphene:</strong></p><ul style="margin-left:40px;font-size:.9em"><li>‚úÖ –ó—Ä–µ–ª–∞—è (—Å 2015)</li><li>‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django</li><li>‚úÖ –ë–æ–ª—å—à–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ</li><li>‚ùå –ú–µ–Ω–µ–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å</li><li>‚ùå –ë–æ–ª—å—à–µ boilerplate</li></ul></div><div style="flex:1"><p style="margin-left:20px"><strong style="color:#2ecc71">Strawberry:</strong></p><ul style="margin-left:40px;font-size:.9em"><li>‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å</li><li>‚úÖ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ type hints</li><li>‚úÖ –ú–µ–Ω—å—à–µ –∫–æ–¥–∞</li><li>‚úÖ Async/await –∏–∑ –∫–æ—Ä–æ–±–∫–∏</li><li>‚ùå –ú–æ–ª–æ–∂–µ (—Å 2020)</li></ul></div></div><p style="margin-left:20px;margin-top:15px"><strong>–í—ã–≤–æ–¥:</strong> Graphene - –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–±–æ—Ä –¥–ª—è Django, Strawberry - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.</p></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 7: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–£—Å—Ç–∞–Ω–æ–≤–∫–∞:</strong></p><pre><code class="language-bash">pip install graphene-django django-filter</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ settings.py:</strong></p><pre><code class="language-python">INSTALLED_APPS = [
    'django.contrib.admin',
    'graphene_django',  # –î–æ–±–∞–≤–ª—è–µ–º Graphene
    'myapp',
]

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GraphQL
GRAPHENE = {
    'SCHEMA': 'myapp.schema.schema',
    'MIDDLEWARE': [
        'graphene_django.ext.django_jwt.middleware.JSONWebTokenMiddleware',
    ],
}</code></pre><p style="margin-left:20px;margin-top:15px"><strong>URL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</strong></p><pre><code class="language-python">from graphene_django.views import GraphQLView

urlpatterns = [
    path('graphql/', GraphQLView.as_view(graphiql=True)),
]</code></pre><p style="margin-left:20px;margin-top:10px"><code>graphiql=True</code> –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é IDE –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤.</p></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 8: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞</h2><div style="text-align:left;font-size:.7em"><p style="margin-left:20px"><strong>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:</strong></p><pre><code class="language-text">myproject/
‚îú‚îÄ‚îÄ myapp/
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # Django –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ schema.py          # GraphQL —Å—Ö–µ–º–∞
‚îÇ   ‚îú‚îÄ‚îÄ types.py           # GraphQL —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ queries.py         # Query –∫–ª–∞—Å—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ mutations.py       # Mutation –∫–ª–∞—Å—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ subscriptions.py   # Subscription –∫–ª–∞—Å—Å—ã
‚îú‚îÄ‚îÄ settings.py
‚îî‚îÄ‚îÄ urls.py</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:</strong></p><ul style="margin-left:40px"><li><strong>Types</strong> - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç Django –º–æ–¥–µ–ª—è–º</li><li><strong>Queries</strong> - –æ–ø–µ—Ä–∞—Ü–∏–∏ —á—Ç–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö</li><li><strong>Mutations</strong> - –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö</li><li><strong>Schema</strong> - –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å—ë –≤–º–µ—Å—Ç–µ</li></ul></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 9: Django –º–æ–¥–µ–ª—å</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–ü—Ä–∏–º–µ—Ä –º–æ–¥–µ–ª–∏:</strong></p><pre><code class="language-python"># models.py
from django.db import models
from django.contrib.auth.models import User

class Post(models.Model):
    title = models.CharField(max_length=200)
    content = models.TextField()
    author = models.ForeignKey(User, on_delete=models.CASCADE)
    created_at = models.DateTimeField(auto_now_add=True)
    published = models.BooleanField(default=False)
    
    class Meta:
        ordering = ['-created_at']
    
    def __str__(self):
        return self.title</code></pre><p style="margin-left:20px;margin-top:15px">–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è Django –º–æ–¥–µ–ª—å. Graphene –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å GraphQL —Ç–∏–ø –∏–∑ –º–æ–¥–µ–ª–∏, –Ω–æ –ª—É—á—à–µ –¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤—Ä—É—á–Ω—É—é –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è.</p></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 10: –°–æ–∑–¥–∞–Ω–∏–µ GraphQL —Ç–∏–ø–∞</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–ë–∞–∑–æ–≤—ã–π —Ç–∏–ø –∏–∑ –º–æ–¥–µ–ª–∏:</strong></p><pre><code class="language-python"># types.py
import graphene
from graphene_django import DjangoObjectType
from .models import Post

class PostType(DjangoObjectType):
    class Meta:
        model = Post
        fields = ('id', 'title', 'content', 'author', 'created_at', 'published')</code></pre><p style="margin-left:20px;margin-top:15px"><strong>DjangoObjectType</strong> –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:</p><ul style="margin-left:40px"><li>–°–æ–∑–¥–∞–µ—Ç GraphQL —Ç–∏–ø –∏–∑ Django –º–æ–¥–µ–ª–∏</li><li>–ú–∞–ø–ø–∏—Ç –ø–æ–ª—è –º–æ–¥–µ–ª–∏ –Ω–∞ GraphQL –ø–æ–ª—è</li><li>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–≤—è–∑–∏ (ForeignKey, ManyToMany)</li></ul><p style="margin-left:20px;margin-top:15px"><strong>–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ü–∏–∏ Meta:</strong></p><ul style="margin-left:40px"><li><code>model</code> - Django –º–æ–¥–µ–ª—å</li><li><code>fields</code> - –∫–∞–∫–∏–µ –ø–æ–ª—è –≤–∫–ª—é—á–∏—Ç—å</li><li><code>exclude</code> - –∫–∞–∫–∏–µ –ø–æ–ª—è –∏—Å–∫–ª—é—á–∏—Ç—å</li><li><code>filter_fields</code> - –ø–æ–ª—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</li></ul></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 11: –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è —Ç–∏–ø–æ–≤</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –ø–æ–ª–µ–π:</strong></p><pre><code class="language-python">class PostType(DjangoObjectType):
    word_count = graphene.Int()
    excerpt = graphene.String()
    
    class Meta:
        model = Post
        fields = '__all__'
    
    def resolve_word_count(self, info):
        return len(self.content.split())
    
    def resolve_excerpt(self, info):
        return self.content[:100] + '...' if len(self.content) > 100 else self.content</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–≤—è–∑–µ–π:</strong></p><pre><code class="language-python">class PostType(DjangoObjectType):
    comments = graphene.List('myapp.types.CommentType')
    
    def resolve_comments(self, info):
        return self.comments.all()</code></pre><p style="margin-left:20px;margin-top:15px">Resolvers –ø–æ–∑–≤–æ–ª—è—é—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –ª—é–±—É—é –ª–æ–≥–∏–∫—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.</p></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 12: –¢–∏–ø—ã –¥–ª—è User</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–ø–∞ –¥–ª—è Django User:</strong></p><pre><code class="language-python"># types.py
from django.contrib.auth.models import User
import graphene
from graphene_django import DjangoObjectType

class UserType(DjangoObjectType):
    posts = graphene.List('myapp.types.PostType')
    
    class Meta:
        model = User
        fields = ('id', 'username', 'email', 'first_name', 'last_name')
        # –ò—Å–∫–ª—é—á–∞–µ–º —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
    
    def resolve_posts(self, info):
        return self.post_set.all()</code></pre><p style="margin-left:20px;margin-top:15px"><strong style="color:#e74c3c">–í–∞–∂–Ω–æ:</strong> –ù–µ –≤–∫–ª—é—á–∞–π—Ç–µ <code>password</code> –∏ –¥—Ä—É–≥–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ GraphQL —Ç–∏–ø!</p></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 13: –ë–∞–∑–æ–≤—ã–π Query</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–°–æ–∑–¥–∞–Ω–∏–µ Query –∫–ª–∞—Å—Å–∞:</strong></p><pre><code class="language-python"># queries.py
import graphene
from .types import PostType

class Query(graphene.ObjectType):
    posts = graphene.List(PostType)
    post = graphene.Field(PostType, id=graphene.Int(required=True))
    
    def resolve_posts(self, info):
        return Post.objects.all()
    
    def resolve_post(self, info, id):
        return Post.objects.get(id=id)</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</strong></p><pre><code class="language-graphql">query {
  posts {
    id
    title
    content
  }
  
  post(id: 1) {
    title
    author {
      username
    }
  }
}</code></pre></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 14: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å django-filter:</strong></p><pre><code class="language-python"># types.py
from graphene_django import DjangoObjectType, DjangoFilterConnectionField

class PostType(DjangoObjectType):
    class Meta:
        model = Post
        filter_fields = {
            'title': ['exact', 'icontains'],
            'published': ['exact'],
            'created_at': ['gte', 'lte'],
        }
        interfaces = (graphene.relay.Node,)

# queries.py
class Query(graphene.ObjectType):
    posts = DjangoFilterConnectionField(PostType)</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</strong></p><pre><code class="language-graphql">query {
  posts(title_Icontains: "Django", published: true) {
    edges {
      node {
        title
        content
      }
    }
  }
}</code></pre></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 15: –ü–∞–≥–∏–Ω–∞—Ü–∏—è (Relay Connection)</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>Relay Connection –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏:</strong></p><pre><code class="language-python"># queries.py
from graphene import relay

class Query(graphene.ObjectType):
    posts = relay.ConnectionField(PostType)
    
    def resolve_posts(self, info, **kwargs):
        return Post.objects.all()</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</strong></p><pre><code class="language-graphql">query {
  posts(first: 10, after: "YXJyYXljb25uZWN0aW9uOjk=") {
    edges {
      node {
        title
        content
      }
      cursor
    }
    pageInfo {
      hasNextPage
      endCursor
    }
  }
}</code></pre><p style="margin-left:20px;margin-top:10px">–≠—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ GraphQL.</p></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 16: –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ Query</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:</strong></p><pre><code class="language-python"># queries.py
class Query(graphene.ObjectType):
    me = graphene.Field(UserType)
    my_posts = graphene.List(PostType)
    
    def resolve_me(self, info):
        user = info.context.user
        if not user.is_authenticated:
            raise Exception('Authentication required')
        return user
    
    def resolve_my_posts(self, info):
        user = info.context.user
        if not user.is_authenticated:
            raise Exception('Authentication required')
        return Post.objects.filter(author=user)</code></pre><p style="margin-left:20px;margin-top:15px"><strong>info.context.user</strong> —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Django —Å–µ—Å—Å–∏–∏ –∏–ª–∏ JWT —Ç–æ–∫–µ–Ω–∞.</p></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 17: –ë–∞–∑–æ–≤—ã–π Mutation</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–°–æ–∑–¥–∞–Ω–∏–µ Mutation:</strong></p><pre><code class="language-python"># mutations.py
class CreatePost(graphene.Mutation):
    class Arguments:
        title = graphene.String(required=True)
        content = graphene.String(required=True)
        published = graphene.Boolean()
    
    post = graphene.Field(PostType)
    success = graphene.Boolean()
    
    def mutate(self, info, title, content, published=False):
        user = info.context.user
        if not user.is_authenticated:
            raise Exception('Authentication required')
        
        post = Post.objects.create(
            title=title,
            content=content,
            author=user,
            published=published
        )
        
        return CreatePost(post=post, success=True)

class Mutation(graphene.ObjectType):
    create_post = CreatePost.Field()</code></pre></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 18: Input —Ç–∏–ø—ã –¥–ª—è Mutations</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Input —Ç–∏–ø–æ–≤:</strong></p><pre><code class="language-python"># mutations.py
class PostInput(graphene.InputObjectType):
    title = graphene.String(required=True)
    content = graphene.String(required=True)
    published = graphene.Boolean()

class CreatePost(graphene.Mutation):
    class Arguments:
        input = PostInput(required=True)
    
    post = graphene.Field(PostType)
    
    def mutate(self, info, input):
        user = info.context.user
        post = Post.objects.create(
            title=input.title,
            content=input.content,
            author=user,
            published=input.get('published', False)
        )
        return CreatePost(post=post)</code></pre><p style="margin-left:20px;margin-top:15px">Input —Ç–∏–ø—ã –¥–µ–ª–∞—é—Ç –º—É—Ç–∞—Ü–∏–∏ –±–æ–ª–µ–µ —á–∏—Ç–∞–µ–º—ã–º–∏ –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏.</p></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 19: Update –∏ Delete Mutations</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>Update Mutation:</strong></p><pre><code class="language-python">class UpdatePost(graphene.Mutation):
    class Arguments:
        id = graphene.Int(required=True)
        input = PostInput()
    
    post = graphene.Field(PostType)
    
    def mutate(self, info, id, input):
        user = info.context.user
        post = Post.objects.get(id=id)
        
        if post.author != user:
            raise Exception('Permission denied')
        
        for key, value in input.items():
            setattr(post, key, value)
        post.save()
        return UpdatePost(post=post)</code></pre><p style="margin-left:20px;margin-top:15px"><strong>Delete Mutation:</strong></p><pre><code class="language-python">class DeletePost(graphene.Mutation):
    class Arguments:
        id = graphene.Int(required=True)
    
    success = graphene.Boolean()
    
    def mutate(self, info, id):
        user = info.context.user
        post = Post.objects.get(id=id)
        if post.author != user:
            raise Exception('Permission denied')
        post.delete()
        return DeletePost(success=True)</code></pre></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 20: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ Mutations</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è:</strong></p><pre><code class="language-python"># exceptions.py
class GraphQLError(Exception):
    def __init__(self, message, code=None):
        self.message = message
        self.code = code
        super().__init__(self.message)

# mutations.py
class CreatePost(graphene.Mutation):
    post = graphene.Field(PostType)
    errors = graphene.List(graphene.String)
    
    def mutate(self, info, title, content):
        errors = []
        
        if not title or len(title) < 3:
            errors.append('Title must be at least 3 characters')
        
        if not content or len(content) < 10:
            errors.append('Content must be at least 10 characters')
        
        if errors:
            return CreatePost(errors=errors)
        
        post = Post.objects.create(...)
        return CreatePost(post=post, errors=[])</code></pre></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 21: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ Schema</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–∞–≤–Ω–æ–π —Å—Ö–µ–º—ã:</strong></p><pre><code class="language-python"># schema.py
import graphene
from .queries import Query
from .mutations import Mutation

schema = graphene.Schema(query=Query, mutation=Mutation)</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–ï—Å–ª–∏ –µ—Å—Ç—å Subscriptions:</strong></p><pre><code class="language-python"># schema.py
from .subscriptions import Subscription

schema = graphene.Schema(
    query=Query,
    mutation=Mutation,
    subscription=Subscription
)</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–í settings.py:</strong></p><pre><code class="language-python">GRAPHENE = {
    'SCHEMA': 'myapp.schema.schema',
}</code></pre></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 22: Subscriptions (WebSocket)</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è Subscriptions:</strong></p><pre><code class="language-bash">pip install channels channels-redis</code></pre><p style="margin-left:20px;margin-top:15px"><strong>settings.py:</strong></p><pre><code class="language-python">INSTALLED_APPS = [
    'channels',
    'graphene_django',
]

ASGI_APPLICATION = 'myproject.asgi.application'

CHANNEL_LAYERS = {
    'default': {
        'BACKEND': 'channels_redis.core.RedisChannelLayer',
        'CONFIG': {
            "hosts": [('127.0.0.1', 6379)],
        },
    },
}</code></pre><p style="margin-left:20px;margin-top:15px"><strong>asgi.py:</strong></p><pre><code class="language-python">from channels.routing import ProtocolTypeRouter, URLRouter
from graphene_subscriptions.consumers import GraphqlSubscriptionConsumer

application = ProtocolTypeRouter({
    "websocket": URLRouter([
        path("graphql/", GraphqlSubscriptionConsumer),
    ]),
})</code></pre></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 23: –°–æ–∑–¥–∞–Ω–∏–µ Subscription</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–ü—Ä–∏–º–µ—Ä Subscription:</strong></p><pre><code class="language-python"># subscriptions.py
from graphene_subscriptions.events import CREATED, UPDATED, DELETED

class PostSubscription(graphene.ObjectType):
    post_created = graphene.Field(PostType)
    post_updated = graphene.Field(PostType)
    post_deleted = graphene.Int()
    
    def resolve_post_created(root, info):
        return root.filter(
            lambda event: event.operation == CREATED and
            isinstance(event.instance, Post)
        ).map(lambda event: event.instance)
    
    def resolve_post_updated(root, info):
        return root.filter(
            lambda event: event.operation == UPDATED and
            isinstance(event.instance, Post)
        ).map(lambda event: event.instance)</code></pre></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 24: –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ Mutations</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏–π:</strong></p><pre><code class="language-python"># mutations.py
from graphene_subscriptions.events import CREATED, UPDATED
from channels.layers import get_channel_layer
from asgiref.sync import async_to_sync

class CreatePost(graphene.Mutation):
    def mutate(self, info, title, content):
        post = Post.objects.create(...)
        
        # –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è
        channel_layer = get_channel_layer()
        async_to_sync(channel_layer.group_send)(
            "posts",
            {
                "type": "post.created",
                "event": {
                    "operation": CREATED,
                    "instance": post,
                }
            }
        )
        
        return CreatePost(post=post)</code></pre></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 25: Middleware</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ middleware:</strong></p><pre><code class="language-python"># middleware.py
class AuthMiddleware:
    def resolve(self, next, root, info, **args):
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º resolver
        if not info.context.user.is_authenticated:
            raise Exception('Authentication required')
        return next(root, info, **args)

# settings.py
GRAPHENE = {
    'SCHEMA': 'myapp.schema.schema',
    'MIDDLEWARE': [
        'myapp.middleware.AuthMiddleware',
    ],
}</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ middleware:</strong></p><ul style="margin-left:40px"><li><code>JSONWebTokenMiddleware</code> - –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤</li><li><code>DjangoDebugMiddleware</code> - –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏</li></ul></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 26: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ (N+1)</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–ü—Ä–æ–±–ª–µ–º–∞ N+1:</strong></p><pre><code class="language-python"># –ü–ª–æ—Ö–æ - N+1 –∑–∞–ø—Ä–æ—Å–æ–≤
class Query(graphene.ObjectType):
    posts = graphene.List(PostType)
    
    def resolve_posts(self, info):
        return Post.objects.all()  # –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—Å—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∞–≤—Ç–æ—Ä–∞</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–†–µ—à–µ–Ω–∏–µ - select_related –∏ prefetch_related:</strong></p><pre><code class="language-python"># –•–æ—Ä–æ—à–æ - 2 –∑–∞–ø—Ä–æ—Å–∞
class Query(graphene.ObjectType):
    posts = graphene.List(PostType)
    
    def resolve_posts(self, info):
        return Post.objects.select_related('author').prefetch_related('comments').all()</code></pre><p style="margin-left:20px;margin-top:15px"><strong>DataLoader –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤:</strong></p><pre><code class="language-python">from promise.dataloader import DataLoader

class UserLoader(DataLoader):
    def batch_load_fn(self, keys):
        users = User.objects.in_bulk(keys)
        return [users.get(key) for key in keys]</code></pre></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 27: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GraphQL</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å Django TestCase:</strong></p><pre><code class="language-python"># tests.py
from django.test import TestCase
from graphene.test import Client
from .schema import schema

class PostQueryTest(TestCase):
    def setUp(self):
        self.client = Client(schema)
        self.post = Post.objects.create(
            title='Test Post',
            content='Test Content'
        )
    
    def test_posts_query(self):
        query = '''
        query {
            posts {
                id
                title
            }
        }
        '''
        result = self.client.execute(query)
        self.assertEqual(len(result['data']['posts']), 1)
        self.assertEqual(result['data']['posts'][0]['title'], 'Test Post')</code></pre></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 28: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Mutations</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º—É—Ç–∞—Ü–∏–π:</strong></p><pre><code class="language-python">class PostMutationTest(TestCase):
    def setUp(self):
        self.client = Client(schema)
        self.user = User.objects.create_user(
            username='testuser',
            password='testpass'
        )
    
    def test_create_post(self):
        mutation = '''
        mutation {
            createPost(input: {
                title: "New Post"
                content: "Post Content"
            }) {
                post {
                    id
                    title
                }
            }
        }
        '''
        context = {'user': self.user}
        result = self.client.execute(mutation, context_value=context)
        
        self.assertTrue(result['data']['createPost']['post'])
        self.assertEqual(result['data']['createPost']['post']['title'], 'New Post')</code></pre></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 29: JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–£—Å—Ç–∞–Ω–æ–≤–∫–∞:</strong></p><pre><code class="language-bash">pip install django-graphql-jwt</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–ù–∞—Å—Ç—Ä–æ–π–∫–∞:</strong></p><pre><code class="language-python"># settings.py
GRAPHENE = {
    'SCHEMA': 'myapp.schema.schema',
    'MIDDLEWARE': [
        'graphql_jwt.middleware.JSONWebTokenMiddleware',
    ],
}

AUTHENTICATION_BACKENDS = [
    'graphql_jwt.backends.JSONWebTokenBackend',
    'django.contrib.auth.backends.ModelBackend',
]</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º—É—Ç–∞—Ü–∏–π:</strong></p><pre><code class="language-python"># mutations.py
import graphql_jwt

class Mutation(graphene.ObjectType):
    token_auth = graphql_jwt.ObtainJSONWebToken.Field()
    verify_token = graphql_jwt.Verify.Field()
    refresh_token = graphql_jwt.Refresh.Field()</code></pre></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 30: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ JWT</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:</strong></p><pre><code class="language-graphql">mutation {
  tokenAuth(username: "user", password: "pass") {
    token
  }
}</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:</strong></p><pre><code class="language-javascript">// –í –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–∞
headers: {
  'Authorization': 'JWT <token>'
}</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–í Python –∫–ª–∏–µ–Ω—Ç–µ:</strong></p><pre><code class="language-python">import requests

query = '''
query {
  me {
    username
    email
  }
}
'''

response = requests.post(
    'http://localhost:8000/graphql/',
    json={'query': query},
    headers={'Authorization': 'JWT <token>'}
)</code></pre></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 31: –§–∞–π–ª–æ–≤—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–£—Å—Ç–∞–Ω–æ–≤–∫–∞:</strong></p><pre><code class="language-bash">pip install graphene-file-upload</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–ù–∞—Å—Ç—Ä–æ–π–∫–∞:</strong></p><pre><code class="language-python"># urls.py
from graphene_file_upload.django import FileUploadGraphQLView

urlpatterns = [
    path('graphql/', FileUploadGraphQLView.as_view(graphiql=True)),
]</code></pre><p style="margin-left:20px;margin-top:15px"><strong>Mutation –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏:</strong></p><pre><code class="language-python">from graphene_file_upload.scalars import Upload

class UploadFile(graphene.Mutation):
    class Arguments:
        file = Upload(required=True)
    
    success = graphene.Boolean()
    url = graphene.String()
    
    def mutate(self, info, file):
        fs = FileSystemStorage()
        filename = fs.save(file.name, file)
        url = fs.url(filename)
        return UploadFile(success=True, url=url)</code></pre></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 32: –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–∫–∞–ª—è—Ä–Ω—ã–µ —Ç–∏–ø—ã</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>–°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ç–∏–ø–∞:</strong></p><pre><code class="language-python"># scalars.py
import graphene
from datetime import datetime

class DateTime(graphene.Scalar):
    @staticmethod
    def serialize(dt):
        return dt.isoformat()
    
    @staticmethod
    def parse_literal(node):
        if isinstance(node, str):
            return datetime.fromisoformat(node)
    
    @staticmethod
    def parse_value(value):
        return datetime.fromisoformat(value)

# types.py
class PostType(DjangoObjectType):
    created_at = DateTime()
    
    class Meta:
        model = Post</code></pre></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 33: Best Practices</h2><div style="text-align:left;font-size:.7em"><p style="margin-left:20px"><strong>1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –º–æ–¥—É–ª–∏:</strong></p><ul style="margin-left:40px"><li><code>types.py</code> - GraphQL —Ç–∏–ø—ã</li><li><code>queries.py</code> - Query –∫–ª–∞—Å—Å—ã</li><li><code>mutations.py</code> - Mutation –∫–ª–∞—Å—Å—ã</li><li><code>schema.py</code> - –≥–ª–∞–≤–Ω–∞—è —Å—Ö–µ–º–∞</li></ul><p style="margin-left:20px;margin-top:15px"><strong>2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Input —Ç–∏–ø—ã –¥–ª—è –º—É—Ç–∞—Ü–∏–π</strong></p><p style="margin-left:20px;margin-top:15px"><strong>3. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã:</strong></p><pre><code class="language-python">Post.objects.select_related('author').prefetch_related('comments')</code></pre><p style="margin-left:20px;margin-top:15px"><strong>4. –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –º—É—Ç–∞—Ü–∏–π</strong></p><p style="margin-left:20px;margin-top:15px"><strong>5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ permissions</strong></p></div></section>

<section data-background-color="#2c3e50"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 34: –û—Ç–ª–∞–¥–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</h2><div style="text-align:left;font-size:.65em"><p style="margin-left:20px"><strong>Django Debug Toolbar –¥–ª—è GraphQL:</strong></p><pre><code class="language-python"># settings.py
if DEBUG:
    GRAPHENE = {
        'SCHEMA': 'myapp.schema.schema',
        'MIDDLEWARE': [
            'graphene_django.debug.DjangoDebugMiddleware',
        ],
    }</code></pre><p style="margin-left:20px;margin-top:15px"><strong>–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤:</strong></p><pre><code class="language-python"># middleware.py
import logging

logger = logging.getLogger(__name__)

class LoggingMiddleware:
    def resolve(self, next, root, info, **args):
        logger.info(f"GraphQL query: {info.field_name}")
        return next(root, info, **args)</code></pre><p style="margin-left:20px;margin-top:15px"><strong>Apollo Studio –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:</strong></p><ul style="margin-left:40px"><li>–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</li><li>–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤</li><li>–ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API</li></ul></div></section>

<section data-background-color="#16213e"><h2 style="color:#FFD700">–°–ª–∞–π–¥ 35: –ó–∞–∫–ª—é—á–µ–Ω–∏–µ</h2><div style="text-align:left;font-size:.7em"><p style="margin-left:20px"><strong style="color:#2ecc71">Graphene + Django = –º–æ—â–Ω–æ–µ —Å–æ—á–µ—Ç–∞–Ω–∏–µ:</strong></p><ul style="margin-left:40px"><li>‚úÖ –ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django ORM</li><li>‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –∏–∑ –º–æ–¥–µ–ª–µ–π</li><li>‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π GraphQL</li><li>‚úÖ –õ–µ–≥–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ permissions</li><li>‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ</li></ul><p style="margin-left:20px;margin-top:15px"><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong></p><ul style="margin-left:40px"><li>–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ Django –ø—Ä–æ–µ–∫—Ç—ã</li><li>–ù—É–∂–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Django Admin</li><li>–ö–æ–º–∞–Ω–¥–∞ –∑–Ω–∞–µ—Ç Django</li></ul><p style="margin-left:20px;margin-top:15px"><strong>–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:</strong></p><ul style="margin-left:40px"><li>Strawberry GraphQL (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, type hints)</li><li>Ariadne (code-first)</li><li>FastAPI + Strawberry (async)</li></ul><p style="margin-left:20px;margin-top:15px"><strong>–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:</strong></p><ol style="margin-left:40px"><li>–ò–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Graphene</li><li>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π API</li><li>–ò–∑—É—á–∏—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∑–∞–ø—Ä–æ—Å–æ–≤</li><li>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é</li></ol></div></section>

</div></div><script src="../15-16/js/reveal.min.js"></script><script src="../15-16/js/notes.min.js"></script><script src="../15-16/js/markdown.min.js"></script><script src="../15-16/js/highlight.min.js"></script><script>Reveal.initialize({hash:true,transition:'slide',controls:true,progress:true,slideNumber:true,center:false,margin:0.02,plugins:[RevealMarkdown,RevealHighlight,RevealNotes]});Reveal.addEventListener('ready',function(){if(typeof hljs!=='undefined'){hljs.registerLanguage('python',function(hljs){return{aliases:['py'],keywords:{keyword:'and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del def lambda async await',built_in:'abs all any bin bool chr dict dir divmod enumerate filter float format frozenset getattr globals hasattr hash help hex id input int isinstance issubclass iter len list locals map max min next oct open ord pow print property range repr reversed round set setattr slice sorted str sum super tuple type vars zip',literal:'True False None'},contains:[hljs.HASH_COMMENT_MODE,hljs.QUOTE_STRING_MODE,hljs.NUMBER_MODE,{className:'function',begin:/\bdef [a-zA-Z_][a-zA-Z0-9_]*\s*\(/,relevance:10},{className:'class',begin:/\bclass [a-zA-Z_][a-zA-Z0-9_]*\s*\(/,relevance:10}]}});hljs.registerLanguage('graphql',function(hljs){return{aliases:['gql','sdl'],keywords:{keyword:'query mutation subscription type interface union scalar enum input extend directive schema implements',literal:'true false null'},contains:[hljs.HASH_COMMENT_MODE,hljs.QUOTE_STRING_MODE,hljs.NUMBER_MODE,{className:'type',begin:'\\b[A-Z][a-zA-Z0-9]*\\b',relevance:0},{className:'attr',begin:'\\b[a-z][a-zA-Z0-9]*\\b',relevance:0},{className:'punctuation',begin:/[!(){}\[\]:=|]/,relevance:0},{className:'directive',begin:'@[a-zA-Z]+',relevance:0}]}});hljs.highlightAll();}});</script></body></html>
