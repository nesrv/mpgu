# Различия между plainto_tsquery и to_tsquery

## plainto_tsquery - простой поиск

- Преобразует текст в запрос автоматически
- Игнорирует спецсимволы (`&`, `|`, `!`, `()`)
- Слова соединяются через `&` (AND)
- Безопасен для пользовательского ввода

```sql
plainto_tsquery('кот собака') → 'кот' & 'собака'
plainto_tsquery('кот & собака') → 'кот' & 'собака' -- спецсимволы игнорируются
```

## to_tsquery - расширенный поиск

- Требует правильный синтаксис запроса
- Поддерживает операторы: `&` (AND), `|` (OR), `!` (NOT), `()` (группировка)
- Выдаст **ошибку** при неправильном синтаксисе
- Опасен для прямого пользовательского ввода

```sql
to_tsquery('кот & собака') → 'кот' & 'собака'
to_tsquery('кот | собака') → 'кот' | 'собака'
to_tsquery('кот & !собака') → 'кот' & !'собака'
to_tsquery('кот собака') → ОШИБКА (нет оператора)
```

## Рекомендация

- Для поиска от пользователей → `plainto_tsquery`
- Для сложных запросов с логикой → `to_tsquery` (но валидируйте ввод)
- Есть ещё `websearch_to_tsquery` (PostgreSQL 11+) - как Google поиск с кавычками и `-`
